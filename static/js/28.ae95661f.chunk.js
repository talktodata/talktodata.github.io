(this["webpackJsonpcalliope-talk"]=this["webpackJsonpcalliope-talk"]||[]).push([[28,31,59,60],{119:function(e,a,t){},120:function(e,a,t){},320:function(e,a,t){"use strict";var r=t(321);e.exports=function(e,a,t){if("number"===typeof a&&(t=a),r.has(e.toLowerCase())){a=r.get(e.toLowerCase());var s=e.charAt(0);s===s.toUpperCase()&&(a=s.toUpperCase()+a.slice(1)),e===e.toUpperCase()&&(a=a.toUpperCase())}else"string"!==typeof a&&(a=(e.replace(/(?:s|x|z|ch|sh)$/i,"$&e").replace(/([^aeiou])y$/i,"$1ie")+"s").replace(/i?e?s$/i,(function(a){return e.slice(-1)===e.slice(-1).toLowerCase()?a.toLowerCase():a.toUpperCase()})));return 1===Math.abs(t)?e:a}},321:function(e,a,t){"use strict";(function(e){var a=t(322);Object.defineProperty(e,"exports",{get:function(){return new Map(Object.entries(a))}})}).call(this,t(53)(e))},322:function(e){e.exports=JSON.parse('{"addendum":"addenda","aircraft":"aircraft","alga":"algae","alumna":"alumnae","alumnus":"alumni","amoeba":"amoebae","analysis":"analyses","antenna":"antennae","antithesis":"antitheses","apex":"apices","appendix":"appendices","automaton":"automata","axis":"axes","bacillus":"bacilli","bacterium":"bacteria","barracks":"barracks","basis":"bases","beau":"beaux","bison":"bison","buffalo":"buffalo","bureau":"bureaus","cactus":"cacti","calf":"calves","carp":"carp","census":"censuses","chassis":"chassis","cherub":"cherubim","child":"children","ch\xe2teau":"ch\xe2teaus","cod":"cod","codex":"codices","concerto":"concerti","corpus":"corpora","crisis":"crises","criterion":"criteria","curriculum":"curricula","datum":"data","deer":"deer","diagnosis":"diagnoses","die":"dice","dwarf":"dwarfs","echo":"echoes","elf":"elves","elk":"elk","ellipsis":"ellipses","embargo":"embargoes","emphasis":"emphases","erratum":"errata","faux pas":"faux pas","fez":"fezes","firmware":"firmware","fish":"fish","focus":"foci","foot":"feet","formula":"formulae","fungus":"fungi","gallows":"gallows","genus":"genera","goose":"geese","graffito":"graffiti","grouse":"grouse","half":"halves","hero":"heroes","hoof":"hooves","hovercraft":"hovercraft","hypothesis":"hypotheses","index":"indices","kakapo":"kakapo","knife":"knives","larva":"larvae","leaf":"leaves","libretto":"libretti","life":"lives","loaf":"loaves","locus":"loci","louse":"lice","man":"men","matrix":"matrices","means":"means","medium":"media","media":"media","memorandum":"memoranda","millennium":"millennia","minutia":"minutiae","moose":"moose","mouse":"mice","nebula":"nebulae","nemesis":"nemeses","neurosis":"neuroses","news":"news","nucleus":"nuclei","oasis":"oases","offspring":"offspring","opus":"opera","ovum":"ova","ox":"oxen","paralysis":"paralyses","parenthesis":"parentheses","person":"people","phenomenon":"phenomena","phylum":"phyla","pike":"pike","polyhedron":"polyhedra","potato":"potatoes","prognosis":"prognoses","quiz":"quizzes","radius":"radii","referendum":"referenda","salmon":"salmon","scarf":"scarves","self":"selves","series":"series","sheep":"sheep","shelf":"shelves","shrimp":"shrimp","spacecraft":"spacecraft","species":"species","spectrum":"spectra","squid":"squid","stimulus":"stimuli","stratum":"strata","swine":"swine","syllabus":"syllabi","symposium":"symposia","synopsis":"synopses","synthesis":"syntheses","tableau":"tableaus","that":"those","thesis":"theses","thief":"thieves","this":"these","tomato":"tomatoes","tooth":"teeth","trout":"trout","tuna":"tuna","vertebra":"vertebrae","vertex":"vertices","veto":"vetoes","vita":"vitae","vortex":"vortices","watercraft":"watercraft","wharf":"wharves","wife":"wives","wolf":"wolves","woman":"women"}')},392:function(e,a,t){},55:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return j}));var r=t(21),s=t(15),n=t(16),i=t(17),o=t(18),c=t(0),u=t.n(c),p=t(181),l=[{id:0,template:"The Pearson correlation between the {{measure1}} and the {{measure2}} is {{parameter}} when {{subspace}}."},{id:1,template:"When {{subspace}}, the Pearson correlation coefficient between the {{measure1}} and the {{measure2}} is {{parameter}}."},{id:2,template:"When {{subspace}}, the {{measure1}} is correlated with the {{measure2}} and the Person correlation is {{parameter}}."}],m=[{id:0,template:"When {{subspace}}, there are {{parameter}} {{groupby}}s: {{no.1}}, {{no.2}}, {{no.3}}, and {{focus}} needs to pay attention."},{id:1,template:"When {{subspace}}, the data are grouped into {{parameter}} {{groupby}}s, including {{no.1}}, {{no.2}}, {{no.3}}, among which {{focus}} needs to pay attention."},{id:2,template:"The data contain {{parameter}} {{groupby}}s when {{subspace}}, which are {{no.1}}, {{no.2}}, {{no.3}}. {{focus}} needs to pay attention."}],h=[{id:0,template:"The difference between {{focus1}} and {{focus2}} regarding to their {{agg}} {{measure}} is {{parameter}} when {{subspace}}."},{id:1,template:"{{focus1}} and {{focus2}}'s difference on the {{agg}} {{measure}} is {{parameter}} when {{subspace}}."},{id:2,template:"A comparison between {{focus1}} and {{focus2}} on their {{agg}} {{measure}} shows the difference is {{parameter}} when {{subspace}}."}],d=[{id:0,template:"The distribution of the {{agg}} {{measure}} over different {{groupby}}s shows an overview of the data when {{subspace}} and {{focus}} needs to pay attention."},{id:1,template:"The distribution of the {{agg}} {{measure}} over different {{groupby}}s shows an overview of the data when {{subspace}} and {{focus}} needs to pay attention."},{id:2,template:"The distribution of the {{agg}} {{measure}} over different {{groupby}}s shows an overview of the data when {{subspace}} and {{focus}} needs to pay attention."}],f=[{id:0,template:"Given {{subspace}}, the {{focus}} value of the {{agg}} {{measure}} is {{parameter[1]}} when the {{groupby}} is {{parameter[0]}}."},{id:1,template:"The {{focus}} {{agg}} {{measure}} value over {{groupby}}s is {{parameter[1]}} when the {{groupby}} is {{parameter[0]}} given {{subspace}}."},{id:2,template:"Among all {{groupby}}s, {{parameter[0]}} has the {{focus}} {{agg}} {{measure}} value, which is {{parameter[1]}}, when {{subspace}}."}],g=[{id:0,template:"The {{agg}} {{measure}} of {{focus}} is an outlier when compared with that of other {{groupby}}s when {{subspace}}."},{id:1,template:"{{focus}}'s {{agg}} {{measure}} is anomalously different from other {{groupby}}s' {{measure}} when {{subspace}}."},{id:2,template:"Among various {{groupby}}s, the {{agg}} {{measure}} of {{focus}} is an anomaly when {{subspace}}."}],b=[{id:0,template:"The {{focus}} accounts for {{parameter}} of the {{agg}} {{measure}} when {{subspace}}."},{id:1,template:"The {{focus}} makes up {{parameter}} of the {{agg}} {{measure}} when {{subspace}}."},{id:2,template:"The {{focus}}'s {{agg}} {{measure}} takes {{parameter}} of the {{agg}} {{measure}} when {{subspace}}."}],v=[{id:0,template:"In the {{agg}} {{measure}} ranking of different {{groupby}}s,  the top three {{groupby}}s are {{no.1}}, {{no.2}}, {{no.3}}, when {{subspace}}."},{id:1,template:"The ranking list of the {{groupby}}s ordered by their {{agg}} {{measure}} when {{subspace}}, in which the top three {{groupby}}s are {{no.1}}, {{no.2}}, {{no.3}}."},{id:2,template:"When sorting the {{groupby}}s in order based on their {{agg}} {{measure}}, the top three {{groupby}}s are {{no.1}}, {{no.2}}, {{no.3}} when {{subspace}}."}],y=[{id:0,template:"The trend of the {{agg}} {{measure}} over {{groupby}}s is {{parameter}} when {{subspace}} and the value of {{focus}} needs to pay attention."},{id:1,template:"The {{agg}} {{measure}} over {{groupby}}s shows a/an {{parameter}} trend when {{subspace}} and the value of {{focus}} needs to pay attention."},{id:2,template:"The {{agg}} {{measure}} over {{groupby}}s is {{parameter}} when {{subspace}} and the value of {{focus}} needs to pay attention."}],w=[{id:0,template:"The {{agg}} {{measure}} is {{parameter}} when {{subspace}}."},{id:1,template:"When {{subspace}}, the value of the {{agg}} {{measure}} is {{parameter}}."},{id:2,template:"The {{agg}} {{measure}} value is {{parameter}} when {{subspace}}."}],E=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,t=[];switch(e){case p.a.ASSOCIATION:t=l;break;case p.a.CATEGORIZATION:t=m;break;case p.a.DIFFERENCE:t=h;break;case p.a.DISTRIBUTION:t=d;break;case p.a.EXTREME:t=f;break;case p.a.OUTLIER:t=g;break;case p.a.PROPORTION:t=b;break;case p.a.RANK:t=v;break;case p.a.TREND:t=y;break;case p.a.VALUE:t=w}-1===a&&(a=Math.floor(10*Math.random())%3);var r="";try{r=t[a].template}catch(s){console.error(s),console.log("wrong id:"+a)}return r},N=t(236),T={SUM:"sum",MAX:"max",MIN:"min",AVG:"avg",COUNT:"count"},C=t(185),k=t.n(C),O=t(320),R=function(e){switch(e){case T.SUM:return"total";case T.MAX:return"maximum";case T.MIN:return"minimum";case T.AVG:return"average";case T.COUNT:return"count";case T.NONE:default:return""}},x=function(e){return"count"===e.aggregate?"":e.field.toLowerCase()},A=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single",t=e[0];if("single"===a)return t.toLowerCase();if("plural"===a){if(-1===t.indexOf(" of "))return O(t,2).toLowerCase();var r=t.split(" "),s=r.indexOf("of")-1;if(s>-1){var n=O(r[s],2);return t.replace(r[s],n)}}},S=function(e){var a=0,t="",r="";(e=(e||0).toString()).indexOf(".")>0?(a=(e=e.toFixed(2)).indexOf("."),t=e.substr(a),r=e.substring(0,a)):r=e;for(var s=[],n=0,i=(r=r.split("")).length-1;i>=0;i--)n++,s.unshift(r[i]),n%3||0===i||s.unshift(",");return s.join("")+t||""},I=function(e,a){var t="";return e.subspace.length?(e.subspace.map((function(e,a){return t+="".concat(0===a?" ":" and ","the ").concat(e.field," is ").concat(e.value)})),a=a.replace("{{subspace}}",t)):a=(a=(a=(a=(a=(a=(a=a.replace(", when {{subspace}}","")).replace(" when {{subspace}}","")).replace(" in case of {{subspace}}","")).replace(" given {{subspace}}","")).replace("When {{subspace}}, ","")).replace("Given {{subspace}}, ","")).replace("In case of {{subspace}}, ",""),a},z=t(54),U=function(e,a){if(-1===e.indexOf(a))return e;var t=e.indexOf(a)+a.length;"s"===e.substring(t,t+1)&&(t+=1);var r=e.indexOf(a),s=e.substring(0,t)+"</i></span>"+e.substring(t);return s=s.substring(0,r)+'<span class="hightlight"><i>'+s.substring(r)},D=function(e){if(!Object(N.b)(e))return"";var a,t,r=e.generatedScript;switch(e.type){case p.a.ASSOCIATION:t=r;break;case p.a.RANK:var s=e.parameter[0],n=e.parameter[1],i=e.parameter[2];t=U(r,s),n&&(t=U(t,n)),n&&i&&(t=U(t,i));break;case p.a.VALUE:case p.a.DIFFERENCE:t=U(r,e.measure[0].field.toLowerCase()),t=U(t,S(e.parameter));break;case p.a.RANK:t=U(r,"decreasing");break;case p.a.OUTLIER:t=r;break;case p.a.EXTREME:case p.a.OUTLIER:t=U(r,"maximum"),e.parameter[1]&&(t=U(t,S(e.parameter[1])));break;case p.a.DISTRIBUTION:t=r;break;case p.a.CATEGORIZATION:a=e.parameter.length.toString(),t=U(r,a);break;default:a=e.parameter,t=U(r,a)}return t},L=t(154),F=(t(119),new Map),M=new Map,j=function(e){Object(i.a)(t,e);var a=Object(o.a)(t);function t(e){var n;return Object(s.a)(this,t),(n=a.call(this,e)).renderLayout=null,n.computeSizeAndRenderCharts=function(){var e=k.a.cloneDeep(n.state.facts).map((function(e,a){if(!M.get(e.id))return e;var t=M.get(e.id).current,r=0,s=0,i=0;if(t&&(i=t.clientHeight),n.renderLayout&&n.renderLayout[a]){var o=n.renderLayout[a],c=o.x0,u=o.x1,p=o.y0;r=u-c,s=o.y1-p-i}return 0===r||0===s||(e.width=r,e.height=s,e.captionH=i,0===a&&(e.preContainerSize=n.props.containerSize)),e}));n.setState({facts:e},(function(){n.renderCharts()}))},n.renderCharts=function(){setTimeout((function(){n.batchUpdateSvg()}),1e3)},n.batchUpdateSvg=function(){k.a.cloneDeep(n.state.facts).map((function(e){if(!F.get(e.id))return e;var a=F.get(e.id).current;return a&&n.updateSvg(a,e.width,e.height),e}))},n.updateSvg=function(e,a,t){if(e){var r=t-15,s=Math.min(a,r)/640,i=e.children&&e.children[0];i&&(i.setAttribute("style","transform:scale(".concat(.9*s,');visibility:"visible"')),i.onmouseenter=function(){i.setAttribute("style","transform:scale(".concat(.9*s,");border:").concat(n.props.isEdit?"1px dashed grey":" "," "))},i.onmouseleave=function(){i.setAttribute("style","transform:scale(".concat(.9*s,")"))})}},n._renderedFacts=function(e){var a=n.state,t=a.renderNum,r=a.count;return e.slice(0,t>=r?r:t)},n.weightAdapter=function(e,a){var t=e.children.length,s=[];switch(a){case 1:s=[1],2===t?s=[3,2]:3===t&&(s=[3,1.2,.8]);break;case 2:s=[1],2===t?s=[4,3]:3===t&&(s=[6,3,2]);break;case 3:s=[1],2===t?s=[3,2]:3===t&&(s=[3,1.2,.8]);break;case 4:s=[1],2===t?s=[3,2]:3===t&&(s=[4,3,2])}return{children:e.children.map((function(e,a){return Object(r.a)(Object(r.a)({},e),{},{significance:s[a]})}))}},n.change=function(e){n.setState({renderNum:e.target.value})},n.getTreemap=function(e,a,t){return L.treemap().tile(L.treemapResquarify.ratio(1)).size([e,a]).padding(3).round(!0)(L.hierarchy(t).sum((function(e){return e.significance})))},n.sort=function(e){return e.sort((function(e,a){return a.significance-e.significance}))},n.setRef=function(e){return F.set(e,u.a.createRef()),F.get(e)},n.setCaptionRef=function(e){return M.set(e,u.a.createRef()),M.get(e)},n.endEdit=function(e,a){var t=M.get(e).current,r=n.props,s=r.cachedQA,i=r.QAID,o=k.a.cloneDeep(s);o[i].facts[a].script=t.innerHTML,n.props.saveCachedDecomposedQA(o)},n.deleteCard=function(e){var a=n.props,t=a.cachedQA,r=a.QAID,s=k.a.cloneDeep(t),i=r;s[i]&&s[i].facts.splice(e,1),s[i]&&0===s[i].facts.length&&s.splice(i,1),n.props.saveCachedDecomposedQA(s)},n.state={renderNum:5,count:5,clientWidth:0,clientHeight:0,facts:n.props.facts,containerSize:n.props.containerSize},n}return Object(n.a)(t,[{key:"componentDidMount",value:function(){this.computeSizeAndRenderCharts()}},{key:"componentWillReceiveProps",value:function(e){var a=this,t=e.containerSize.width,r=e.containerSize.height,s=this.state.containerSize,n=s.width,i=s.height;t===n&&r===i||this.setState({containerSize:{width:t,height:r}}),e.isUpdateLayout&&this.setState({facts:e.facts},(function(){a.computeSizeAndRenderCharts()}))}},{key:"componentDidUpdate",value:function(){var e=this,a=this.state.containerSize,t=a.width,r=a.height,s=this.state.facts[0].preContainerSize;if(s&&(s.width!==t||s.height!==r)){var n=k.a.cloneDeep(this.state.facts);n[0].preContainerSize=this.state.containerSize,this.setState({facts:n},(function(){e.computeSizeAndRenderCharts()}))}this.props.isEdit&&this.renderCharts()}},{key:"render",value:function(){var e=this,a=this.props,t=a.columnNum,r=a.isEdit,s=(a.QAID,a.schema),n=a.data,i=this.state.containerSize,o=this.state.facts,c={children:this._renderedFacts(this.sort(o))},l=i.width,m=i.height;return this.renderLayout=this.getTreemap(l,m,this.weightAdapter(c,t)).leaves(),u.a.createElement("div",{className:"inner-auto-layout"},this.renderLayout&&this.renderLayout.map((function(a,t){var i=a.data,o=a.x0,c=a.x1,l=a.y0,m=a.y1,h=i.script?i.script:function(e){if(!Object(N.b)(e))return"";var a=k.a.cloneDeep(e),t=E(a.type),r=T.NONE;switch(a.measure.length>0&&(r=a.measure[0].aggregate),a.type){case p.a.ASSOCIATION:t=(t=(t=(t=t.replace("{{measure1}}",x(a.measure[0]))).replace("{{measure2}}",x(a.measure[1]))).replace("{{agg1}}",R(a.measure[0].aggregate))).replace("{{agg2}}",R(a.measure[1].aggregate)),t=I(a,t),""!==a.parameter&&(t=t.replace("{{parameter}}",S(Number.parseFloat(a.parameter).toFixed(3))));break;case p.a.CATEGORIZATION:if(t=(t=t.replace("{{groupby}}s",A(a.groupby,"plural"))).replace("{{groupby}}s",A(a.groupby,"plural")),t=I(a,t),a.parameter.length){t=t.replace("{{parameter}}",S(a.parameter.length));var s="";a.parameter.forEach((function(e,a){s+="".concat(0===a?"":","," ").concat(e)})),t=t.replace("{{no.1}}, {{no.2}}, {{no.3}}",s)}if(a.focus.length)if(t.indexOf(". {{focus}}")>-1){var n=a.focus[0].value.slice(0,1).toUpperCase()+a.focus[0].value.slice(1);t=t.replace("{{focus}}",n)}else t=t.replace("{{focus}}",a.focus[0].value);else t=(t=(t=t.replace(", and {{focus}} needs to pay attention","")).replace(", among which {{focus}} needs to pay attention","")).replace(". {{focus}} needs to pay attention","");break;case p.a.DIFFERENCE:t=(t=t.replace("{{measure}}",x(a.measure[0]))).replace("{{agg}}",R(r)),a.focus.length>=2&&(t=(t=t.replace("{{focus1}}",a.focus[0].value)).replace("{{focus2}}",a.focus[1].value)),t=I(a,t),""!==a.parameter&&(t=t.replace("{{parameter}}",S(a.parameter)));break;case p.a.DISTRIBUTION:t=(t=(t=(t=(t=t.replace("{{measure}}",x(a.measure[0]))).replace("{{measure}}",x(a.measure[0]))).replace("{{agg}}",R(r))).replace("{{groupby}}s",A(a.groupby,"plural"))).replace("{{groupby}}",A(a.groupby)),t=I(a,t),t=a.focus.length?t.replace("{{focus}}",a.focus[0].value):t.replace(" and {{focus}} needs to pay attention","");break;case p.a.EXTREME:t=(t=(t=(t=(t=t.replace("{{measure}}",x(a.measure[0]))).replace("{{agg}}",R(r))).replace("{{groupby}}s",A(a.groupby,"plural"))).replace("{{groupby}}",A(a.groupby))).replace("{{groupby}}",A(a.groupby)),t=I(a,t),a.focus.length&&(void 0!==a.focus[0].extremeFocus&&void 0!==a.focus[0].extremeValue?t=(t=(t="min"===a.focus[0].extremeFocus?t.replace("{{focus}}","minimum"):t.replace("{{focus}}","maximum")).replace("{{parameter[0]}}",a.focus[0].value)).replace("{{parameter[1]}}",S(Math.round(100*a.parameter[1])/100)):a.parameter.length&&(t=(t=(t="min"===a.parameter[0]?t.replace("{{focus}}","minimum"):t.replace("{{focus}}","maximum")).replace("{{parameter[0]}}",a.focus[0].value)).replace("{{parameter[1]}}",S(a.parameter[1]))));break;case p.a.OUTLIER:t=(t=(t=(t=t.replace("{{measure}}",x(a.measure[0]))).replace("{{measure}}",x(a.measure[0]))).replace("{{groupby}}s",A(a.groupby,"plural"))).replace("{{agg}}",R(r)),t=I(a,t),a.focus.length&&(t=t.replace("{{focus}}",a.focus[0].value));break;case p.a.PROPORTION:t=(t=(t=(t=t.replace("{{measure}}",x(a.measure[0]))).replace("{{agg}}",R(r))).replace("{{measure}}",x(a.measure[0]))).replace("{{agg}}",R(r)),t=I(a,t),a.focus.length&&(t=t.replace("{{focus}}",a.focus[0].value)),a.parameter&&(t=t.replace("{{parameter}}",a.parameter));break;case p.a.RANK:t=(t=(t=(t=t.replace("{{measure}}",x(a.measure[0]))).replace("{{agg}}",R(r))).replace("{{groupby}}s",A(a.groupby,"plural"))).replace("{{groupby}}s",A(a.groupby,"plural")),t=I(a,t),a.parameter.length>=3?(t=(t=(t=t.replace("{{parameter}}",S(a.parameter.length))).replace("{{no.1}}",a.parameter[0])).replace("{{no.2}}",a.parameter[1]),3===a.parameter.length||a.parameter.length>3?t=t.replace("{{no.3}}",a.parameter[2]):2===a.parameter.length&&(t=t.replace(", {{no.3}}",""))):t="";break;case p.a.TREND:t=(t=(t=t.replace("{{measure}}",x(a.measure[0]))).replace("{{agg}}",R(r))).replace("{{groupby}}s",A(a.groupby,"plural")),t=I(a,t),a.parameter&&(t=t.replace("{{parameter}}",a.parameter),t="increasing"===a.parameter?t.replace("a/an","an"):t.replace("a/an","a")),t=a.focus.length?t.replace("{{focus}}",a.focus[0].value):t.replace(" and the value of {{focus}} needs to pay attention","");break;case p.a.VALUE:t=(t=t.replace("{{measure}}",x(a.measure[0]))).replace("{{agg}}",R(r)),t=I(a,t),a.focus.length&&(t=t.replace("{{focus}}",a.focus[0].value)),""!==a.parameter&&(t=t.replace("{{parameter}}",S(a.parameter)))}return t=t.slice(0,1).toUpperCase()+t.slice(1)}(i)||" ";return i.generatedScript=h,u.a.createElement("div",{style:{position:"absolute",left:o,top:l,width:c-o,height:m-l}},u.a.createElement("div",{className:"chart-card"},r&&u.a.createElement("div",{className:"delete",onClick:function(){return e.deleteCard(t)}}),u.a.createElement("div",{className:"wrapper"},u.a.createElement("div",{className:"vis-box",style:{height:"calc(100% - ".concat(i.captionH,"px)")}},u.a.createElement("div",{className:"bound-box",id:i.id,ref:e.setRef(i.id)},u.a.createElement(z.default,{schema:s,fact:i,data:n}))),u.a.createElement("div",{className:"caption",contentEditable:r,suppressContentEditableWarning:!0,ref:e.setCaptionRef(i.id,t),onBlur:function(){return e.endEdit(i.id,t)},dangerouslySetInnerHTML:{__html:D(i)}}))))})))}}]),t}(c.Component)},57:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return b}));var r=t(21),s=t(15),n=t(16),i=t(17),o=t(18),c=t(0),u=t.n(c),p=t(55),l=(t(392),function(e){Object(i.a)(t,e);var a=Object(o.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(n.a)(t,[{key:"render",value:function(){var e=this.props,a=e.initDone,t=e.intl;return u.a.createElement("div",{className:"ErrorView"},u.a.createElement("div",null),u.a.createElement("p",null,a&&t.get("empty")))}}]),t}(c.PureComponent)),m=t(277),h=t.n(m),d=t(185),f=t.n(d),g=(t(120),new Map),b=function(e){Object(i.a)(t,e);var a=Object(o.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=a.call.apply(a,[this].concat(i))).titleRef=u.a.createRef(),e.debounceTimer=null,e.containerNodes={width:0,height:0},e.onResize=function(){window.addEventListener("resize",(function(){e.debounceTimer&&clearTimeout(debounceTimer),setTimeout((function(){e.forceUpdate()}),1e3)}))},e.setFactId=function(e,a){return f.a.cloneDeep(e).map((function(e){return Object(r.a)(Object(r.a)({},e),{},{id:"".concat(a,"QA").concat(h()())})}))},e.fullscreen=function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},e.reorder=function(e,a){for(var t=a,r=[],s=0;s<t;){for(var n=0;n<e.length;n+=t){var i=e[n+s];void 0!==i&&r.push(i)}s++}return r},e.endEdit=function(a){var t=g.get(a).current;if(t){var r=e.props.cachedQA;r[a]&&(r[a].question=t.innerHTML),e.props.saveCachedDecomposedQA(r)}},e.setSubTitleRef=function(e){return g.set(e,u.a.createRef()),g.get(e)},e.setContainerRef=function(a){if(a){e.containerNodes={width:a.clientWidth,height:a.clientHeight-55}}},e.endTitleEdit=function(){var a=e.titleRef.current;if(a){var t=a.innerHTML;t!==e.props.editedTitle&&e.props.editTitle(t)}},e.export=function(){window.print()},e.getTitle=function(){var a=e.props,t=a.askedQuestion,r=a.editedTitle,s=r||t;return s.slice(0,1).toUpperCase()+s.slice(1)},e.isCanGetSize=function(){return e.preContainerNodes={width:0,height:0},!(!e.containerNodes||0===e.containerNodes.width||0===e.containerNodes.height)&&(e.preContainerNodes=f.a.cloneDeep(e.containerNodes),!0)},e}return Object(n.a)(t,[{key:"componentDidMount",value:function(){this.onResize()}},{key:"componentDidUpdate",value:function(){this.preContainerNodes&&this.containerNodes&&(this.preContainerNodes.width===this.containerNodes.width&&this.preContainerNodes.height===this.containerNodes.height||this.forceUpdate())}},{key:"render",value:function(){var e=this,a=this.props,t=a.initDone,r=a.intl,s=a.isEdit,n=a.decomposedQA,i=a.loading,o=a.isUpdateLayout;if(!n)return null;var c=function(){return u.a.createElement("div",{className:"title"},u.a.createElement("h1",{contentEditable:s,title:e.getTitle(),suppressContentEditableWarning:!0,onBlur:function(){return e.endTitleEdit()},ref:e.titleRef},"".concat(e.getTitle()||t&&r.get("inputHint"))),u.a.createElement("div",{className:"fullscreen_icon",onClick:e.fullscreen}),u.a.createElement("div",{className:"export_icon",onClick:e.export}))},m=function(a){var t=a.index,r=a.subQustion,s=a.isEdit,n=r.slice(0,1).toUpperCase()+r.slice(1);return u.a.createElement("div",{className:"sub-title-box"},u.a.createElement("div",{className:"right-box"},u.a.createElement("div",{className:n===e.getTitle()?"right-top hightlight":"right-top default"})),u.a.createElement("div",{className:"sub-title",style:{borderColor:n===e.getTitle()?"#F19C0F":"#A1AEB9"}},u.a.createElement("div",{className:n===e.getTitle()?"index hightlight":"index default"},t+1),u.a.createElement("h1",{contentEditable:s,suppressContentEditableWarning:!0,title:"".concat(n),onBlur:function(){return e.endEdit(t)},ref:e.setSubTitleRef(t)},"".concat(n))))},h=4===n.length?2:n.length;return u.a.createElement("div",{className:"large-size-screen"},u.a.createElement(c,this.props),u.a.createElement("div",{className:"auto-layout",style:{columnCount:h}},u.a.createElement("div",{className:"dec1"}),u.a.createElement("div",{className:"dec2"}),n.length>0?this.reorder(n,h).map((function(a,t){return u.a.createElement("div",{className:"subView",key:a.id,style:{height:4===n.length?"calc(50% - 15px)":"100%",width:"100%"},ref:function(a){return e.setContainerRef(a)}},u.a.createElement("div",{className:"d1"}),u.a.createElement("div",{className:"d2"}),n.length>1&&u.a.createElement(m,{index:a.id,subQustion:a.question,isEdit:s}),e.isCanGetSize()?u.a.createElement(p.default,Object.assign({QAID:t,containerSize:e.containerNodes,facts:e.setFactId(a.facts,t),columnNum:n.length,isUpdateLayout:o},e.props)):null)})):!i&&u.a.createElement(l,{initDone:r,intl:r})))}}]),t}(c.Component)}}]);
//# sourceMappingURL=28.ae95661f.chunk.js.map