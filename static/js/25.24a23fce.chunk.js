(this.webpackJsonptalk2data=this.webpackJsonptalk2data||[]).push([[25,19,58,59,60],{116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},142:function(e,t,a){"use strict";var r=a(188),n=Object.prototype.toString;function s(e){return"[object Array]"===n.call(e)}function o(e){return"undefined"===typeof e}function i(e){return null!==e&&"object"===typeof e}function c(e){if("[object Object]"!==n.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===n.call(e)}function l(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),s(e))for(var a=0,r=e.length;a<r;a++)t.call(null,e[a],a,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===n.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:i,isPlainObject:c,isUndefined:o,isDate:function(e){return"[object Date]"===n.call(e)},isFile:function(e){return"[object File]"===n.call(e)},isBlob:function(e){return"[object Blob]"===n.call(e)},isFunction:u,isStream:function(e){return i(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:l,merge:function e(){var t={};function a(a,r){c(t[r])&&c(a)?t[r]=e(t[r],a):c(a)?t[r]=e({},a):s(a)?t[r]=a.slice():t[r]=a}for(var r=0,n=arguments.length;r<n;r++)l(arguments[r],a);return t},extend:function(e,t,a){return l(t,(function(t,n){e[n]=a&&"function"===typeof t?r(t,a):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},162:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return s}));var r=a(0),n=r.isValidElement;function s(e,t){return function(e,t,a){return n(e)?r.cloneElement(e,"function"===typeof a?a(e.props||{}):a):t}(e,e,t)}},176:function(e,t,a){"use strict";var r="https://".concat("talk-api.idvxlab.com:8006"),n="https://".concat("talk-api.idvxlab.com:8006"),s={url:{uploadPrefix:r,uploadData:"".concat(r,"/upload"),share:"".concat(r,"/share"),fetch:"".concat(r,"/data/share"),factScoring:"".concat(n,"/fact"),generate:"".concat(n,"/generate"),candidateQuestions:"https://".concat("talk-api.idvxlab.com:8006","/column2questions")}};t.a=s},184:function(e,t,a){"use strict";t.a={VALUE:"value",TREND:"trend",CATEGORIZATION:"categorization",DIFFERENCE:"difference",PROPORTION:"proportion",DISTRIBUTION:"distribution",RANK:"rank",ASSOCIATION:"association",EXTREME:"extreme",OUTLIER:"outlier"}},187:function(e,t,a){"use strict";t.a={JUXTAPOSITION:"juxtaposition",AREA_CHART:"Area Chart",VERTICAL_BAR_CHART:"Vertical Bar Chart",VERTICAL_DIFFERENCE_BAR_CHART:"Vertical Difference Bar Chart",VERTICAL_DIFFERENCE_ARROW_CHART:"Vertical Difference Arrow Chart",HORIZONTAL_BAR_CHART:"Horizontal Bar Chart",PROGRESS_BAR_CHART:"Progress Bar Chart",STACKED_BAR_CHART:"Stacked Bar Chart",ISOTYPE_BAR_CHART:"Isotype Bar Chart",PROPORTION_ISOTYPE_CHART:"Proportion Isotype Chart",COLOR_FILLING_MAP:"Color Filling Map",BUBBLE_CHART:"Bubble Chart",TEXT_CHART:"Text Chart",LINE_CHART:"Line Chart",STACKED_LINE_CHART:"Stacked Line Chart",RING_CHART:"Ring Chart",HALF_RING_CHART:"Half Ring Chart",PIE_CHART:"Pie Chart",SCATTER_PLOT:"Scatter Plot",TREE_MAP:"Treemap",BUBBLE_MAP:"Bubblemap"}},188:function(e,t,a){"use strict";e.exports=function(e,t){return function(){for(var a=new Array(arguments.length),r=0;r<a.length;r++)a[r]=arguments[r];return e.apply(t,a)}}},189:function(e,t,a){"use strict";var r=a(142);function n(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,a){if(!t)return e;var s;if(a)s=a(t);else if(r.isURLSearchParams(t))s=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(n(t)+"="+n(e))})))})),s=o.join("&")}if(s){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},190:function(e,t,a){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},191:function(e,t,a){"use strict";(function(t){var r=a(142),n=a(229),s={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i={adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof t&&"[object process]"===Object.prototype.toString.call(t))&&(e=a(192)),e}(),transformRequest:[function(e,t){return n(t,"Accept"),n(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){i.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){i.headers[e]=r.merge(s)})),e.exports=i}).call(this,a(206))},192:function(e,t,a){"use strict";var r=a(142),n=a(230),s=a(232),o=a(189),i=a(233),c=a(236),u=a(237),l=a(193);e.exports=function(e){return new Promise((function(t,a){var p=e.data,f=e.headers;r.isFormData(p)&&delete f["Content-Type"],(r.isBlob(p)||r.isFile(p))&&p.type&&delete f["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",m=unescape(encodeURIComponent(e.auth.password))||"";f.Authorization="Basic "+btoa(d+":"+m)}var g=i(e.baseURL,e.url);if(h.open(e.method.toUpperCase(),o(g,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in h?c(h.getAllResponseHeaders()):null,s={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:r,config:e,request:h};n(t,a,s),h=null}},h.onabort=function(){h&&(a(l("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){a(l("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),a(l(t,e,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var b=(e.withCredentials||u(g))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;b&&(f[e.xsrfHeaderName]=b)}if("setRequestHeader"in h&&r.forEach(f,(function(e,t){"undefined"===typeof p&&"content-type"===t.toLowerCase()?delete f[t]:h.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),e.responseType)try{h.responseType=e.responseType}catch(A){if("json"!==e.responseType)throw A}"function"===typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),a(e),h=null)})),p||(p=null),h.send(p)}))}},193:function(e,t,a){"use strict";var r=a(231);e.exports=function(e,t,a,n,s){var o=new Error(e);return r(o,t,a,n,s)}},194:function(e,t,a){"use strict";var r=a(142);e.exports=function(e,t){t=t||{};var a={},n=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],i=["validateStatus"];function c(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function u(n){r.isUndefined(t[n])?r.isUndefined(e[n])||(a[n]=c(void 0,e[n])):a[n]=c(e[n],t[n])}r.forEach(n,(function(e){r.isUndefined(t[e])||(a[e]=c(void 0,t[e]))})),r.forEach(s,u),r.forEach(o,(function(n){r.isUndefined(t[n])?r.isUndefined(e[n])||(a[n]=c(void 0,e[n])):a[n]=c(void 0,t[n])})),r.forEach(i,(function(r){r in t?a[r]=c(e[r],t[r]):r in e&&(a[r]=c(void 0,e[r]))}));var l=n.concat(s).concat(o).concat(i),p=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return r.forEach(p,u),a}},195:function(e,t,a){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},196:function(e,t,a){"use strict";a.d(t,"d",(function(){return u})),a.d(t,"a",(function(){return p})),a.d(t,"c",(function(){return f})),a.d(t,"b",(function(){return h}));var r=a(156),n=a.n(r),s=a(172),o=a(176),i=a(222),c=a.n(i);function u(e){return l.apply(this,arguments)}function l(){return(l=Object(s.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){c()({method:"post",url:"".concat(o.a.url.uploadData),config:{headers:{"Content-Type":"multipart/form-data"}},data:t}).then((function(t){t.status>=400?a():200===t.status||201===t.status||204===t.status?e(t.data):a()})).catch((function(e){a()}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return c()({method:"post",url:"".concat(o.a.url.generate),config:{headers:{"Content-Type":"application/json; charset=utf-8"}},data:e})}function f(e){return c()({method:"post",url:"".concat(o.a.url.candidateQuestions),config:{headers:{"Content-Type":"application/json; charset=utf-8"}},data:e})}function h(e){return c()({method:"post",url:"/generatePDF",param:{},data:e})}},199:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t}},207:function(e,t,a){"use strict";t.a={NUMERICAL:"numerical",CATEGORICAL:"categorical",TEMPORAL:"temporal",GEOGRAPHICAL:"geographical"}},222:function(e,t,a){e.exports=a(224)},224:function(e,t,a){"use strict";var r=a(142),n=a(188),s=a(225),o=a(194);function i(e){var t=new s(e),a=n(s.prototype.request,t);return r.extend(a,s.prototype,t),r.extend(a,t),a}var c=i(a(191));c.Axios=s,c.create=function(e){return i(o(c.defaults,e))},c.Cancel=a(195),c.CancelToken=a(238),c.isCancel=a(190),c.all=function(e){return Promise.all(e)},c.spread=a(239),e.exports=c,e.exports.default=c},225:function(e,t,a){"use strict";var r=a(142),n=a(189),s=a(226),o=a(227),i=a(194);function c(e){this.defaults=e,this.interceptors={request:new s,response:new s}}c.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=i(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[o,void 0],a=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)a=a.then(t.shift(),t.shift());return a},c.prototype.getUri=function(e){return e=i(this.defaults,e),n(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,a){return this.request(i(a||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,a,r){return this.request(i(r||{},{method:e,url:t,data:a}))}})),e.exports=c},226:function(e,t,a){"use strict";var r=a(142);function n(){this.handlers=[]}n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=n},227:function(e,t,a){"use strict";var r=a(142),n=a(228),s=a(190),o=a(191);function i(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return i(e),e.headers=e.headers||{},e.data=n(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return i(e),t.data=n(t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(i(e),t&&t.response&&(t.response.data=n(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},228:function(e,t,a){"use strict";var r=a(142);e.exports=function(e,t,a){return r.forEach(a,(function(a){e=a(e,t)})),e}},229:function(e,t,a){"use strict";var r=a(142);e.exports=function(e,t){r.forEach(e,(function(a,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=a,delete e[r])}))}},230:function(e,t,a){"use strict";var r=a(193);e.exports=function(e,t,a){var n=a.config.validateStatus;a.status&&n&&!n(a.status)?t(r("Request failed with status code "+a.status,a.config,null,a.request,a)):e(a)}},231:function(e,t,a){"use strict";e.exports=function(e,t,a,r,n){return e.config=t,a&&(e.code=a),e.request=r,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},232:function(e,t,a){"use strict";var r=a(142);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,a,n,s,o){var i=[];i.push(e+"="+encodeURIComponent(t)),r.isNumber(a)&&i.push("expires="+new Date(a).toGMTString()),r.isString(n)&&i.push("path="+n),r.isString(s)&&i.push("domain="+s),!0===o&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},233:function(e,t,a){"use strict";var r=a(234),n=a(235);e.exports=function(e,t){return e&&!r(t)?n(e,t):t}},234:function(e,t,a){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},235:function(e,t,a){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},236:function(e,t,a){"use strict";var r=a(142),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,a,s,o={};return e?(r.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=r.trim(e.substr(0,s)).toLowerCase(),a=r.trim(e.substr(s+1)),t){if(o[t]&&n.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([a]):o[t]?o[t]+", "+a:a}})),o):o}},237:function(e,t,a){"use strict";var r=a(142);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a");function n(e){var r=e;return t&&(a.setAttribute("href",r),r=a.href),a.setAttribute("href",r),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:"/"===a.pathname.charAt(0)?a.pathname:"/"+a.pathname}}return e=n(window.location.href),function(t){var a=r.isString(t)?n(t):t;return a.protocol===e.protocol&&a.host===e.host}}():function(){return!0}},238:function(e,t,a){"use strict";var r=a(195);function n(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var a=this;e((function(e){a.reason||(a.reason=new r(e),t(a.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n((function(t){e=t})),cancel:e}},e.exports=n},239:function(e,t,a){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},256:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return l}));var r=a(184),n=a(277),s=function(e,t,a){var r=n.a.filter((function(t){return t.fact===e}));if(t&&(r=r.filter((function(e){return e.chart===t}))),0===r.length)return[];var s=new Set;r.forEach((function(e){e.breakdownType.forEach((function(e){s.add(e)}))}));var o=Array.from(s);return a.filter((function(e){return-1!==o.indexOf(e.type)}))},o=a(138),i=function(e,t){var a,r=e,n=Object(o.a)(t);try{var s=function(){var e=a.value;r=r.filter((function(t){return t[e.field]===e.value}))};for(n.s();!(a=n.n()).done;)s()}catch(i){n.e(i)}finally{n.f()}return r},c=a(151),u=function(e){var t=!1;switch(e.type){case r.a.ASSOCIATION:2===e.measure.length&&(t=!0);break;case r.a.CATEGORIZATION:e.groupby.length&&(t=!0);break;case r.a.DIFFERENCE:e.measure.length&&e.groupby.length&&e.focus.length>=2&&(t=!0);break;case r.a.DISTRIBUTION:e.measure.length&&e.groupby.length&&(t=!0);break;case r.a.EXTREME:case r.a.OUTLIER:case r.a.PROPORTION:e.measure.length&&e.groupby.length&&e.focus.length&&(t=!0);break;case r.a.RANK:case r.a.TREND:e.measure.length&&e.groupby.length&&(t=!0);break;case r.a.VALUE:e.measure.length&&(t=!0)}return t},l=function(e,t,a){var n=Object.assign({},e);switch(e.type){case r.a.ASSOCIATION:if(n.focus=[],t&&a){var o=s(e.type,e.chart,t);0===n.groupby.length&&o.length>0&&(n.groupby=[o[0].field]);var c=t.filter((function(e){return"numerical"===e.type}));0===n.measure.length&&c.length>0&&(n.measure=[{field:c[0].field,aggregate:"count"}]),1===n.measure.length&&n.measure.push({field:"COUNT",aggregate:"count"})}break;case r.a.CATEGORIZATION:if(n.measure=[],n.focus=[],t&&a){var u=s(e.type,e.chart,t);0===n.groupby.length&&u.length>0&&(n.groupby=[u[0].field])}break;case r.a.DIFFERENCE:if(t&&a){var l=s(e.type,e.chart,t),p=h(a,e.groupby);0===n.groupby.length&&l.length>0&&(n.groupby=[l[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}]),n.focus.length||(n.focus=[{field:n.groupby[0],value:p[0]},{field:n.groupby[0],value:p[1]}])}break;case r.a.DISTRIBUTION:if(n.focus=[],t&&a){var d=s(e.type,e.chart,t);0===n.groupby.length&&d.length>0&&(n.groupby=[d[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}])}break;case r.a.EXTREME:if(t&&a){var m=s(e.type,e.chart,t);if(0===n.groupby.length&&m.length>0&&(n.groupby=[m[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}]),n.measure.length&&n.groupby.length){var g={y:{}};g.y.field=n.measure[0].field,g.y.aggregation=n.measure[0].aggregate,g.x={},g.x.field=n.groupby[0];var b=i(a,n.subspace),A=f(b,g),T=n.measure[0].field,R=A.reduce((function(e,t){return e[T]>t[T]?e:t}));n.focus.length||(n.focus=[{field:n.groupby[0],value:R[n.groupby[0]],extremeFocus:"max",extremeValue:R[n.measure[0].field]}])}}break;case r.a.OUTLIER:if(t&&a){var y=s(e.type,e.chart,t);if(0===n.groupby.length&&y.length>0&&(n.groupby=[y[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}]),n.measure.length&&n.groupby.length){var v={y:{}};v.y.field=n.measure[0].field,v.y.aggregation=n.measure[0].aggregate,v.x={},v.x.field=n.groupby[0];var E=i(a,n.subspace),O=f(E,v),C=O.sort((function(e,t){return t[v.y.field]-e[v.y.field]})).map((function(e){return e[v.x.field]})),w=O.sort((function(e,t){return t[v.y.field]-e[v.y.field]})).map((function(e){return e[v.y.field]})),I=w.length,N=parseInt(.25*(I-1)),L=parseInt(.75*(I-1)),k=.25*(I-1)-N,x=.75*(I-1)-L,_=w[N]+(w[N+1]-w[N])*k,S=w[L]+(w[L+1]-w[L])*x,P=S-1.5*(_-S),H=_+1.5*(_-S),B=[];w.forEach((function(e,t){(e>H||e<P)&&B.push(t)})),!n.focus.length&&B.length&&(n.focus=[{field:e.groupby[0],value:C[B[0]]}])}}break;case r.a.PROPORTION:if(t&&a){var U=s(e.type,e.chart,t);if(0===n.groupby.length&&U.length>0&&(n.groupby=[U[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}]),n.measure.length&&n.groupby.length){var j={y:{}};j.y.field=n.measure[0].field,j.y.aggregation=n.measure[0].aggregate,j.x={},j.x.field=n.groupby[0];var G=i(a,n.subspace),D=f(G,j),M=n.measure[0].field,F=D.reduce((function(e,t){return e[M]>t[M]?e:t}));n.focus.length||(n.focus=[{field:n.groupby[0],value:F[n.groupby[0]]}])}}break;case r.a.RANK:if(n.focus=[],t&&a){var V=s(n.type,n.chart,t);0===n.groupby.length&&V.length>0&&(n.groupby=[V[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}])}break;case r.a.TREND:if(n.focus=[],t&&a){var q=t.filter((function(e){return"temporal"===e.type})),z=q.map((function(e){return e.field}));0===q.length?n.groupby=[]:0!==n.groupby.length&&-1!==z.indexOf(n.groupby[0])||(n.groupby=[q[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}])}break;case r.a.VALUE:n.groupby=[],n.focus=[],t&&a&&0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}])}return n},p=function(e,t){return c.nest().key((function(e){return e[t.x.field]})).entries(e).map((function(e,a){var r=c.scan(e.values,(function(e,a){if(e[t.y.field]&&a[t.y.field])return a[t.y.field]-e[t.y.field]}));return r>=0?e.values[r]:e.values[0]}))},f=function(e,t){var a;switch(t.y.aggregation){case"sum":a=function(e,t){var a=c.nest().key((function(e){return e[t.x.field]})).entries(e),r=new Array(a.length).fill(0);return a.map((function(e,a){e.values.forEach((function(e){r[a]+=e[t.y.field]}));var n=Object.assign({},e.values[0]);return n[t.y.field]=r[a],n}))}(e,t);break;case"avg":a=function(e,t){var a=c.nest().key((function(e){return e[t.x.field]})).entries(e),r=new Array(a.length).fill(0);return a.map((function(e,a){e.values.forEach((function(e){r[a]+=e[t.y.field]}));var n=Object.assign({},e.values[0]);return n[t.y.field]=r[a]/e.values.length,n}))}(e,t);break;case"max":a=p(e,t);break;case"min":a=function(e,t){return c.nest().key((function(e){return e[t.x.field]})).entries(e).map((function(e){var a=c.scan(e.values,(function(e,a){if(e[t.y.field]&&a[t.y.field])return e[t.y.field]-a[t.y.field]}));return a>=0?e.values[a]:e.values[0]}))}(e,t);break;case"count":a=function(e,t){var a=c.nest().key((function(e){return e[t.x.field]})).entries(e),r=new Array(a.length).fill(0);return a.map((function(e,t){e.values.forEach((function(){r[t]+=1}));var a=Object.assign({},e.values[0]);return a.COUNT=r[t],a}))}(e,t);break;default:a=p(e,t)}return a},h=function(e,t){return t?Array.from(new Set(e.map((function(e){return e[t]})))):[]}},277:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a(184),n=a(187),s=a(207),o=[{fact:r.a.ASSOCIATION,chart:n.a.SCATTER_PLOT,breakdownType:[s.a.CATEGORICAL,s.a.TEMPORAL,s.a.GEOGRAPHICAL]},{fact:r.a.OUTLIER,chart:n.a.VERTICAL_BAR_CHART,breakdownType:[s.a.CATEGORICAL,s.a.TEMPORAL,s.a.GEOGRAPHICAL]},{fact:r.a.OUTLIER,chart:n.a.AREA_CHART,breakdownType:[s.a.TEMPORAL]},{fact:r.a.OUTLIER,chart:n.a.LINE_CHART,breakdownType:[s.a.TEMPORAL]},{fact:r.a.EXTREME,chart:n.a.VERTICAL_BAR_CHART,breakdownType:[s.a.CATEGORICAL,s.a.TEMPORAL,s.a.GEOGRAPHICAL]},{fact:r.a.EXTREME,chart:n.a.LINE_CHART,breakdownType:[s.a.TEMPORAL]},{fact:r.a.EXTREME,chart:n.a.AREA_CHART,breakdownType:[s.a.TEMPORAL]},{fact:r.a.PROPORTION,chart:n.a.PROGRESS_BAR_CHART,breakdownType:[s.a.CATEGORICAL,s.a.GEOGRAPHICAL,s.a.TEMPORAL]},{fact:r.a.PROPORTION,chart:n.a.PIE_CHART,breakdownType:[s.a.CATEGORICAL,s.a.GEOGRAPHICAL,s.a.TEMPORAL]},{fact:r.a.RANK,chart:n.a.HORIZONTAL_BAR_CHART,breakdownType:[s.a.CATEGORICAL,s.a.GEOGRAPHICAL,s.a.TEMPORAL]},{fact:r.a.DISTRIBUTION,chart:n.a.AREA_CHART,breakdownType:[s.a.TEMPORAL]},{fact:r.a.DISTRIBUTION,chart:n.a.VERTICAL_BAR_CHART,breakdownType:[s.a.CATEGORICAL,s.a.GEOGRAPHICAL]},{fact:r.a.DIFFERENCE,chart:n.a.HORIZONTAL_BAR_CHART,breakdownType:[s.a.CATEGORICAL,s.a.GEOGRAPHICAL,s.a.TEMPORAL]},{fact:r.a.CATEGORIZATION,chart:n.a.VERTICAL_BAR_CHART,breakdownType:[s.a.CATEGORICAL,s.a.GEOGRAPHICAL]},{fact:r.a.TREND,chart:n.a.LINE_CHART,breakdownType:[s.a.TEMPORAL]},{fact:r.a.VALUE,chart:n.a.VERTICAL_BAR_CHART}]},290:function(e,t,a){"use strict";a.d(t,"b",(function(){return v})),a.d(t,"a",(function(){return O}));var r=a(200),n=a(0),s=a.n(n),o=a(187),i=a(184),c=a(207),u=[{fact:i.a.ASSOCIATION,chart:o.a.SCATTER_PLOT,breakdownType:[c.a.CATEGORICAL,c.a.TEMPORAL,c.a.GEOGRAPHICAL]},{fact:i.a.OUTLIER,chart:o.a.AREA_CHART,breakdownType:[c.a.TEMPORAL]},{fact:i.a.OUTLIER,chart:o.a.LINE_CHART,breakdownType:[c.a.TEMPORAL]},{fact:i.a.EXTREME,chart:o.a.VERTICAL_BAR_CHART,breakdownType:[c.a.CATEGORICAL,c.a.CATEGORICAL,c.a.GEOGRAPHICAL]},{fact:i.a.EXTREME,chart:o.a.LINE_CHART,breakdownType:[c.a.TEMPORAL]},{fact:i.a.EXTREME,chart:o.a.AREA_CHART,breakdownType:[c.a.TEMPORAL]},{fact:i.a.PROPORTION,chart:o.a.PROGRESS_BAR_CHART,breakdownType:[c.a.CATEGORICAL,c.a.GEOGRAPHICAL]},{fact:i.a.PROPORTION,chart:o.a.PIE_CHART,breakdownType:[c.a.CATEGORICAL,c.a.GEOGRAPHICAL]},{fact:i.a.RANK,chart:o.a.HORIZONTAL_BAR_CHART,breakdownType:[c.a.CATEGORICAL,c.a.GEOGRAPHICAL]},{fact:i.a.DISTRIBUTION,chart:o.a.AREA_CHART,breakdownType:[c.a.TEMPORAL]},{fact:i.a.DISTRIBUTION,chart:o.a.VERTICAL_BAR_CHART,breakdownType:[c.a.CATEGORICAL,c.a.GEOGRAPHICAL]},{fact:i.a.DIFFERENCE,chart:o.a.HORIZONTAL_BAR_CHART,breakdownType:[c.a.CATEGORICAL,c.a.GEOGRAPHICAL,c.a.TEMPORAL]},{fact:i.a.CATEGORIZATION,chart:o.a.VERTICAL_BAR_CHART,breakdownType:[c.a.CATEGORICAL,c.a.GEOGRAPHICAL]},{fact:i.a.TREND,chart:o.a.LINE_CHART,breakdownType:[c.a.TEMPORAL]},{fact:i.a.VALUE,chart:o.a.VERTICAL_BAR_CHART}],l=a(277),p=function e(t,a){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=a.filter((function(e){return e.field===t.groupby[0]}))[0],o=n?l.a:u;return r=o.filter((function(e){return e.fact===t.type})),s&&(r=r.filter((function(e){return-1!==e.breakdownType.indexOf(s.type)})),s.type===c.a.CATEGORICAL&&s.values&&(r=r.filter((function(e){return!e.rang||s.values.length>=e.rang[0]&&s.values.length<=e.rang[1]}))),0!==r.length||n||(r=e(t,a,!0))),r},f=a(15),h=a(16),d=a(17),m=a(18),g=a(474),b=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.spec.chart.id,t=this.props.spec,a=e?"#vischart_".concat(e):"#demo-chart";this.autovis=new g.AutoVis,this.autovis=new g.AutoVis,this.autovis.container(a),this.autovis.load(t),this.autovis.generate()}},{key:"componentDidUpdate",value:function(e){var t=this.props.spec.chart.id,a=this.props.spec,r=t?"#vischart_".concat(t):"#demo-chart";this.autovis=new g.AutoVis,this.autovis=new g.AutoVis,this.autovis.container(r),this.autovis.load(a),this.autovis.generate()}},{key:"render",value:function(){if(this.props.spec.chart){var e=this.props.spec.chart,t=e.size;if("vegalite"===e.type){var a=this.props.spec.chart.width;.5*this.props.spec.chart.height,.5*a}else switch(t){case"wide":220,560;break;case"middle":200,360;break;case"small":150,235}}var r=(this.props.spec.chart?this.props.spec.chart:{id:"demo-chart"}).id;return s.a.createElement("div",{id:r?"vischart_".concat(r):"demo-chart",style:{height:"640",width:"640",display:"flex",alignItems:"center",justifyContent:"center"}})}}]),a}(n.Component),A=a(256),T=a(182),R=a.n(T),y=function(e){return Math.round(Math.random()*(e-1))},v=function(e,t){var a=p(t,e);return 0===a.length?null:a[y(a.length)].chart},E=function(e){var t=e;switch(e){case o.a.AREA_CHART:t="areachart";break;case o.a.BUBBLE_CHART:t="bubblechart";break;case o.a.COLOR_FILLING_MAP:t="filledmap";break;case o.a.BUBBLE_MAP:t="bubblemap";break;case o.a.HALF_RING_CHART:t="donutchart";break;case o.a.HORIZONTAL_BAR_CHART:t="horizentalbarchart";break;case o.a.VERTICAL_BAR_CHART:case o.a.STACKED_BAR_CHART:case o.a.VERTICAL_DIFFERENCE_BAR_CHART:case o.a.ISOTYPE_BAR_CHART:case o.a.VERTICAL_DIFFERENCE_ARROW_CHART:t="verticalbarchart";break;case o.a.LINE_CHART:case o.a.STACKED_LINE_CHART:t="linechart";break;case o.a.PROPORTION_ISOTYPE_CHART:case o.a.PIE_CHART:t="piechart";break;case o.a.PROGRESS_BAR_CHART:t="progresschart";break;case o.a.RING_CHART:t="donutchart";break;case o.a.SCATTER_PLOT:t="scatterplot";break;case o.a.TEXT_CHART:t="textchart";break;case o.a.TREE_MAP:t="treemap"}return t},O=function(e,t,a,n,i,c){a.chart&&""!==a.chart||(a.chart=v(e.schema,a));var u=a.chart;if(u===o.a.ISOTYPE_BAR_CHART&&(a.chart=o.a.VERTICAL_BAR_CHART),!(a=Object(A.a)(a)).chart||!Object(A.b)(a))return console.log("no valid",a),null;var l=Object(r.a)({id:t,size:i,type:E(u),style:"business",duration:0,showSuggestion:!1},c),p={data:e=Object(r.a)(Object(r.a)({},e),{},{values:n}),fact:a,chart:l};return s.a.createElement(b,{spec:R.a.cloneDeep(p)})}},377:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return M}));var r=a(200),n=a(15),s=a(16),o=a(17),i=a(18),c=a(0),u=a.n(c),l=a(290),p=a(184),f=[{id:0,template:"The Pearson correlation between the {{measure1}} and the {{measure2}} is {{parameter}} when {{subspace}}."},{id:1,template:"When {{subspace}}, the Pearson correlation coefficient between the {{measure1}} and the {{measure2}} is {{parameter}}."},{id:2,template:"When {{subspace}}, the {{measure1}} is correlated with the {{measure2}} and the Person correlation is {{parameter}}."}],h=[{id:0,template:"When {{subspace}}, there are {{parameter}} {{groupby}}s: {{no.1}}, {{no.2}}, {{no.3}}, and {{focus}} needs to pay attention."},{id:1,template:"When {{subspace}}, the data are grouped into {{parameter}} {{groupby}}s, including {{no.1}}, {{no.2}}, {{no.3}}, among which {{focus}} needs to pay attention."},{id:2,template:"The data contain {{parameter}} {{groupby}}s when {{subspace}}, which are {{no.1}}, {{no.2}}, {{no.3}}. {{focus}} needs to pay attention."}],d=[{id:0,template:"The difference between {{focus1}} and {{focus2}} regarding to their {{agg}} {{measure}} is {{parameter}} when {{subspace}}."},{id:1,template:"{{focus1}} and {{focus2}}'s difference on the {{agg}} {{measure}} is {{parameter}} when {{subspace}}."},{id:2,template:"A comparison between {{focus1}} and {{focus2}} on their {{agg}} {{measure}} shows the difference is {{parameter}} when {{subspace}}."}],m=[{id:0,template:"The distribution of the {{agg}} {{measure}} over different {{groupby}}s shows an overview of the data when {{subspace}} and {{focus}} needs to pay attention."},{id:1,template:"The distribution of the {{agg}} {{measure}} over different {{groupby}}s shows an overview of the data when {{subspace}} and {{focus}} needs to pay attention."},{id:2,template:"The distribution of the {{agg}} {{measure}} over different {{groupby}}s shows an overview of the data when {{subspace}} and {{focus}} needs to pay attention."}],g=[{id:0,template:"Given {{subspace}}, the {{focus}} value of the {{agg}} {{measure}} is {{parameter[1]}} when the {{groupby}} is {{parameter[0]}}."},{id:1,template:"The {{focus}} {{agg}} {{measure}} value over {{groupby}}s is {{parameter[1]}} when the {{groupby}} is {{parameter[0]}} given {{subspace}}."},{id:2,template:"Among all {{groupby}}s, {{parameter[0]}} has the {{focus}} {{agg}} {{measure}} value, which is {{parameter[1]}}, when {{subspace}}."}],b=[{id:0,template:"The {{agg}} {{measure}} of {{focus}} is an outlier when compared with that of other {{groupby}}s when {{subspace}}."},{id:1,template:"{{focus}}'s {{agg}} {{measure}} is anomalously different from other {{groupby}}s' {{measure}} when {{subspace}}."},{id:2,template:"Among various {{groupby}}s, the {{agg}} {{measure}} of {{focus}} is an anomaly when {{subspace}}."}],A=[{id:0,template:"The {{focus}} accounts for {{parameter}} of the {{agg}} {{measure}} when {{subspace}}."},{id:1,template:"The {{focus}} makes up {{parameter}} of the {{agg}} {{measure}} when {{subspace}}."},{id:2,template:"The {{focus}}'s {{agg}} {{measure}} takes {{parameter}} of the {{agg}} {{measure}} when {{subspace}}."}],T=[{id:0,template:"In the {{agg}} {{measure}} ranking of different {{groupby}}s,  the top three {{groupby}}s are {{no.1}}, {{no.2}}, {{no.3}}, when {{subspace}}."},{id:1,template:"The ranking list of the {{groupby}}s ordered by their {{agg}} {{measure}} when {{subspace}}, in which the top three {{groupby}}s are {{no.1}}, {{no.2}}, {{no.3}}."},{id:2,template:"When sorting the {{groupby}}s in order based on their {{agg}} {{measure}}, the top three {{groupby}}s are {{no.1}}, {{no.2}}, {{no.3}} when {{subspace}}."}],R=[{id:0,template:"The trend of the {{agg}} {{measure}} over {{groupby}}s is {{parameter}} when {{subspace}} and the value of {{focus}} needs to pay attention."},{id:1,template:"The {{agg}} {{measure}} over {{groupby}}s shows a/an {{parameter}} trend when {{subspace}} and the value of {{focus}} needs to pay attention."},{id:2,template:"The {{agg}} {{measure}} over {{groupby}}s is {{parameter}} when {{subspace}} and the value of {{focus}} needs to pay attention."}],y=[{id:0,template:"The {{agg}} {{measure}} is {{parameter}} when {{subspace}}."},{id:1,template:"When {{subspace}}, the value of the {{agg}} {{measure}} is {{parameter}}."},{id:2,template:"The {{agg}} {{measure}} value is {{parameter}} when {{subspace}}."}],v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=[];switch(e){case p.a.ASSOCIATION:a=f;break;case p.a.CATEGORIZATION:a=h;break;case p.a.DIFFERENCE:a=d;break;case p.a.DISTRIBUTION:a=m;break;case p.a.EXTREME:a=g;break;case p.a.OUTLIER:a=b;break;case p.a.PROPORTION:a=A;break;case p.a.RANK:a=T;break;case p.a.TREND:a=R;break;case p.a.VALUE:a=y}-1===t&&(t=Math.floor(10*Math.random())%3);var r="";try{r=a[t].template}catch(n){console.error(n),console.log("wrong id:"+t)}return r},E=a(256),O={SUM:"sum",MAX:"max",MIN:"min",AVG:"avg",COUNT:"count"},C=a(182),w=a.n(C),I=a(475),N=function(e){switch(e){case O.SUM:return"total";case O.MAX:return"maximum";case O.MIN:return"minimum";case O.AVG:return"average";case O.COUNT:return"count";case O.NONE:default:return""}},L=function(e){return"count"===e.aggregate?"":e.field.toLowerCase()},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single",a=e[0];if("single"===t)return a.toLowerCase();if("plural"===t){if(-1===a.indexOf(" of "))return I(a,2).toLowerCase();var r=a.split(" "),n=r.indexOf("of")-1;if(n>-1){var s=I(r[n],2);return a.replace(r[n],s)}}},x=function(e){var t=0,a="",r="";(e=(e||0).toString()).indexOf(".")>0?(t=(e=e.toFixed(2)).indexOf("."),a=e.substr(t),r=e.substring(0,t)):r=e;for(var n=[],s=0,o=(r=r.split("")).length-1;o>=0;o--)s++,n.unshift(r[o]),s%3||0===o||n.unshift(",");return n.join("")+a||""},_=function(e,t){var a="";return e.subspace.length?(e.subspace.map((function(e,t){return a+="".concat(0===t?" ":" and ","the ").concat(e.field," is ").concat(e.value)})),t=t.replace("{{subspace}}",a)):t=(t=(t=(t=(t=(t=(t=t.replace(", when {{subspace}}","")).replace(" when {{subspace}}","")).replace(" in case of {{subspace}}","")).replace(" given {{subspace}}","")).replace("When {{subspace}}, ","")).replace("Given {{subspace}}, ","")).replace("In case of {{subspace}}, ",""),t},S=function(e,t){if(-1===e.indexOf(t))return e;var a=e.indexOf(t)+t.length;"s"===e.substring(a,a+1)&&(a+=1);var r=e.indexOf(t),n=e.substring(0,a)+"</i></span>"+e.substring(a);return n=n.substring(0,r)+'<span class="hightlight"><i>'+n.substring(r)},P=function(e){if(!Object(E.b)(e))return"";var t,a,r=e.generatedScript;switch(e.type){case p.a.ASSOCIATION:a=r;break;case p.a.RANK:var n=e.parameter[0],s=e.parameter[1],o=e.parameter[2];a=S(r,n),s&&(a=S(a,s)),s&&o&&(a=S(a,o));break;case p.a.VALUE:case p.a.DIFFERENCE:a=S(r,e.measure[0].field.toLowerCase()),a=S(a,x(e.parameter));break;case p.a.RANK:a=S(r,"decreasing");break;case p.a.OUTLIER:a=r;break;case p.a.EXTREME:case p.a.OUTLIER:a=S(r,"maximum"),e.parameter[1]&&(a=S(a,x(e.parameter[1])));break;case p.a.DISTRIBUTION:a=r;break;case p.a.CATEGORIZATION:t=e.parameter.length.toString(),a=S(r,t);break;default:t=e.parameter,a=S(r,t)}return a},H=a(151),B=(a(116),"200"),U="150",j=new Map,G=new Map,D=null,M=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).layoutNode=u.a.createRef(),s.onResize=function(){window.addEventListener("resize",(function(){setTimeout((function(){s.updateTreeMapLayout()}),300)}))},s.updateTreeMapLayout=function(){if(s.layoutNode.current){var e=s.layoutNode.current,t=e.clientWidth,a=e.clientHeight,r=s.props.QAID,n=s.TreemapSize[r],o=n.preWidth,i=n.preHeight;(0!==t&&o!==t||i!==a&&0!==a)&&(s.forceUpdate(),s.updateTreemapSize(r,t,a))}s.batchUpdateVis(),s.svgTransformer()},s.updateTreemapSize=function(e,t,a){s.TreemapSize[e].preWidth=t,s.TreemapSize[e].preHeight=a},s.batchUpdateVis=function(){s.props.facts.map((function(e,t){if(!j.get(e.id)||!G.get(e.id))return e;var a=j.get(e.id).current,r=G.get(e.id).current,n=0,o=0,i=0;if(r&&(i=r.clientHeight),D&&D[t]){var c=D[t],u=c.x0,l=c.x1,p=c.y0;n=l-u,o=c.y1-p-i}return 0===n||0===o||(a&&s.svgTransformer(a,n,o),s.updateAVis(e,n,o,i)),e}))},s.svgTransformer=function(e,t,a){if(e){var r=Math.min(t,a)/640,n=e.children&&e.children[0];n&&(n.setAttribute("style","transform:scale(".concat(.9*r,")")),n.onmouseenter=function(){var e=s.props.isEdit;n.setAttribute("style","transform:scale(".concat(.9*r,");border:").concat(e?"1px dashed grey":""))},n.onmouseleave=function(){n.setAttribute("style","transform:scale(".concat(.9*r,")"))})}},s._isValidate=function(e,t){return!(e&&e<B||t&&t<U)},s._renderedFacts=function(e){var t=s.state,a=t.renderNum,r=t.count;return e.slice(0,a>=r?r:a)},s.updateAVis=function(e,t,a,r){var n=e.width,o=e.height,i=e.captionH;if(n!==t||o!==a||i!==r){var c=s.props.facts,u=c[c.findIndex((function(t){return t.id===e.id}))];u.width=t,u.height=a,u.captionH=r,s.setState({facts:c})}},s.weightAdapter=function(e,t){var a=e.children.length,n=[];switch(t){case 1:n=[1],2===a?n=[3,2]:3===a&&(n=[3,1.2,.8]);break;case 2:n=[1],2===a?n=[4,3]:3===a&&(n=[6,3,2]);break;case 3:n=[1],2===a?n=[3,2]:3===a&&(n=[3,1.2,.8]);break;case 4:n=[1],2===a?n=[3,2]:3===a&&(n=[4,3,2])}return{children:e.children.map((function(e,t){return Object(r.a)(Object(r.a)({},e),{},{significance:n[t]})}))}},s.change=function(e){s.setState({renderNum:e.target.value})},s.getTreemap=function(e,t,a){return H.treemap().tile(H.treemapResquarify.ratio(1)).size([e,t]).padding(3).round(!0)(H.hierarchy(a).sum((function(e){return e.significance})))},s.sort=function(e){return e.sort((function(e,t){return t.significance-e.significance}))},s.getSize=function(){return"large"},s.setRef=function(e){return j.set(e,u.a.createRef()),j.get(e)},s.setCaptionRef=function(e){return G.set(e,u.a.createRef()),G.get(e)},s.endEdit=function(e,t,a){var r=G.get(e).current,n=s.props.cachedQA;n[parseInt(t.id.split("QA")[0])].facts[a].script=r.innerHTML,s.props.saveCachedDecomposedQA(n)},s.deleteCard=function(e,t){var a=s.props.cachedQA,r=w.a.cloneDeep(a),n=parseInt(e.id.split("QA")[0]);r[n]&&r[n].facts.splice(t,1),r[n]&&0===r[n].facts.length&&r.splice(n,1),s.props.saveCachedDecomposedQA(r)},s.state={renderNum:5,count:5,clientWidth:0,clientHeight:0,facts:s.props.facts},s.visBox=u.a.createRef(),s.TreemapSize=new Array(s.props.columnNum).fill({preWidth:0,preHeight:0}),s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.updateTreeMapLayout(),this.onResize()}},{key:"componentDidUpdate",value:function(){this.updateTreeMapLayout()}},{key:"render",value:function(){var e=this,t=this.props,a=t.facts,n=t.data,s=t.schema,o=t.columnNum,i=t.isEdit,c=t.QAID,f=this.TreemapSize[c]?this.TreemapSize[c]:{preWidth:0,preHeight:0},h=f.preWidth,d=f.preHeight,m={children:this._renderedFacts(this.sort(a))};D=this.getTreemap(h,d,this.weightAdapter(m,o)).leaves();var g=function(t){var a=t.index,o=t.fact,c=t.x,f=t.y,h=t.width,d=t.height,m=o.script?o.script:function(e){if(!Object(E.b)(e))return"";var t=w.a.cloneDeep(e),a=v(t.type),r=O.NONE;switch(t.measure.length>0&&(r=t.measure[0].aggregate),t.type){case p.a.ASSOCIATION:a=(a=(a=(a=a.replace("{{measure1}}",L(t.measure[0]))).replace("{{measure2}}",L(t.measure[1]))).replace("{{agg1}}",N(t.measure[0].aggregate))).replace("{{agg2}}",N(t.measure[1].aggregate)),a=_(t,a),""!==t.parameter&&(a=a.replace("{{parameter}}",x(Number.parseFloat(t.parameter).toFixed(3))));break;case p.a.CATEGORIZATION:if(a=(a=a.replace("{{groupby}}s",k(t.groupby,"plural"))).replace("{{groupby}}s",k(t.groupby,"plural")),a=_(t,a),t.parameter.length){a=a.replace("{{parameter}}",x(t.parameter.length));var n="";t.parameter.forEach((function(e,t){n+="".concat(0===t?"":","," ").concat(e)})),a=a.replace("{{no.1}}, {{no.2}}, {{no.3}}",n)}if(t.focus.length)if(a.indexOf(". {{focus}}")>-1){var s=t.focus[0].value.slice(0,1).toUpperCase()+t.focus[0].value.slice(1);a=a.replace("{{focus}}",s)}else a=a.replace("{{focus}}",t.focus[0].value);else a=(a=(a=a.replace(", and {{focus}} needs to pay attention","")).replace(", among which {{focus}} needs to pay attention","")).replace(". {{focus}} needs to pay attention","");break;case p.a.DIFFERENCE:a=(a=a.replace("{{measure}}",L(t.measure[0]))).replace("{{agg}}",N(r)),t.focus.length>=2&&(a=(a=a.replace("{{focus1}}",t.focus[0].value)).replace("{{focus2}}",t.focus[1].value)),a=_(t,a),""!==t.parameter&&(a=a.replace("{{parameter}}",x(t.parameter)));break;case p.a.DISTRIBUTION:a=(a=(a=(a=(a=a.replace("{{measure}}",L(t.measure[0]))).replace("{{measure}}",L(t.measure[0]))).replace("{{agg}}",N(r))).replace("{{groupby}}s",k(t.groupby,"plural"))).replace("{{groupby}}",k(t.groupby)),a=_(t,a),a=t.focus.length?a.replace("{{focus}}",t.focus[0].value):a.replace(" and {{focus}} needs to pay attention","");break;case p.a.EXTREME:a=(a=(a=(a=(a=a.replace("{{measure}}",L(t.measure[0]))).replace("{{agg}}",N(r))).replace("{{groupby}}s",k(t.groupby,"plural"))).replace("{{groupby}}",k(t.groupby))).replace("{{groupby}}",k(t.groupby)),a=_(t,a),t.focus.length&&(void 0!==t.focus[0].extremeFocus&&void 0!==t.focus[0].extremeValue?a=(a=(a="min"===t.focus[0].extremeFocus?a.replace("{{focus}}","minimum"):a.replace("{{focus}}","maximum")).replace("{{parameter[0]}}",t.focus[0].value)).replace("{{parameter[1]}}",x(Math.round(100*t.parameter[1])/100)):t.parameter.length&&(a=(a=(a="min"===t.parameter[0]?a.replace("{{focus}}","minimum"):a.replace("{{focus}}","maximum")).replace("{{parameter[0]}}",t.focus[0].value)).replace("{{parameter[1]}}",x(t.parameter[1]))));break;case p.a.OUTLIER:a=(a=(a=(a=a.replace("{{measure}}",L(t.measure[0]))).replace("{{measure}}",L(t.measure[0]))).replace("{{groupby}}s",k(t.groupby,"plural"))).replace("{{agg}}",N(r)),a=_(t,a),t.focus.length&&(a=a.replace("{{focus}}",t.focus[0].value));break;case p.a.PROPORTION:a=(a=(a=(a=a.replace("{{measure}}",L(t.measure[0]))).replace("{{agg}}",N(r))).replace("{{measure}}",L(t.measure[0]))).replace("{{agg}}",N(r)),a=_(t,a),t.focus.length&&(a=a.replace("{{focus}}",t.focus[0].value)),t.parameter&&(a=a.replace("{{parameter}}",t.parameter));break;case p.a.RANK:a=(a=(a=(a=a.replace("{{measure}}",L(t.measure[0]))).replace("{{agg}}",N(r))).replace("{{groupby}}s",k(t.groupby,"plural"))).replace("{{groupby}}s",k(t.groupby,"plural")),a=_(t,a),t.parameter.length>=3?(a=(a=(a=a.replace("{{parameter}}",x(t.parameter.length))).replace("{{no.1}}",t.parameter[0])).replace("{{no.2}}",t.parameter[1]),3===t.parameter.length||t.parameter.length>3?a=a.replace("{{no.3}}",t.parameter[2]):2===t.parameter.length&&(a=a.replace(", {{no.3}}",""))):a="";break;case p.a.TREND:a=(a=(a=a.replace("{{measure}}",L(t.measure[0]))).replace("{{agg}}",N(r))).replace("{{groupby}}s",k(t.groupby,"plural")),a=_(t,a),t.parameter&&(a=a.replace("{{parameter}}",t.parameter),a="increasing"===t.parameter?a.replace("a/an","an"):a.replace("a/an","a")),a=t.focus.length?a.replace("{{focus}}",t.focus[0].value):a.replace(" and the value of {{focus}} needs to pay attention","");break;case p.a.VALUE:a=(a=a.replace("{{measure}}",L(t.measure[0]))).replace("{{agg}}",N(r)),a=_(t,a),t.focus.length&&(a=a.replace("{{focus}}",t.focus[0].value)),""!==t.parameter&&(a=a.replace("{{parameter}}",x(t.parameter)))}return a=a.slice(0,1).toUpperCase()+a.slice(1)}(o)||" ";return o.generatedScript=m,u.a.createElement("div",{style:{position:"absolute",left:c,top:f,width:h,height:d}},u.a.createElement("div",{className:"chart-card"},i&&u.a.createElement("div",{className:"delete",onClick:function(){return e.deleteCard(o,a)}}),u.a.createElement("div",{className:"wrapper"},u.a.createElement("div",{className:"vis-box",style:{height:"calc(100% - ".concat(o.captionH,"px)")}},u.a.createElement("div",{className:"bound-box",id:o.id,ref:e.setRef(o.id)},Object(l.a)({schema:s},o.id,o,n,e.getSize(),Object(r.a)({},{height:640,width:640})))),u.a.createElement("div",{className:"caption",contentEditable:i,suppressContentEditableWarning:!0,ref:e.setCaptionRef(o.id,a),onBlur:function(){return e.endEdit(o.id,o,a)},dangerouslySetInnerHTML:{__html:P(o)}}))))};return u.a.createElement("div",{className:"inner-auto-layout",ref:this.layoutNode},D&&D.map((function(e,t){return u.a.createElement(g,{key:t,index:t,fact:e.data,x:e.x0,y:e.y0,width:e.x1-e.x0,height:e.y1-e.y0})})))}}]),a}(c.Component)},53:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return b}));var r=a(200),n=a(15),s=a(16),o=a(17),i=a(18),c=a(0),u=a.n(c),l=a(52),p=(a(377),function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.initDone,a=e.intl;return u.a.createElement("div",{className:"ErrorView"},u.a.createElement("div",null),u.a.createElement("p",null,t&&a.get("empty")))}}]),a}(c.PureComponent)),f=a(265),h=a.n(f),d=a(182),m=a.n(d),g=(a(117),new Map),b=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).titleRef=u.a.createRef(),e.setFactId=function(e,t){return m.a.cloneDeep(e).map((function(e){return Object(r.a)(Object(r.a)({},e),{},{id:"".concat(t,"QA").concat(h()())})}))},e.fullscreen=function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},e.reorder=function(e,t){for(var a=t,r=[],n=0;n<a;){for(var s=0;s<e.length;s+=a){var o=e[s+n];void 0!==o&&r.push(o)}n++}return r},e.endEdit=function(t){var a=g.get(t).current;if(a){var r=e.props.cachedQA;r[t].question=a.innerHTML,e.props.saveCachedDecomposedQA(r)}},e.setSubTitleRef=function(e){return g.set(e,u.a.createRef()),g.get(e)},e.endTitleEdit=function(){var t=e.titleRef.current;if(t){var a=t.innerHTML;a!==e.props.editedTitle&&e.props.editTitle(a)}},e.export=function(){window.print()},e.getTitle=function(){var t=e.props,a=t.askedQuestion,r=t.editedTitle,n=r||a;return n.slice(0,1).toUpperCase()+n.slice(1)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.initDone,r=t.intl,n=t.isEdit,s=t.decomposedQA,o=t.loading;if(!s)return null;var i=function(){return u.a.createElement("div",{className:"title"},u.a.createElement("h1",{contentEditable:n,title:e.getTitle(),suppressContentEditableWarning:!0,onBlur:function(){return e.endTitleEdit()},ref:e.titleRef},"".concat(e.getTitle()||a&&r.get("inputHint"))),u.a.createElement("div",{className:"fullscreen_icon",onClick:e.fullscreen}),u.a.createElement("div",{className:"export_icon",onClick:e.export}))},c=function(t){var a=t.index,r=t.subQustion,n=t.isEdit,s=r.slice(0,1).toUpperCase()+r.slice(1);return u.a.createElement("div",{className:"sub-title-box"},u.a.createElement("div",{className:"right-box"},u.a.createElement("div",{className:s===e.getTitle()?"right-top hightlight":"right-top default"})),u.a.createElement("div",{className:"sub-title",style:{borderColor:s===e.getTitle()?"#F19C0F":"#A1AEB9"}},u.a.createElement("div",{className:s===e.getTitle()?"index hightlight":"index default"},a+1),u.a.createElement("h1",{contentEditable:n,suppressContentEditableWarning:!0,title:"".concat(s),onBlur:function(){return e.endEdit(a)},ref:e.setSubTitleRef(a)},"".concat(s))))},f=4===s.length?2:s.length;return u.a.createElement("div",{className:"large-size-screen"},u.a.createElement(i,this.props),u.a.createElement("div",{className:"auto-layout",style:{columnCount:f}},u.a.createElement("div",{className:"dec1"}),u.a.createElement("div",{className:"dec2"}),s.length>0?this.reorder(s,f).map((function(t,a){return u.a.createElement("div",{className:"subView",key:t.id,style:{height:4===s.length?"calc(50% - 15px)":"100%",width:"100%"}},u.a.createElement("div",{className:"d1"}),u.a.createElement("div",{className:"d2"}),s.length>1&&u.a.createElement(c,{index:t.id,subQustion:t.question,isEdit:n}),u.a.createElement(l.default,Object.assign({QAID:a,facts:e.setFactId(t.facts,a),columnNum:s.length},e.props)))})):!o&&u.a.createElement(p,{initDone:r,intl:r})))}}]),a}(c.Component)},55:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return b}));a(243);var r=a(244),n=a(200),s=a(156),o=a.n(s),i=a(172),c=a(15),u=a(16),l=a(17),p=a(18),f=a(0),h=a.n(f),d=a(53),m=a(290),g=a(196),b=(a(118),function(e){Object(l.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,s=new Array(r),u=0;u<r;u++)s[u]=arguments[u];return(e=t.call.apply(t,[this].concat(s))).state={question:e.props.question,decomposedQA:[],loading:!1,isUpdateLayout:e.props.isUpdateLayout},e.getData=function(){var t=Object(i.a)(o.a.mark((function t(a){var r,n,s,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.fileName,n={file_name:r,question:a,model:""},e.setState({loading:!0}),e.props.updateQuestion(a),t.next=6,g.a(n);case 6:if((s=t.sent).data&&"talk-generator error"!==s.data){t.next=10;break}return e.setState({loading:!1,decomposedQA:[]}),t.abrupt("return");case 10:i=e.addParams(s.data.story),e.setState({loading:!1,decomposedQA:i}),e.props.saveCachedDecomposedQA(i);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.constructGroupBy=function(e){return e.map((function(e){return e.field}))},e.getFakeScript=function(e,t){var a="";return"in which category has the highest sales and which the lowest "===e?a="in which category has the highest sales and which the lowest ":"sales has an overall value of sales over year "===e?a="sales has an overall value of sales over year ":"sales have an overall value of sales "===e&&(a="sales have an overall value of sales "),("Does any brand sell a lot but has a decreasing trend"===e||"which brand has the highest sales and which brand has the lowest sales "===e||"which brand has an increasing trend of sales over brand "===e)&&(a=["caption1","caption2","caption3"][t]),a},e.getFakeFocus=function(e,t,a){return"which brand has the highest sales and which brand has the lowest sales "===e&&(a[0].value="Ford"),"which brand has the highest sales and which has the lowest "===e&&(a[0].value="Ford"),"in which category has the highest sales and which the lowest "===e&&(a[0].value="SUV"),a},e.addParams=function(t){return t.map((function(t,a){return{question:t.question,id:a,facts:t.facts.map((function(r){return r.chart&&""!==r.chart||(r.groupby=e.constructGroupBy(r.breakdown),r.chart=Object(m.b)(e.props.schema,r)),Object(n.a)(Object(n.a)({},r),{},{groupby:r.breakdown[0]?[r.breakdown[0].field]:[],focus:e.getFakeFocus(t.question,a,r.focus)})}))}}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.cachedQA,a=e.question;t?this.setState({decomposedQA:t}):this.getData(a)}},{key:"componentWillReceiveProps",value:function(e){if(e.question!==this.state.question)this.setState({question:e.question}),this.getData(e.question);else{var t=e.cachedQA;if(!t)return null;this.setState({decomposedQA:t})}}},{key:"render",value:function(){var e=this.state,t=e.decomposedQA,a=e.question,n=e.loading,s=this.props,o=s.initDone,i=s.intl;return h.a.createElement("div",{className:"Dashboard spin-center"},n&&h.a.createElement(r.a,{tip:o&&i.get("Coverting")}),h.a.createElement(d.default,Object.assign({loading:n,askedQuestion:a,decomposedQA:t},this.props)))}}]),a}(f.Component))}}]);
//# sourceMappingURL=25.24a23fce.chunk.js.map