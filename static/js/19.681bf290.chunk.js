(this["webpackJsonpcalliope-talk"]=this["webpackJsonpcalliope-talk"]||[]).push([[19,30],{181:function(e,a,t){"use strict";a.a={VALUE:"value",TREND:"trend",CATEGORIZATION:"categorization",DIFFERENCE:"difference",PROPORTION:"proportion",DISTRIBUTION:"distribution",RANK:"rank",ASSOCIATION:"association",EXTREME:"extreme",OUTLIER:"outlier"}},186:function(e,a,t){"use strict";a.a={JUXTAPOSITION:"juxtaposition",AREA_CHART:"Area Chart",VERTICAL_BAR_CHART:"Vertical Bar Chart",VERTICAL_DIFFERENCE_BAR_CHART:"Vertical Difference Bar Chart",VERTICAL_DIFFERENCE_ARROW_CHART:"Vertical Difference Arrow Chart",HORIZONTAL_BAR_CHART:"Horizontal Bar Chart",PROGRESS_BAR_CHART:"Progress Bar Chart",STACKED_BAR_CHART:"Stacked Bar Chart",ISOTYPE_BAR_CHART:"Isotype Bar Chart",PROPORTION_ISOTYPE_CHART:"Proportion Isotype Chart",COLOR_FILLING_MAP:"Color Filling Map",BUBBLE_CHART:"Bubble Chart",TEXT_CHART:"Text Chart",LINE_CHART:"Line Chart",STACKED_LINE_CHART:"Stacked Line Chart",RING_CHART:"Ring Chart",HALF_RING_CHART:"Half Ring Chart",PIE_CHART:"Pie Chart",SCATTER_PLOT:"Scatter Plot",TREE_MAP:"Treemap",BUBBLE_MAP:"Bubblemap"}},205:function(e,a,t){"use strict";a.a={NUMERICAL:"numerical",CATEGORICAL:"categorical",TEMPORAL:"temporal",GEOGRAPHICAL:"geographical"}},236:function(e,a,t){"use strict";t.d(a,"b",(function(){return A})),t.d(a,"a",(function(){return s}));var r=t(181),n=t(274),c=function(e,a,t){var r=n.a.filter((function(a){return a.fact===e}));if(a&&(r=r.filter((function(e){return e.chart===a}))),0===r.length)return[];var c=new Set;r.forEach((function(e){e.breakdownType.forEach((function(e){c.add(e)}))}));var u=Array.from(c);return t.filter((function(e){return-1!==u.indexOf(e.type)}))},u=t(141),i=function(e,a){var t,r=e,n=Object(u.a)(a);try{var c=function(){var e=t.value;r=r.filter((function(a){return a[e.field]===e.value}))};for(n.s();!(t=n.n()).done;)c()}catch(i){n.e(i)}finally{n.f()}return r},o=t(154),A=function(e){var a=!1;switch(e.type){case r.a.ASSOCIATION:2===e.measure.length&&(a=!0);break;case r.a.CATEGORIZATION:e.groupby.length&&(a=!0);break;case r.a.DIFFERENCE:e.measure.length&&e.groupby.length&&e.focus.length>=2&&(a=!0);break;case r.a.DISTRIBUTION:e.measure.length&&e.groupby.length&&(a=!0);break;case r.a.EXTREME:case r.a.OUTLIER:case r.a.PROPORTION:e.measure.length&&e.groupby.length&&e.focus.length&&(a=!0);break;case r.a.RANK:case r.a.TREND:e.measure.length&&e.groupby.length&&(a=!0);break;case r.a.VALUE:e.measure.length&&(a=!0)}return a},s=function(e,a,t){var n=Object.assign({},e);switch(e.type){case r.a.ASSOCIATION:if(n.focus=[],a&&t){var u=c(e.type,e.chart,a);0===n.groupby.length&&u.length>0&&(n.groupby=[u[0].field]);var o=a.filter((function(e){return"numerical"===e.type}));0===n.measure.length&&o.length>0&&(n.measure=[{field:o[0].field,aggregate:"count"}]),1===n.measure.length&&n.measure.push({field:"COUNT",aggregate:"count"})}break;case r.a.CATEGORIZATION:if(n.measure=[],n.focus=[],a&&t){var A=c(e.type,e.chart,a);0===n.groupby.length&&A.length>0&&(n.groupby=[A[0].field])}break;case r.a.DIFFERENCE:if(a&&t){var s=c(e.type,e.chart,a),R=l(t,e.groupby);0===n.groupby.length&&s.length>0&&(n.groupby=[s[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}]),n.focus.length||(n.focus=[{field:n.groupby[0],value:R[0]},{field:n.groupby[0],value:R[1]}])}break;case r.a.DISTRIBUTION:if(n.focus=[],a&&t){var f=c(e.type,e.chart,a);0===n.groupby.length&&f.length>0&&(n.groupby=[f[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}])}break;case r.a.EXTREME:if(a&&t){var h=c(e.type,e.chart,a);if(0===n.groupby.length&&h.length>0&&(n.groupby=[h[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}]),n.measure.length&&n.groupby.length){var E={y:{}};E.y.field=n.measure[0].field,E.y.aggregation=n.measure[0].aggregate,E.x={},E.x.field=n.groupby[0];var C=i(t,n.subspace),g=T(C,E),O=n.measure[0].field,p=g.reduce((function(e,a){return e[O]>a[O]?e:a}));n.focus.length||(n.focus=[{field:n.groupby[0],value:p[n.groupby[0]],extremeFocus:"max",extremeValue:p[n.measure[0].field]}])}}break;case r.a.OUTLIER:if(a&&t){var d=c(e.type,e.chart,a);if(0===n.groupby.length&&d.length>0&&(n.groupby=[d[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}]),n.measure.length&&n.groupby.length){var I={y:{}};I.y.field=n.measure[0].field,I.y.aggregation=n.measure[0].aggregate,I.x={},I.x.field=n.groupby[0];var b=i(t,n.subspace),y=T(b,I),L=y.sort((function(e,a){return a[I.y.field]-e[I.y.field]})).map((function(e){return e[I.x.field]})),_=y.sort((function(e,a){return a[I.y.field]-e[I.y.field]})).map((function(e){return e[I.y.field]})),v=_.length,H=parseInt(.25*(v-1)),m=parseInt(.75*(v-1)),P=.25*(v-1)-H,k=.75*(v-1)-m,N=_[H]+(_[H+1]-_[H])*P,G=_[m]+(_[m+1]-_[m])*k,B=G-1.5*(N-G),w=N+1.5*(N-G),S=[];_.forEach((function(e,a){(e>w||e<B)&&S.push(a)})),!n.focus.length&&S.length&&(n.focus=[{field:e.groupby[0],value:L[S[0]]}])}}break;case r.a.PROPORTION:if(a&&t){var M=c(e.type,e.chart,a);if(0===n.groupby.length&&M.length>0&&(n.groupby=[M[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}]),n.measure.length&&n.groupby.length){var U={y:{}};U.y.field=n.measure[0].field,U.y.aggregation=n.measure[0].aggregate,U.x={},U.x.field=n.groupby[0];var D=i(t,n.subspace),V=T(D,U),F=n.measure[0].field,x=V.reduce((function(e,a){return e[F]>a[F]?e:a}));n.focus.length||(n.focus=[{field:n.groupby[0],value:x[n.groupby[0]]}])}}break;case r.a.RANK:if(n.focus=[],a&&t){var j=c(n.type,n.chart,a);0===n.groupby.length&&j.length>0&&(n.groupby=[j[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}])}break;case r.a.TREND:if(n.focus=[],a&&t){var X=a.filter((function(e){return"temporal"===e.type})),Z=X.map((function(e){return e.field}));0===X.length?n.groupby=[]:0!==n.groupby.length&&-1!==Z.indexOf(n.groupby[0])||(n.groupby=[X[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}])}break;case r.a.VALUE:n.groupby=[],n.focus=[],a&&t&&0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}])}return n},R=function(e,a){return o.nest().key((function(e){return e[a.x.field]})).entries(e).map((function(e,t){var r=o.scan(e.values,(function(e,t){if(e[a.y.field]&&t[a.y.field])return t[a.y.field]-e[a.y.field]}));return r>=0?e.values[r]:e.values[0]}))},T=function(e,a){var t;switch(a.y.aggregation){case"sum":t=function(e,a){var t=o.nest().key((function(e){return e[a.x.field]})).entries(e),r=new Array(t.length).fill(0);return t.map((function(e,t){e.values.forEach((function(e){r[t]+=e[a.y.field]}));var n=Object.assign({},e.values[0]);return n[a.y.field]=r[t],n}))}(e,a);break;case"avg":t=function(e,a){var t=o.nest().key((function(e){return e[a.x.field]})).entries(e),r=new Array(t.length).fill(0);return t.map((function(e,t){e.values.forEach((function(e){r[t]+=e[a.y.field]}));var n=Object.assign({},e.values[0]);return n[a.y.field]=r[t]/e.values.length,n}))}(e,a);break;case"max":t=R(e,a);break;case"min":t=function(e,a){return o.nest().key((function(e){return e[a.x.field]})).entries(e).map((function(e){var t=o.scan(e.values,(function(e,t){if(e[a.y.field]&&t[a.y.field])return e[a.y.field]-t[a.y.field]}));return t>=0?e.values[t]:e.values[0]}))}(e,a);break;case"count":t=function(e,a){var t=o.nest().key((function(e){return e[a.x.field]})).entries(e),r=new Array(t.length).fill(0);return t.map((function(e,a){e.values.forEach((function(){r[a]+=1}));var t=Object.assign({},e.values[0]);return t.COUNT=r[a],t}))}(e,a);break;default:t=R(e,a)}return t},l=function(e,a){return a?Array.from(new Set(e.map((function(e){return e[a]})))):[]}},274:function(e,a,t){"use strict";t.d(a,"a",(function(){return u}));var r=t(181),n=t(186),c=t(205),u=[{fact:r.a.ASSOCIATION,chart:n.a.SCATTER_PLOT,breakdownType:[c.a.CATEGORICAL,c.a.TEMPORAL,c.a.GEOGRAPHICAL]},{fact:r.a.OUTLIER,chart:n.a.VERTICAL_BAR_CHART,breakdownType:[c.a.CATEGORICAL,c.a.TEMPORAL,c.a.GEOGRAPHICAL]},{fact:r.a.OUTLIER,chart:n.a.AREA_CHART,breakdownType:[c.a.TEMPORAL]},{fact:r.a.OUTLIER,chart:n.a.LINE_CHART,breakdownType:[c.a.TEMPORAL]},{fact:r.a.EXTREME,chart:n.a.VERTICAL_BAR_CHART,breakdownType:[c.a.CATEGORICAL,c.a.TEMPORAL,c.a.GEOGRAPHICAL]},{fact:r.a.EXTREME,chart:n.a.LINE_CHART,breakdownType:[c.a.TEMPORAL]},{fact:r.a.EXTREME,chart:n.a.AREA_CHART,breakdownType:[c.a.TEMPORAL]},{fact:r.a.PROPORTION,chart:n.a.PROGRESS_BAR_CHART,breakdownType:[c.a.CATEGORICAL,c.a.GEOGRAPHICAL,c.a.TEMPORAL]},{fact:r.a.PROPORTION,chart:n.a.PIE_CHART,breakdownType:[c.a.CATEGORICAL,c.a.GEOGRAPHICAL,c.a.TEMPORAL]},{fact:r.a.RANK,chart:n.a.HORIZONTAL_BAR_CHART,breakdownType:[c.a.CATEGORICAL,c.a.GEOGRAPHICAL,c.a.TEMPORAL]},{fact:r.a.DISTRIBUTION,chart:n.a.AREA_CHART,breakdownType:[c.a.TEMPORAL]},{fact:r.a.DISTRIBUTION,chart:n.a.VERTICAL_BAR_CHART,breakdownType:[c.a.CATEGORICAL,c.a.GEOGRAPHICAL]},{fact:r.a.DIFFERENCE,chart:n.a.HORIZONTAL_BAR_CHART,breakdownType:[c.a.CATEGORICAL,c.a.GEOGRAPHICAL,c.a.TEMPORAL]},{fact:r.a.CATEGORIZATION,chart:n.a.VERTICAL_BAR_CHART,breakdownType:[c.a.CATEGORICAL,c.a.GEOGRAPHICAL]},{fact:r.a.TREND,chart:n.a.LINE_CHART,breakdownType:[c.a.TEMPORAL]},{fact:r.a.VALUE,chart:n.a.VERTICAL_BAR_CHART}]},287:function(e,a,t){"use strict";t.d(a,"b",(function(){return I})),t.d(a,"a",(function(){return y}));var r=t(21),n=t(0),c=t.n(n),u=t(186),i=t(181),o=t(205),A=[{fact:i.a.ASSOCIATION,chart:u.a.SCATTER_PLOT,breakdownType:[o.a.CATEGORICAL,o.a.TEMPORAL,o.a.GEOGRAPHICAL]},{fact:i.a.OUTLIER,chart:u.a.AREA_CHART,breakdownType:[o.a.TEMPORAL]},{fact:i.a.OUTLIER,chart:u.a.LINE_CHART,breakdownType:[o.a.TEMPORAL]},{fact:i.a.EXTREME,chart:u.a.VERTICAL_BAR_CHART,breakdownType:[o.a.CATEGORICAL,o.a.CATEGORICAL,o.a.GEOGRAPHICAL]},{fact:i.a.EXTREME,chart:u.a.LINE_CHART,breakdownType:[o.a.TEMPORAL]},{fact:i.a.EXTREME,chart:u.a.AREA_CHART,breakdownType:[o.a.TEMPORAL]},{fact:i.a.PROPORTION,chart:u.a.PROGRESS_BAR_CHART,breakdownType:[o.a.CATEGORICAL,o.a.GEOGRAPHICAL]},{fact:i.a.PROPORTION,chart:u.a.PIE_CHART,breakdownType:[o.a.CATEGORICAL,o.a.GEOGRAPHICAL]},{fact:i.a.RANK,chart:u.a.HORIZONTAL_BAR_CHART,breakdownType:[o.a.CATEGORICAL,o.a.GEOGRAPHICAL]},{fact:i.a.DISTRIBUTION,chart:u.a.AREA_CHART,breakdownType:[o.a.TEMPORAL]},{fact:i.a.DISTRIBUTION,chart:u.a.VERTICAL_BAR_CHART,breakdownType:[o.a.CATEGORICAL,o.a.GEOGRAPHICAL]},{fact:i.a.DIFFERENCE,chart:u.a.HORIZONTAL_BAR_CHART,breakdownType:[o.a.CATEGORICAL,o.a.GEOGRAPHICAL,o.a.TEMPORAL]},{fact:i.a.CATEGORIZATION,chart:u.a.VERTICAL_BAR_CHART,breakdownType:[o.a.CATEGORICAL,o.a.GEOGRAPHICAL]},{fact:i.a.TREND,chart:u.a.LINE_CHART,breakdownType:[o.a.TEMPORAL]},{fact:i.a.VALUE,chart:u.a.VERTICAL_BAR_CHART}],s=t(274),R=function e(a,t){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=t.filter((function(e){return e.field===a.groupby[0]}))[0],u=n?s.a:A;return r=u.filter((function(e){return e.fact===a.type})),c&&(r=r.filter((function(e){return-1!==e.breakdownType.indexOf(c.type)})),c.type===o.a.CATEGORICAL&&c.values&&(r=r.filter((function(e){return!e.rang||c.values.length>=e.rang[0]&&c.values.length<=e.rang[1]}))),0!==r.length||n||(r=e(a,t,!0))),r},T=t(15),l=t(16),f=t(17),h=t(18),E=t(396),C=function(e){Object(f.a)(t,e);var a=Object(h.a)(t);function t(){return Object(T.a)(this,t),a.apply(this,arguments)}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.spec.chart.id,a=this.props.spec,t=e?"#vischart_".concat(e):"#demo-chart";this.autovis=new E.AutoVis,this.autovis=new E.AutoVis,this.autovis.container(t),this.autovis.load(a),this.autovis.generate()}},{key:"componentDidUpdate",value:function(e){var a=this.props.spec.chart.id,t=this.props.spec,r=a?"#vischart_".concat(a):"#demo-chart";this.autovis=new E.AutoVis,this.autovis=new E.AutoVis,this.autovis.container(r),this.autovis.load(t),this.autovis.generate()}},{key:"render",value:function(){if(this.props.spec.chart){var e=this.props.spec.chart,a=e.size;if("vegalite"===e.type){var t=this.props.spec.chart.width;.5*this.props.spec.chart.height,.5*t}else switch(a){case"wide":220,560;break;case"middle":200,360;break;case"small":150,235}}var r=(this.props.spec.chart?this.props.spec.chart:{id:"demo-chart"}).id;return c.a.createElement("div",{id:r?"vischart_".concat(r):"demo-chart",style:{height:"640",width:"640",display:"flex",alignItems:"center",justifyContent:"center",visibility:"hidden"}})}}]),t}(n.Component),g=t(236),O=t(185),p=t.n(O),d=function(e){return Math.round(Math.random()*(e-1))},I=function(e,a){var t=R(a,e);return 0===t.length?null:t[d(t.length)].chart},b=function(e){var a=e;switch(e){case u.a.AREA_CHART:a="areachart";break;case u.a.BUBBLE_CHART:a="bubblechart";break;case u.a.COLOR_FILLING_MAP:a="filledmap";break;case u.a.BUBBLE_MAP:a="bubblemap";break;case u.a.HALF_RING_CHART:a="donutchart";break;case u.a.HORIZONTAL_BAR_CHART:a="horizentalbarchart";break;case u.a.VERTICAL_BAR_CHART:case u.a.STACKED_BAR_CHART:case u.a.VERTICAL_DIFFERENCE_BAR_CHART:case u.a.ISOTYPE_BAR_CHART:case u.a.VERTICAL_DIFFERENCE_ARROW_CHART:a="verticalbarchart";break;case u.a.LINE_CHART:case u.a.STACKED_LINE_CHART:a="linechart";break;case u.a.PROPORTION_ISOTYPE_CHART:case u.a.PIE_CHART:a="piechart";break;case u.a.PROGRESS_BAR_CHART:a="progresschart";break;case u.a.RING_CHART:a="donutchart";break;case u.a.SCATTER_PLOT:a="scatterplot";break;case u.a.TEXT_CHART:a="textchart";break;case u.a.TREE_MAP:a="treemap"}return a},y=function(e,a,t,n,i,o){t.chart&&""!==t.chart||(t.chart=I(e.schema,t));var A=t.chart;if(A===u.a.ISOTYPE_BAR_CHART&&(t.chart=u.a.VERTICAL_BAR_CHART),!(t=Object(g.a)(t)).chart||!Object(g.b)(t))return console.log("no valid",t),null;var s={id:a,size:i,type:b(A),style:"business",duration:0,showSuggestion:!1},R={data:e=Object(r.a)(Object(r.a)({},e),{},{values:n}),fact:t,chart:s};return c.a.createElement(C,{spec:p.a.cloneDeep(R)})}},54:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return s}));var r=t(15),n=t(16),c=t(17),u=t(18),i=t(0),o=t.n(i),A=t(287),s=function(e){Object(c.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),u=0;u<n;u++)c[u]=arguments[u];return(e=a.call.apply(a,[this].concat(c))).shouldRender=!1,e.getSize=function(){return"large"},e}return Object(n.a)(t,[{key:"componentWillMount",value:function(){this.shouldRender=!0}},{key:"shouldComponentUpdate",value:function(){return!!this.shouldRender&&(this.shouldRender=!1,!0)}},{key:"render",value:function(){var e=this.props,a=e.schema,t=e.fact,r=e.data;return o.a.createElement(o.a.Fragment,null,Object(A.a)({schema:a},t.id,t,r,this.getSize()))}}]),t}(i.Component)}}]);
//# sourceMappingURL=19.681bf290.chunk.js.map