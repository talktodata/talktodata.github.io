{"version":3,"sources":["../node_modules/axios/lib/utils.js","../node_modules/lodash/_root.js","../node_modules/antd/es/_util/reactNode.js","../node_modules/lodash/isObject.js","../node_modules/antd/es/_util/type.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObjectLike.js","constant/FactType.js","axios/config.js","constant/ChartType.js","../node_modules/antd/es/spin/style/index.js","../node_modules/axios/lib/helpers/bind.js","../node_modules/axios/lib/helpers/buildURL.js","../node_modules/axios/lib/cancel/isCancel.js","../node_modules/axios/lib/defaults.js","../node_modules/axios/lib/adapters/xhr.js","../node_modules/axios/lib/core/createError.js","../node_modules/axios/lib/core/mergeConfig.js","../node_modules/axios/lib/cancel/Cancel.js","../node_modules/antd/es/spin/index.js","axios/api.js","constant/FieldType.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/debounce.js","../node_modules/lodash/now.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/_baseTrim.js","../node_modules/lodash/_trimmedEndIndex.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","tool/fact2vis/getSuitableBreakdownList.js","tool/fact2vis/datafilter.js","tool/fact2vis/helper.js","../node_modules/axios/index.js","../node_modules/axios/lib/axios.js","../node_modules/axios/lib/core/Axios.js","../node_modules/axios/lib/core/InterceptorManager.js","../node_modules/axios/lib/core/dispatchRequest.js","../node_modules/axios/lib/core/transformData.js","../node_modules/axios/lib/helpers/normalizeHeaderName.js","../node_modules/axios/lib/core/settle.js","../node_modules/axios/lib/core/enhanceError.js","../node_modules/axios/lib/helpers/cookies.js","../node_modules/axios/lib/core/buildFullPath.js","../node_modules/axios/lib/helpers/isAbsoluteURL.js","../node_modules/axios/lib/helpers/combineURLs.js","../node_modules/axios/lib/helpers/parseHeaders.js","../node_modules/axios/lib/helpers/isURLSameOrigin.js","../node_modules/axios/lib/cancel/CancelToken.js","../node_modules/axios/lib/helpers/spread.js","tool/fact2vis/fact2visAllRule.js","tool/fact2vis/fact2visRule.js","tool/fact2vis/getSupportedChartTypes.js","tool/fact2vis/Chart.js","tool/fact2vis/fact2vis.js","../node_modules/plur/index.js","../node_modules/irregular-plurals/index.js","pages/EditPage/Dashboard/Layout/ChartCard/CalliopeChart.js","sentencer/fact-templates/association.js","sentencer/fact-templates/categorization.js","sentencer/fact-templates/difference.js","sentencer/fact-templates/distribution.js","sentencer/fact-templates/extreme.js","sentencer/fact-templates/outlier.js","sentencer/fact-templates/proportion.js","sentencer/fact-templates/rank.js","sentencer/fact-templates/trend.js","sentencer/fact-templates/value.js","sentencer/fact-templates/index.js","constant/AggregationType.js","sentencer/index.js","tool/helper.js","pages/EditPage/Dashboard/Layout/ChartCard/AnsweredFacts.js","pages/EditPage/assets/json/demoResponse.js","components/ErrorView/ErrorView.js","pages/EditPage/Dashboard/Layout/layout.js","pages/EditPage/Dashboard/dashboard.js"],"names":["bind","require","toString","Object","prototype","isArray","val","call","isUndefined","isObject","isPlainObject","getPrototypeOf","isFunction","forEach","obj","fn","i","l","length","key","hasOwnProperty","module","exports","isArrayBuffer","isBuffer","constructor","isFormData","FormData","isArrayBufferView","ArrayBuffer","isView","buffer","isString","isNumber","isDate","isFile","isBlob","isStream","pipe","isURLSearchParams","URLSearchParams","isStandardBrowserEnv","navigator","product","window","document","merge","result","assignValue","slice","arguments","extend","a","b","thisArg","trim","str","replace","stripBOM","content","charCodeAt","freeGlobal","freeSelf","self","root","Function","isValidElement","React","cloneElement","element","props","replacement","replaceElement","value","type","tuple","_len","args","Array","_key","Symbol","getRawTag","objectToString","symToStringTag","toStringTag","undefined","VALUE","TREND","CATEGORIZATION","DIFFERENCE","PROPORTION","DISTRIBUTION","RANK","ASSOCIATION","EXTREME","OUTLIER","uploadPrefix","generationUrlPrefix","config","url","uploadData","share","fetch","factScoring","generate","candidateQuestions","JUXTAPOSITION","AREA_CHART","VERTICAL_BAR_CHART","VERTICAL_DIFFERENCE_BAR_CHART","VERTICAL_DIFFERENCE_ARROW_CHART","HORIZONTAL_BAR_CHART","PROGRESS_BAR_CHART","STACKED_BAR_CHART","ISOTYPE_BAR_CHART","PROPORTION_ISOTYPE_CHART","COLOR_FILLING_MAP","BUBBLE_CHART","TEXT_CHART","LINE_CHART","STACKED_LINE_CHART","RING_CHART","HALF_RING_CHART","PIE_CHART","SCATTER_PLOT","TREE_MAP","BUBBLE_MAP","apply","utils","encode","encodeURIComponent","params","paramsSerializer","serializedParams","parts","v","toISOString","JSON","stringify","push","join","hashmarkIndex","indexOf","__CANCEL__","normalizeHeaderName","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","headers","defaults","adapter","XMLHttpRequest","process","getDefaultAdapter","transformRequest","data","transformResponse","parse","e","timeout","xsrfCookieName","xsrfHeaderName","maxContentLength","maxBodyLength","validateStatus","status","common","method","settle","cookies","buildURL","buildFullPath","parseHeaders","isURLSameOrigin","createError","Promise","resolve","reject","requestData","requestHeaders","request","auth","username","password","unescape","Authorization","btoa","fullPath","baseURL","open","toUpperCase","onreadystatechange","readyState","responseURL","responseHeaders","getAllResponseHeaders","response","responseType","responseText","statusText","onabort","onerror","ontimeout","timeoutErrorMessage","xsrfValue","withCredentials","read","toLowerCase","setRequestHeader","onDownloadProgress","addEventListener","onUploadProgress","upload","cancelToken","promise","then","cancel","abort","send","enhanceError","message","code","error","Error","config1","config2","valueFromConfig2Keys","mergeDeepPropertiesKeys","defaultToConfig2Keys","directMergeKeys","getMergedValue","target","source","mergeDeepProperties","prop","axiosKeys","concat","otherKeys","keys","filter","Cancel","this","__rest","s","t","p","getOwnPropertySymbols","propertyIsEnumerable","defaultIndicator","Spin","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","debouncifyUpdateSpinning","delay","cancelExistingSpin","updateSpinning","debounce","originalUpdateSpinning","spinning","state","setState","renderSpin","_ref2","_classNames","getPrefixCls","direction","_a","customizePrefixCls","prefixCls","className","size","tip","wrapperClassName","style","restProps","spinClassName","classNames","_defineProperty","divProps","omit","spinElement","_extends","indicator","dotClassName","renderIndicator","isNestedPattern","containerClassName","children","shouldBeDelayed","isNaN","Number","shouldDelay","_createClass","ConfigConsumer","defaultProps","formData","reslove","axios","catch","getQuestions","generatePDF","param","NUMERICAL","CATEGORICAL","TEMPORAL","GEOGRAPHICAL","global","now","toNumber","nativeMax","Math","max","nativeMin","min","func","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","leadingEdge","setTimeout","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","clearTimeout","flush","Date","baseTrim","isSymbol","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","other","valueOf","isBinary","test","trimmedEndIndex","reTrimStart","string","reWhitespace","index","charAt","baseGetTag","isObjectLike","objectProto","nativeObjectToString","isOwn","tag","unmasked","getSuitableBreakdownList","factType","chartType","schema","suitableBreakdownList","fact2visAllRules","x","fact","chart","breakdownSets","Set","breakdownType","add","breakdownList","from","datafilter","subspace","filteredData","sub","field","isValid","FactType","measure","groupby","focus","customizeFact","newFact","assign","groupbyList","measureList","gbValueList","getFieldValue","encoding","aggregate","aggregatedRows","getAggregatedRows","measureField","reduce","extremeFocus","extremeValue","newOrder","sort","y","map","d","newOrderValue","n","posQ3","posQ1","decimalQ3","decimalQ1","Q3","Q1","Low","Up","outlierIndex","groupbyFieldList","getMaxRows","rawData","d3","entries","values","aggregation","calculateData","sumData","fill","sumRows","getSumRows","getAverageRows","getMinRows","countData","countRows","getCountRows","fieldName","Axios","mergeConfig","createInstance","defaultConfig","context","instance","create","instanceConfig","CancelToken","isCancel","all","promises","spread","default","InterceptorManager","dispatchRequest","interceptors","chain","interceptor","unshift","fulfilled","rejected","shift","getUri","handlers","use","eject","id","h","transformData","throwIfCancellationRequested","throwIfRequested","reason","fns","normalizedName","name","isAxiosError","toJSON","description","number","fileName","lineNumber","columnNumber","stack","write","expires","path","domain","secure","cookie","toGMTString","match","RegExp","decodeURIComponent","remove","isAbsoluteURL","combineURLs","requestedURL","relativeURL","ignoreDuplicateOf","parsed","split","line","substr","originURL","msie","userAgent","urlParsingNode","createElement","resolveURL","href","setAttribute","protocol","host","search","hash","hostname","port","pathname","location","requestURL","executor","resolvePromise","token","c","callback","arr","ChartType","FieldType","fact2visRules","getSupportedChartTypes","supportedChartTypes","isEdit","breakDown","rules","rang","Chart","spec","container","autovis","AutoVis","load","preProps","vega_w","width","height","display","alignItems","justifyContent","visibility","Component","getChoice","round","random","getFactChartType","shema","getvischartype","fact2chart","specData","containerId","vegalite","console","log","specChart","duration","showSuggestion","specNew","_","cloneDeep","irregularPlurals","word","plural","count","has","get","firstLetter","abs","defineProperty","Map","CalliopeChart","shouldRender","getSize","templates","pickFactTemplate","association","categorization","difference","distribution","extreme","outlier","proportion","rank","trend","floor","sentence","template","SUM","MAX","MIN","AVG","COUNT","plur","convertAggregation","aggType","AggregationType","NONE","convertMeasure","convertGroupby","gb","gbWords","gbWordIndex","plurWord","formatNum","num","floatNum","intNum","toFixed","substring","counter","genFactSubspace","hightlightItem","script","parameter","srtEndIndex","srtStartIndex","newScript","hightlight","generatedScript","parameter1","parameter2","parameter3","visNodes","captionNodes","AnsweredFacts","renderLayout","computeSizeAndRenderCharts","newFacts","facts","captionNode","current","visWidth","visHeight","captionH","clientHeight","x0","x1","y0","y1","preContainerSize","containerSize","renderCharts","batchUpdateSvg","visNode","updateSvg","visH","scale","visChart","onmouseenter","onmouseleave","_renderedFacts","renderNum","weightAdapter","columnNum","innerNum","weightTable","significance","change","event","getTreemap","tile","ratio","padding","sum","setRef","set","createRef","setCaptionRef","endEdit","visId","cachedQA","QAID","newCachedQA","innerHTML","saveCachedDecomposedQA","deleteCard","parentId","splice","clientWidth","nextProps","newContainerW","newContainerH","isUpdateLayout","cachedContainerSize","renderData","leaves","layout","_fact","parseFloat","parameterList","focusValue","genFactSentence","position","left","top","onClick","ref","contentEditable","suppressContentEditableWarning","onBlur","dangerouslySetInnerHTML","__html","ErrorView","initDone","intl","PureComponent","subTitleNodes","LayoutView","titleRef","debounceTimer","containerNodes","onResize","forceUpdate","setFactId","uuidv4","fullscreen","documentElement","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","reorder","columns","cols","out","col","_val","_nodes","question","setSubTitleRef","setContainerRef","endTitleEdit","newtTitle","editedTitle","editTitle","export","print","getTitle","askedQuestion","titleValue","isCanGetSize","preContainerNodes","decomposedQA","loading","TitleView","title","SubTitleView","subQustion","newStr","borderColor","columnCount","QA","Dashboard","getData","file_name","model","_that","replaceData","fakedata","addParams","updateQuestion","api","story","demoResponse","story1","story2","constructGroupBy","breakdown","getFakeScript","subQuestion","getFakeFocus"],"mappings":"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","file":"static/js/25.cf184a15.chunk.js","sourcesContent":["'use strict';\n\nvar bind = require('./helpers/bind');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {Object} val The value to test\n * @return {boolean} True if value is a plain Object, otherwise false\n */\nfunction isPlainObject(val) {\n  if (toString.call(val) !== '[object Object]') {\n    return false;\n  }\n\n  var prototype = Object.getPrototypeOf(val);\n  return prototype === null || prototype === Object.prototype;\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (isPlainObject(result[key]) && isPlainObject(val)) {\n      result[key] = merge(result[key], val);\n    } else if (isPlainObject(val)) {\n      result[key] = merge({}, val);\n    } else if (isArray(val)) {\n      result[key] = val.slice();\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n * @return {string} content value without BOM\n */\nfunction stripBOM(content) {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isPlainObject: isPlainObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim,\n  stripBOM: stripBOM\n};\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","import * as React from 'react';\nvar isValidElement = React.isValidElement;\nexport { isValidElement };\nexport function replaceElement(element, replacement, props) {\n  if (!isValidElement(element)) return replacement;\n  return /*#__PURE__*/React.cloneElement(element, typeof props === 'function' ? props(element.props || {}) : props);\n}\nexport function cloneElement(element, props) {\n  return replaceElement(element, element, props);\n}","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","// https://stackoverflow.com/questions/46176165/ways-to-get-string-literal-type-of-array-values-without-enum-overhead\nexport var tuple = function tuple() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return args;\n};\nexport var tupleNum = function tupleNum() {\n  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  return args;\n};","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","export default {\n    VALUE: 'value',\n    TREND: 'trend',\n    CATEGORIZATION: 'categorization',\n    DIFFERENCE: 'difference',\n    PROPORTION: 'proportion',\n    DISTRIBUTION: 'distribution',\n    RANK: 'rank',\n    ASSOCIATION: 'association',\n    EXTREME: 'extreme',\n    OUTLIER: 'outlier'\n}","//let calliopeService = 'calliope-service.idvxlab.com:8004';\nlet calliopeService = 'talk-api.idvxlab.com:8006';\n\nlet uploadPrefix = process.env.NODE_ENV === 'production' ? `https://${calliopeService}` : 'http://localhost:6028';//todo \n//let uploadPrefix = `https://${calliopeService}`\nlet generationUrlPrefix = process.env.NODE_ENV === 'production' ? `https://${calliopeService}` : 'http://localhost:6030';\n//let generationUrlPrefix = `https://${calliopeService}`\n\n\nconst config = {\n    url: {\n        //upload\n        uploadPrefix: uploadPrefix,\n        uploadData: `${uploadPrefix}/upload`,\n        share: `${uploadPrefix}/share`,\n        fetch: `${uploadPrefix}/data/share`,\n        //story generation\n        factScoring: `${generationUrlPrefix}/fact`,\n        generate: `${generationUrlPrefix}/generate`,\n        candidateQuestions: `https://${calliopeService}/column2questions`,\n    }\n}\nexport default config","export default {\n    JUXTAPOSITION: 'juxtaposition',\n    AREA_CHART: 'Area Chart',\n    VERTICAL_BAR_CHART: 'Vertical Bar Chart',\n    VERTICAL_DIFFERENCE_BAR_CHART: 'Vertical Difference Bar Chart',\n    VERTICAL_DIFFERENCE_ARROW_CHART: 'Vertical Difference Arrow Chart',\n    HORIZONTAL_BAR_CHART: 'Horizontal Bar Chart',\n    PROGRESS_BAR_CHART: 'Progress Bar Chart',\n    STACKED_BAR_CHART: 'Stacked Bar Chart',\n    ISOTYPE_BAR_CHART: 'Isotype Bar Chart',\n    PROPORTION_ISOTYPE_CHART: 'Proportion Isotype Chart',\n    COLOR_FILLING_MAP: 'Color Filling Map',\n    BUBBLE_CHART: 'Bubble Chart',\n    TEXT_CHART: 'Text Chart',\n    LINE_CHART: 'Line Chart',\n    STACKED_LINE_CHART: 'Stacked Line Chart',\n    RING_CHART: 'Ring Chart',\n    HALF_RING_CHART: 'Half Ring Chart',\n    PIE_CHART: 'Pie Chart',\n    SCATTER_PLOT: 'Scatter Plot',\n    TREE_MAP: 'Treemap',\n    BUBBLE_MAP: 'Bubblemap'\n}","import '../../style/index.less';\nimport './index.less';","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar cookies = require('./../helpers/cookies');\nvar buildURL = require('./../helpers/buildURL');\nvar buildFullPath = require('../core/buildFullPath');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    if (\n      (utils.isBlob(requestData) || utils.isFile(requestData)) &&\n      requestData.type\n    ) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = unescape(encodeURIComponent(config.auth.password)) || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (!requestData) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy', 'params'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'timeoutMessage', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress', 'decompress',\n    'maxContentLength', 'maxBodyLength', 'maxRedirects', 'transport', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath', 'responseEncoding'\n  ];\n  var directMergeKeys = ['validateStatus'];\n\n  function getMergedValue(target, source) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge(target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  function mergeDeepProperties(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  }\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, mergeDeepProperties);\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  utils.forEach(directMergeKeys, function merge(prop) {\n    if (prop in config2) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (prop in config1) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys)\n    .concat(directMergeKeys);\n\n  var otherKeys = Object\n    .keys(config1)\n    .concat(Object.keys(config2))\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, mergeDeepProperties);\n\n  return config;\n};\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport omit from \"rc-util/es/omit\";\nimport debounce from 'lodash/debounce';\nimport { ConfigConsumer } from '../config-provider';\nimport { tuple } from '../_util/type';\nimport { isValidElement, cloneElement } from '../_util/reactNode';\nvar SpinSizes = tuple('small', 'default', 'large'); // Render indicator\n\nvar defaultIndicator = null;\n\nfunction renderIndicator(prefixCls, props) {\n  var indicator = props.indicator;\n  var dotClassName = \"\".concat(prefixCls, \"-dot\"); // should not be render default indicator when indicator value is null\n\n  if (indicator === null) {\n    return null;\n  }\n\n  if (isValidElement(indicator)) {\n    return cloneElement(indicator, {\n      className: classNames(indicator.props.className, dotClassName)\n    });\n  }\n\n  if (isValidElement(defaultIndicator)) {\n    return cloneElement(defaultIndicator, {\n      className: classNames(defaultIndicator.props.className, dotClassName)\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: classNames(dotClassName, \"\".concat(prefixCls, \"-dot-spin\"))\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"\".concat(prefixCls, \"-dot-item\")\n  }), /*#__PURE__*/React.createElement(\"i\", {\n    className: \"\".concat(prefixCls, \"-dot-item\")\n  }), /*#__PURE__*/React.createElement(\"i\", {\n    className: \"\".concat(prefixCls, \"-dot-item\")\n  }), /*#__PURE__*/React.createElement(\"i\", {\n    className: \"\".concat(prefixCls, \"-dot-item\")\n  }));\n}\n\nfunction shouldDelay(spinning, delay) {\n  return !!spinning && !!delay && !isNaN(Number(delay));\n}\n\nvar Spin = /*#__PURE__*/function (_React$Component) {\n  _inherits(Spin, _React$Component);\n\n  var _super = _createSuper(Spin);\n\n  function Spin(props) {\n    var _this;\n\n    _classCallCheck(this, Spin);\n\n    _this = _super.call(this, props);\n\n    _this.debouncifyUpdateSpinning = function (props) {\n      var _ref = props || _this.props,\n          delay = _ref.delay;\n\n      if (delay) {\n        _this.cancelExistingSpin();\n\n        _this.updateSpinning = debounce(_this.originalUpdateSpinning, delay);\n      }\n    };\n\n    _this.updateSpinning = function () {\n      var spinning = _this.props.spinning;\n      var currentSpinning = _this.state.spinning;\n\n      if (currentSpinning !== spinning) {\n        _this.setState({\n          spinning: spinning\n        });\n      }\n    };\n\n    _this.renderSpin = function (_ref2) {\n      var _classNames;\n\n      var getPrefixCls = _ref2.getPrefixCls,\n          direction = _ref2.direction;\n\n      var _a = _this.props,\n          customizePrefixCls = _a.prefixCls,\n          className = _a.className,\n          size = _a.size,\n          tip = _a.tip,\n          wrapperClassName = _a.wrapperClassName,\n          style = _a.style,\n          restProps = __rest(_a, [\"prefixCls\", \"className\", \"size\", \"tip\", \"wrapperClassName\", \"style\"]);\n\n      var spinning = _this.state.spinning;\n      var prefixCls = getPrefixCls('spin', customizePrefixCls);\n      var spinClassName = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-sm\"), size === 'small'), _defineProperty(_classNames, \"\".concat(prefixCls, \"-lg\"), size === 'large'), _defineProperty(_classNames, \"\".concat(prefixCls, \"-spinning\"), spinning), _defineProperty(_classNames, \"\".concat(prefixCls, \"-show-text\"), !!tip), _defineProperty(_classNames, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames), className); // fix https://fb.me/react-unknown-prop\n\n      var divProps = omit(restProps, ['spinning', 'delay', 'indicator']);\n      var spinElement = /*#__PURE__*/React.createElement(\"div\", _extends({}, divProps, {\n        style: style,\n        className: spinClassName\n      }), renderIndicator(prefixCls, _this.props), tip ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-text\")\n      }, tip) : null);\n\n      if (_this.isNestedPattern()) {\n        var containerClassName = classNames(\"\".concat(prefixCls, \"-container\"), _defineProperty({}, \"\".concat(prefixCls, \"-blur\"), spinning));\n        return /*#__PURE__*/React.createElement(\"div\", _extends({}, divProps, {\n          className: classNames(\"\".concat(prefixCls, \"-nested-loading\"), wrapperClassName)\n        }), spinning && /*#__PURE__*/React.createElement(\"div\", {\n          key: \"loading\"\n        }, spinElement), /*#__PURE__*/React.createElement(\"div\", {\n          className: containerClassName,\n          key: \"container\"\n        }, _this.props.children));\n      }\n\n      return spinElement;\n    };\n\n    var spinning = props.spinning,\n        delay = props.delay;\n    var shouldBeDelayed = shouldDelay(spinning, delay);\n    _this.state = {\n      spinning: spinning && !shouldBeDelayed\n    };\n    _this.originalUpdateSpinning = _this.updateSpinning;\n\n    _this.debouncifyUpdateSpinning(props);\n\n    return _this;\n  }\n\n  _createClass(Spin, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.updateSpinning();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.debouncifyUpdateSpinning();\n      this.updateSpinning();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cancelExistingSpin();\n    }\n  }, {\n    key: \"cancelExistingSpin\",\n    value: function cancelExistingSpin() {\n      var updateSpinning = this.updateSpinning;\n\n      if (updateSpinning && updateSpinning.cancel) {\n        updateSpinning.cancel();\n      }\n    }\n  }, {\n    key: \"isNestedPattern\",\n    value: function isNestedPattern() {\n      return !!(this.props && typeof this.props.children !== 'undefined');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(ConfigConsumer, null, this.renderSpin);\n    }\n  }], [{\n    key: \"setDefaultIndicator\",\n    value: function setDefaultIndicator(indicator) {\n      defaultIndicator = indicator;\n    }\n  }]);\n\n  return Spin;\n}(React.Component);\n\nSpin.defaultProps = {\n  spinning: true,\n  size: 'default',\n  wrapperClassName: ''\n};\nexport default Spin;","import config from '@/axios/config';\nimport axios from 'axios';\n\nexport async function uploadData(formData) {\n    return new Promise((reslove, reject) => {\n        axios({\n            method: \"post\",\n            url: `${config.url.uploadData}`,\n            config: {\n                \"headers\": {\n                    'Content-Type': 'multipart/form-data' //application/json; charset=utf-8\n                },\n            },\n            data: formData\n        }).then((response) => {\n            if (response.status >= 400) {\n                reject();\n            } else if (response.status === 200 || response.status === 201 || response.status === 204) {\n                reslove(response.data);\n            } else {\n                reject();\n            }\n        }).catch(error => {\n            reject();\n            //  message.error('error message');\n        })\n    })\n}\n\n\nexport function generate(data) {\n    return axios({\n        method: \"post\",\n        url: `${config.url.generate}`,\n        config: {\n            \"headers\": {\n                'Content-Type': 'application/json; charset=utf-8'\n            },\n        },\n        data: data\n    })\n}\n\nexport function getQuestions(data) {\n    return axios({\n        method: \"post\",\n        url: `${config.url.candidateQuestions}`,\n        config: {\n            \"headers\": {\n                'Content-Type': 'application/json; charset=utf-8'\n            },\n        },\n        data: data\n    })\n}\nexport function factScoring(filename, fact, method) {\n    return axios({\n        \"method\": \"POST\",\n        \"url\": config.url.factScoring,\n        \"headers\": {\n            \"Content-Type\": \"application/json; charset=utf-8\"\n        },\n        \"data\": {\n            \"file_name\": filename,\n            \"fact\": fact,\n            \"method\": method,\n        }\n    })\n}\n\nexport async function shareStory(jsonstring) {\n    return new Promise((reslove, reject) => {\n        axios({\n            method: \"post\",\n            url: `${config.url.share}`,\n            config: {\n                \"headers\": {\n                    'Content-Type': 'application/json; charset=utf-8'\n                },\n            },\n            data: {\n                \"share_json\": jsonstring\n            }\n        }).then((response) => {\n            if (response.status >= 400) {\n                reject();\n            } else if (response.status === 200 || response.status === 201 || response.status === 204) {\n                reslove(response.data);\n            } else {\n                reject();\n            }\n        }).catch(error => {\n            reject();\n            //  message.error('error message');\n        })\n    })\n}\n\nexport async function fetchStory(id) {\n    return axios({\n        method: \"get\",\n        \"url\": `${config.url.fetch}/${id}.json`,\n        config: {\n            \"headers\": {\n                'Content-Type': 'application/json; charset=utf-8'\n            },\n        }\n    })\n}\n/*****\n *技术栈：\n ssr(后端渲染)，koa(koa-views)：模板渲染，渲染出要生成pdf的页面)\n node.js 生成pdf插件 puppeteer：将渲染的页面生成PDF\n koa-send：将生成的PDF返回给前端页面下载 \n * \n data是后端用于渲染页面的数据\n */\nexport function generatePDF(data) {\n    return axios({\n        method: 'post',\n        url: `/generatePDF`,\n        param: {},\n        data: data\n    })\n}\n","export default {\n    NUMERICAL: 'numerical',\n    CATEGORICAL: 'categorical',\n    TEMPORAL: 'temporal',\n    GEOGRAPHICAL: 'geographical',\n}","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","import { fact2visAllRules } from './fact2visAllRule';\n\nconst getSuitableBreakdownList = (factType, chartType, schema) => {\n    //acording to factType ---> filter\n    let suitableBreakdownList = fact2visAllRules.filter(x => x.fact === factType);\n\n    //if has choosed chartType ---> filter\n    if (chartType) {\n        suitableBreakdownList = suitableBreakdownList.filter(x => x.chart === chartType);\n    }\n    if (suitableBreakdownList.length === 0) return [];\n    let breakdownSets = new Set();\n    suitableBreakdownList.forEach(x => {\n        x.breakdownType.forEach(type => {\n            breakdownSets.add(type)\n        })\n    })\n    let breakdownList = Array.from(breakdownSets);\n    //console.log(\"suitableBreakdownList\", breakdownList)\n    let suitableSchema = schema.filter(s => {\n        return breakdownList.indexOf(s.type) !== -1\n    })\n    // suitableSchema = suitableSchema.map(shema => {\n    //     return shema.field\n    // })\n    //console.log(\"suitableSchema\", suitableSchema)\n    return suitableSchema;\n};\nexport default getSuitableBreakdownList;","const datafilter = (data, subspace) => {\n    let filteredData = data;\n    for (const sub of subspace) {\n        filteredData = filteredData.filter((x)=>x[sub.field]===sub.value)\n    }\n    return filteredData\n}\n\nexport default datafilter;","import FactType from '@/constant/FactType'\nimport getSuitableBreakdownList from './getSuitableBreakdownList';\nimport datafilter from './datafilter';\nimport * as d3 from 'd3';\n// import _ from 'lodash';\n\n// chart valid\nexport const isValid = function (fact) {\n    let isValid = false;\n    switch (fact.type) {\n        case FactType.ASSOCIATION:\n            if (fact.measure.length === 2)\n                isValid = true\n            break;\n\n        case FactType.CATEGORIZATION:\n            if (fact.groupby.length)\n                isValid = true\n            break;\n\n        case FactType.DIFFERENCE:\n            if (fact.measure.length && fact.groupby.length && fact.focus.length >= 2)\n                isValid = true\n            break;\n\n        case FactType.DISTRIBUTION:\n            if (fact.measure.length && fact.groupby.length)\n                isValid = true\n            break;\n\n        case FactType.EXTREME:\n            if (fact.measure.length && fact.groupby.length && fact.focus.length)\n                isValid = true\n            break;\n\n        case FactType.OUTLIER:\n            if (fact.measure.length && fact.groupby.length && fact.focus.length)\n                isValid = true\n            break;\n\n        case FactType.PROPORTION:\n            if (fact.measure.length && fact.groupby.length && fact.focus.length)\n                isValid = true\n            break;\n\n        case FactType.RANK:\n            if (fact.measure.length && fact.groupby.length)\n                isValid = true\n            break;\n\n        case FactType.TREND:\n            if (fact.measure.length && fact.groupby.length)\n                isValid = true\n            break;\n\n        case FactType.VALUE:\n            if (fact.measure.length)\n                isValid = true\n            break;\n\n        default:\n            break;\n    }\n    return isValid\n}\n\n/***\n * 清空不必要的fact属性\n ***/\nexport const customizeFact = function (fact, schema, data) {\n    let newFact = Object.assign({}, fact)\n    switch (fact.type) {\n        case FactType.ASSOCIATION:\n            newFact.focus = [];\n            if (schema && data) {\n                const groupbyList = getSuitableBreakdownList(fact.type, fact.chart, schema);\n                if (newFact.groupby.length === 0 && groupbyList.length > 0) {\n                    newFact.groupby = [groupbyList[0].field];\n                }\n                const measureList = schema.filter(key => key['type'] === \"numerical\");\n                if (newFact.measure.length === 0 && measureList.length > 0) {\n                    newFact.measure = [{ \"field\": measureList[0].field, \"aggregate\": \"count\" }];\n                }\n                if (newFact.measure.length === 1) {\n                    newFact.measure.push({ \"field\": 'COUNT', \"aggregate\": \"count\" });\n                }\n            }\n            break;\n\n        case FactType.CATEGORIZATION:\n            newFact.measure = []\n            newFact.focus = []\n            if (schema && data) {\n                const groupbyList = getSuitableBreakdownList(fact.type, fact.chart, schema);\n                if (newFact.groupby.length === 0 && groupbyList.length > 0) {\n                    newFact.groupby = [groupbyList[0].field];\n                }\n            }\n            break;\n\n        case FactType.DIFFERENCE:\n            if (schema && data) {\n                const groupbyList = getSuitableBreakdownList(fact.type, fact.chart, schema),\n                    gbValueList = getFieldValue(data, fact.groupby);\n                if (newFact.groupby.length === 0 && groupbyList.length > 0) {\n                    newFact.groupby = [groupbyList[0].field];\n                }\n                if (newFact.measure.length === 0) {\n                    newFact.measure = [{ \"field\": 'COUNT', \"aggregate\": \"count\" }];\n                }\n                /***** 设默认为第1、2条，并且更新到fact中 *****/\n                if (!newFact.focus.length) {\n                    newFact.focus = [{\n                        field: newFact.groupby[0],\n                        value: gbValueList[0],\n                    },\n                    {\n                        field: newFact.groupby[0],\n                        value: gbValueList[1],\n                    }\n                    ]\n                }\n            }\n            break;\n\n        case FactType.DISTRIBUTION:\n            newFact.focus = []\n            if (schema && data) {\n                const groupbyList = getSuitableBreakdownList(fact.type, fact.chart, schema);\n                if (newFact.groupby.length === 0 && groupbyList.length > 0) {\n                    newFact.groupby = [groupbyList[0].field];\n                }\n                if (newFact.measure.length === 0) {\n                    newFact.measure = [{ \"field\": 'COUNT', \"aggregate\": \"count\" }];\n                }\n            }\n            break;\n\n        case FactType.EXTREME:\n            if (schema && data) {\n                const groupbyList = getSuitableBreakdownList(fact.type, fact.chart, schema);\n                if (newFact.groupby.length === 0 && groupbyList.length > 0) {\n                    newFact.groupby = [groupbyList[0].field];\n                }\n                if (newFact.measure.length === 0) {\n                    newFact.measure = [{ \"field\": 'COUNT', \"aggregate\": \"count\" }];\n                }\n                // aggregation\n                if (newFact.measure.length && newFact.groupby.length) {\n                    let encoding = {}\n                    encoding['y'] = {};\n                    encoding['y']['field'] = newFact.measure[0].field;\n                    encoding['y']['aggregation'] = newFact.measure[0].aggregate;\n                    encoding['x'] = {};\n                    encoding['x']['field'] = newFact.groupby[0];\n                    let filteredData = datafilter(data, newFact.subspace)\n                    let aggregatedRows = getAggregatedRows(filteredData, encoding);\n                    // filter gbValueList\n                    let measureField = newFact.measure[0]['field'];\n                    let max = aggregatedRows.reduce((a, b) => (a[measureField] > b[measureField]) ? a : b);\n\n                    /***** 设默认为max，并且更新到fact中 *****/\n                    if (!newFact.focus.length) {\n                        newFact.focus = [{\n                            field: newFact.groupby[0],\n                            value: max[newFact.groupby[0]],\n                            extremeFocus: 'max',\n                            extremeValue: max[newFact.measure[0].field]\n                        }]\n                    }\n                }\n            }\n            break;\n\n        case FactType.OUTLIER:\n            if (schema && data) {\n                const groupbyList = getSuitableBreakdownList(fact.type, fact.chart, schema);\n                if (newFact.groupby.length === 0 && groupbyList.length > 0) {\n                    newFact.groupby = [groupbyList[0].field];\n                }\n                if (newFact.measure.length === 0) {\n                    newFact.measure = [{ \"field\": 'COUNT', \"aggregate\": \"count\" }];\n                }\n                // aggregation\n                if (newFact.measure.length && newFact.groupby.length) {\n                    let encoding = {}\n                    encoding['y'] = {};\n                    encoding['y']['field'] = newFact.measure[0].field;\n                    encoding['y']['aggregation'] = newFact.measure[0].aggregate;\n                    encoding['x'] = {};\n                    encoding['x']['field'] = newFact.groupby[0];\n                    let filteredData = datafilter(data, newFact.subspace)\n                    let aggregatedRows = getAggregatedRows(filteredData, encoding);\n                    // filter gbValueList\n                    let newOrder = aggregatedRows.sort(function (a, b) { return b[encoding.y.field] - a[encoding.y.field]; }).map(function (d) { return d[encoding.x.field]; })\n                    let newOrderValue = aggregatedRows.sort(function (a, b) { return b[encoding.y.field] - a[encoding.y.field]; }).map(function (d) { return d[encoding.y.field]; })\n\n                    let n = newOrderValue.length\n                    // 整数部分\n                    let posQ3 = parseInt((n - 1) * 0.25)\n                    let posQ1 = parseInt((n - 1) * 0.75)\n                    // 小数部分\n                    let decimalQ3 = (n - 1) * 0.25 - posQ3\n                    let decimalQ1 = (n - 1) * 0.75 - posQ1\n                    let Q3 = newOrderValue[posQ3] + (newOrderValue[posQ3 + 1] - newOrderValue[posQ3]) * decimalQ3\n                    let Q1 = newOrderValue[posQ1] + (newOrderValue[posQ1 + 1] - newOrderValue[posQ1]) * decimalQ1\n\n                    let Low = Q1 - 1.5 * (Q3 - Q1)\n                    let Up = Q3 + 1.5 * (Q3 - Q1)\n                    let outlierIndex = []\n                    newOrderValue.forEach((d, i) => {\n                        if (d > Up || d < Low) {\n                            outlierIndex.push(i)\n                        }\n                    });\n\n                    /***** 设默认为outlier，并且更新到fact中 *****/\n                    if (!newFact.focus.length && outlierIndex.length) {\n                        newFact.focus = [{\n                            field: fact.groupby[0],\n                            value: newOrder[outlierIndex[0]],\n                        }]\n                    }\n                }\n            }\n            break;\n\n        case FactType.PROPORTION:\n            if (schema && data) {\n                const groupbyList = getSuitableBreakdownList(fact.type, fact.chart, schema);\n                if (newFact.groupby.length === 0 && groupbyList.length > 0) {\n                    newFact.groupby = [groupbyList[0].field];\n                }\n\n                if (newFact.measure.length === 0) {\n                    newFact.measure = [{ \"field\": 'COUNT', \"aggregate\": \"count\" }];\n                }\n                if (newFact.measure.length && newFact.groupby.length) {\n                    // aggregation\n                    let encoding = {}\n                    encoding['y'] = {};\n                    encoding['y']['field'] = newFact.measure[0].field;\n                    encoding['y']['aggregation'] = newFact.measure[0].aggregate;\n                    encoding['x'] = {};\n                    encoding['x']['field'] = newFact.groupby[0];\n                    let filteredData = datafilter(data, newFact.subspace)\n                    let aggregatedRows = getAggregatedRows(filteredData, encoding);\n                    // filter gbValueList\n                    let measureField = newFact.measure[0]['field'];\n                    let max = aggregatedRows.reduce((a, b) => (a[measureField] > b[measureField]) ? a : b)\n\n                    /***** 设默认为max，并且更新到fact中 *****/\n                    if (!newFact.focus.length) {\n                        newFact.focus = [{\n                            field: newFact.groupby[0],\n                            value: max[newFact.groupby[0]],\n                        }]\n                    }\n                }\n            }\n            break;\n\n        case FactType.RANK:\n            newFact.focus = []\n            if (schema && data) {\n                const groupbyList = getSuitableBreakdownList(newFact.type, newFact.chart, schema);\n                if (newFact.groupby.length === 0 && groupbyList.length > 0) {\n                    newFact.groupby = [groupbyList[0].field];\n                }\n                if (newFact.measure.length === 0) {\n                    newFact.measure = [{ \"field\": 'COUNT', \"aggregate\": \"count\" }];\n                }\n                // if (newFact.measure.length && newFact.groupby.length) {\n                //     // aggregation\n                //     let encoding = {}\n                //     encoding['y'] = {};\n                //     encoding['y']['field'] = newFact.measure[0].field;\n                //     encoding['y']['aggregation'] = newFact.measure[0].aggregate;\n                //     encoding['x'] = {};\n                //     encoding['x']['field'] = newFact.groupby[0];\n                //     let filteredData = datafilter(data, newFact.subspace)\n                //     let aggregatedRows = getAggregatedRows(filteredData, encoding);\n                //     // filter gbValueList\n                //     let newOrder = aggregatedRows.sort(function (a, b) { return b[encoding.y.field] - a[encoding.y.field]; }).map(function (d) { return d[encoding.x.field]; })\n\n                //     /***** 设默认为前3，并且更新到fact中 *****/\n\n                //     let focus = []\n                //     newOrder.forEach((d, i) => {\n                //         if (i < 3) {\n                //             focus.push({ field: fact.groupby[0], value: d })\n                //         }\n                //     });\n                //     if(!_.isEqual(focus, newFact.focus)){\n                //         newFact.focus = focus;\n                //     }\n                // }\n            }\n            break;\n\n        case FactType.TREND:\n            newFact.focus = [];\n            if (schema && data) {\n                let groupbyList = schema.filter(key => key['type'] === \"temporal\")\n                const groupbyFieldList = groupbyList.map((d) => d.field);\n                if (groupbyList.length === 0) {\n                    newFact.groupby = []\n                } else if (newFact.groupby.length === 0 || groupbyFieldList.indexOf(newFact.groupby[0]) === -1) {\n                    newFact.groupby = [groupbyList[0].field];\n                }\n\n                if (newFact.measure.length === 0) {\n                    newFact.measure = [{ \"field\": 'COUNT', \"aggregate\": \"count\" }];\n                }\n            }\n            break;\n\n        case FactType.VALUE:\n            newFact.groupby = []\n            newFact.focus = []\n            if (schema && data) {\n                if (newFact.measure.length === 0) {\n                    newFact.measure = [{ \"field\": 'COUNT', \"aggregate\": \"count\" }];\n                }\n            }\n            break;\n\n        default:\n            break;\n    }\n    return newFact\n}\n\n// fact valid for score to update(RANK/PROPORTION/OUTLIER/DIFFERENCE)\n//NO USE FOR A MOMENT!!!!!\nexport const isFactValid = function (_fact) {\n    let fact = Object.assign({}, _fact)\n    let isFactValid = false;\n    switch (fact.type) {\n        case FactType.ASSOCIATION:\n            if (fact.measure.length === 2 && fact.groupby)\n                isFactValid = true\n            break;\n\n        case FactType.CATEGORIZATION:\n            if (fact.groupby)\n                isFactValid = true\n            break;\n\n        case FactType.DIFFERENCE:\n            if (fact.measure && fact.groupby && fact.focus.length >= 2)\n                isFactValid = true\n            break;\n\n        case FactType.DISTRIBUTION:\n            if (fact.measure && fact.groupby)\n                isFactValid = true\n            break;\n\n        case FactType.EXTREME:\n            if (fact.measure && fact.groupby)\n                isFactValid = true\n            break;\n\n        case FactType.OUTLIER:\n            if (fact.measure && fact.groupby && fact.focus.length)\n                isFactValid = true\n            break;\n\n        case FactType.PROPORTION:\n            if (fact.measure && fact.groupby && fact.focus.length)\n                isFactValid = true\n            break;\n\n        case FactType.RANK:\n            if (fact.measure.length && fact.groupby.length && fact.focus.length >= 3)\n                isFactValid = true\n            break;\n\n        case FactType.TREND:\n            if (fact.measure && fact.groupby)\n                isFactValid = true\n            break;\n\n        case FactType.VALUE:\n            if (fact.measure)\n                isFactValid = true\n            break;\n\n        default:\n            break;\n    }\n    return isFactValid\n}\n\nconst getCountRows = (rawData, encoding) => {\n    let calculateData = d3.nest().key(d => d[encoding.x.field]).entries(rawData);\n    let countData = new Array(calculateData.length).fill(0);\n    let data = calculateData.map(function (d, i) {\n        d.values.forEach(() => {\n            countData[i] += 1\n        })\n        let countRows = Object.assign({}, d.values[0])\n        countRows['COUNT'] = countData[i]\n        return countRows\n    });\n    return data;\n}\n\nconst getMinRows = (rawData, encoding) => {\n    let calculateData = d3.nest().key(d => d[encoding.x.field]).entries(rawData);\n    let data = calculateData.map(function (d) {\n        let index = d3.scan(d.values, function (a, b) {\n            if (a[encoding.y.field] && b[encoding.y.field])\n                return a[encoding.y.field] - b[encoding.y.field];\n        });\n        if (index >= 0) {\n            return d.values[index]\n        } else {\n            return d.values[0]\n        }\n    });\n    return data;\n}\n\nconst getMaxRows = (rawData, encoding) => {\n    let calculateData = d3.nest().key(d => d[encoding.x.field]).entries(rawData);\n    let data = calculateData.map(function (d, i) {\n        let index = d3.scan(d.values, function (a, b) {\n            if (a[encoding.y.field] && b[encoding.y.field])\n                return b[encoding.y.field] - a[encoding.y.field];\n        });\n        if (index >= 0) {\n            return d.values[index]\n        } else {\n            return d.values[0];\n        }\n    });\n    return data;\n}\n\nconst getSumRows = (rawData, encoding) => {\n    let calculateData = d3.nest().key(d => d[encoding.x.field]).entries(rawData);\n    let sumData = new Array(calculateData.length).fill(0);\n    let data = calculateData.map(function (d, i) {\n        d.values.forEach(d => {\n            sumData[i] += d[encoding.y.field]\n        })\n        let sumRows = Object.assign({}, d.values[0])\n        sumRows[encoding.y.field] = sumData[i]\n        return sumRows\n    });\n    return data;\n}\n\nconst getAverageRows = (rawData, encoding) => {\n    let calculateData = d3.nest().key(d => d[encoding.x.field]).entries(rawData);\n    let sumData = new Array(calculateData.length).fill(0);\n    let data = calculateData.map(function (d, i) {\n        d.values.forEach(d => {\n            sumData[i] += d[encoding.y.field]\n        })\n        let sumRows = Object.assign({}, d.values[0])\n        sumRows[encoding.y.field] = sumData[i] / d.values.length;\n        return sumRows;\n    });\n    return data;\n}\n\nconst getAggregatedRows = (rawData, encoding) => {\n    let data;\n    switch (encoding.y.aggregation) {\n        case 'sum':\n            data = getSumRows(rawData, encoding);\n            break;\n        case 'avg':\n            data = getAverageRows(rawData, encoding);\n            break;\n        case 'max':\n            data = getMaxRows(rawData, encoding);\n            break;\n        case 'min':\n            data = getMinRows(rawData, encoding);\n            break;\n        case 'count':\n            data = getCountRows(rawData, encoding)\n            break;\n\n        default:\n            data = getMaxRows(rawData, encoding);\n            break;\n    }\n    return data;\n}\n\nconst getFieldValue = (rawData, fieldName) => {\n    if (fieldName)\n        return Array.from(new Set(rawData.map(d => d[fieldName])));\n    else return []\n}","module.exports = require('./lib/axios');","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\nvar isAbsoluteURL = require('../helpers/isAbsoluteURL');\nvar combineURLs = require('../helpers/combineURLs');\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","import FactType from '@/constant/FactType';\nimport ChartType from '@/constant/ChartType';\nimport FieldType from '@/constant/FieldType';\n//权重\nexport const fact2visAllRules = [\n    //association \n    {\n        \"fact\": FactType.ASSOCIATION,\n        \"chart\": ChartType.SCATTER_PLOT,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL, FieldType.GEOGRAPHICAL]\n    },\n    //outlier\n    {\n        \"fact\": FactType.OUTLIER,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL, FieldType.GEOGRAPHICAL],\n        //\"rang\": [0, 9]\n    },\n    {\n        \"fact\": FactType.OUTLIER,\n        \"chart\": ChartType.AREA_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL]\n    },\n    {\n        \"fact\": FactType.OUTLIER,\n        \"chart\": ChartType.LINE_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL]\n    },\n    // {\n    //     \"fact\": FactType.OUTLIER,\n    //     \"chart\": ChartType.BUBBLE_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    //     \"rang\": [6, 9]\n    // },\n    // {\n    //     \"fact\": FactType.OUTLIER,\n    //     \"chart\": ChartType.COLOR_FILLING_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.OUTLIER,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    //extreme\n    {\n        \"fact\": FactType.EXTREME,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL, FieldType.GEOGRAPHICAL],\n        //\"rang\": [0, 9]\n    },\n    // {\n    //     \"fact\": FactType.EXTREME,\n    //     \"chart\": ChartType.TEXT_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    // },\n    {\n        \"fact\": FactType.EXTREME,\n        \"chart\": ChartType.LINE_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL],\n    },\n    {\n        \"fact\": FactType.EXTREME,\n        \"chart\": ChartType.AREA_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL],\n    },\n    // {\n    //     \"fact\": FactType.EXTREME,\n    //     \"chart\": ChartType.COLOR_FILLING_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.EXTREME,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    //proportion\n    {\n        \"fact\": FactType.PROPORTION,\n        \"chart\": ChartType.PROGRESS_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.GEOGRAPHICAL, FieldType.TEMPORAL],\n    },\n    // {\n    //     \"fact\": FactType.PROPORTION,\n    //     \"chart\": ChartType.TREE_MAP,\n    //     \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    // },\n    // {\n    //     \"fact\": FactType.PROPORTION,\n    //     \"chart\": ChartType.RING_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    // },\n    {\n        \"fact\": FactType.PROPORTION,\n        \"chart\": ChartType.PIE_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.GEOGRAPHICAL, FieldType.TEMPORAL],\n    },\n    // {\n    //     \"fact\": FactType.PROPORTION,\n    //     \"chart\": ChartType.COLOR_FILLING_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.PROPORTION,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.PROPORTION,\n    //     \"chart\": ChartType.VERTICAL_BAR_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    //     \"rang\": [0, 9]\n    // },\n\n    //rank\n    {\n        \"fact\": FactType.RANK,\n        \"chart\": ChartType.HORIZONTAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.GEOGRAPHICAL, FieldType.TEMPORAL],\n    },\n    // {\n    //     \"fact\": FactType.RANK,\n    //     \"chart\": ChartType.COLOR_FILLING_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.RANK,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.RANK,\n    //     \"chart\": ChartType.LINE_CHART,\n    //     \"breakdownType\": [FieldType.TEMPORAL],\n    // },\n    //distribution\n    // {\n    //     \"fact\": FactType.DISTRIBUTION,\n    //     \"chart\": ChartType.COLOR_FILLING_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.DISTRIBUTION,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.DISTRIBUTION,\n    //     \"chart\": ChartType.BUBBLE_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    // },\n    {\n        \"fact\": FactType.DISTRIBUTION,\n        \"chart\": ChartType.AREA_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL],\n    },\n    // {\n    //     \"fact\": FactType.DISTRIBUTION,\n    //     \"chart\": ChartType.TREE_MAP,\n    //     \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    //     \"rang\": [6, 10000]\n    // },\n    {\n        \"fact\": FactType.DISTRIBUTION,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.GEOGRAPHICAL],\n        //\"rang\": [0, 9]\n    },\n    // {\n    //     \"fact\": FactType.DISTRIBUTION,\n    //     \"chart\": ChartType.HORIZONTAL_BAR_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    // },\n    // {\n    //     \"fact\": FactType.DISTRIBUTION,\n    //     \"chart\": ChartType.PIE_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    // },\n    //difference\n    // {\n    //     \"fact\": FactType.DIFFERENCE,\n    //     \"chart\": ChartType.COLOR_FILLING_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.DIFFERENCE,\n    //     \"chart\": ChartType.VERTICAL_BAR_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    //     // \"rang\": [0, 9]\n    // },\n    // {\n    //     \"fact\": FactType.DIFFERENCE,\n    //     \"chart\": ChartType.TEXT_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    // },\n    // {\n    //     \"fact\": FactType.DIFFERENCE,\n    //     \"chart\": ChartType.PIE_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    // },\n    {\n        \"fact\": FactType.DIFFERENCE,\n        \"chart\": ChartType.HORIZONTAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.GEOGRAPHICAL, FieldType.TEMPORAL],\n    },\n    // //categorization\n    // {\n    //     \"fact\": FactType.CATEGORIZATION,\n    //     \"chart\": ChartType.COLOR_FILLING_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.CATEGORIZATION,\n    //     \"chart\": ChartType.TREE_MAP,\n    //     \"breakdownType\": [FieldType.CATEGORICAL],\n    //     \"rang\": [6, 10000]\n    // },\n    {\n        \"fact\": FactType.CATEGORIZATION,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.GEOGRAPHICAL],\n       // \"rang\": [0, 9]\n    },\n    // {\n    //     \"fact\": FactType.CATEGORIZATION,\n    //     \"chart\": ChartType.BUBBLE_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL],\n    //     \"rang\": [6, 9]\n    // },\n    //trend\n    {\n        \"fact\": FactType.TREND,\n        \"chart\": ChartType.LINE_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL],\n    },\n    // {\n    //     \"fact\": FactType.TREND,\n    //     \"chart\": ChartType.AREA_CHART,\n    //     \"breakdownType\": [FieldType.TEMPORAL],\n    // },\n    // {\n    //     \"fact\": FactType.TREND,\n    //     \"chart\": ChartType.VERTICAL_BAR_CHART,\n    //     //\"rang\": [0, 9],\n    //     \"breakdownType\": [FieldType.TEMPORAL, FieldType.CATEGORICAL, FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.TREND,\n    //     \"chart\": ChartType.HORIZONTAL_BAR_CHART,\n    //     \"rang\": [0, 9],\n    //     \"breakdownType\": [FieldType.TEMPORAL],\n    // },\n    // {\n    //     \"fact\": FactType.TREND,\n    //     \"chart\": ChartType.BUBBLE_CHART,\n    //     \"rang\": [6, 9],\n    //     \"breakdownType\": [FieldType.TEMPORAL, FieldType.TEMPORAL],\n    // },\n    // {\n    //     \"fact\": FactType.TREND,\n    //     \"chart\": ChartType.SCATTER_PLOT,\n    //     \"breakdownType\": [FieldType.TEMPORAL],\n    // },\n    //value\n    // {\n    //     \"fact\": FactType.VALUE,\n    //     \"chart\": ChartType.TEXT_CHART,\n    //     \"breakdownType\": [],\n    // },\n    // {\n    //     \"fact\": FactType.VALUE,\n    //     \"chart\": ChartType.HORIZONTAL_BAR_CHART,\n    //     \"breakdownType\": [],\n    // },\n    {\n        \"fact\": FactType.VALUE,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        // \"rang\": [0, 9],\n        //\"breakdownType\": [FieldType.TEMPORAL, FieldType.CATEGORICAL, FieldType.GEOGRAPHICAL],\n    },\n    // {\n    //     \"fact\": FactType.VALUE,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    //     \"breakdownType\": [],\n    // },\n    // {\n    //     \"fact\": FactType.VALUE,\n    //     \"chart\": ChartType.COLOR_FILLING_MAP,\n    //     \"breakdownType\": [],\n    // }\n]","import FactType from '@/constant/FactType';\nimport ChartType from '@/constant/ChartType';\nimport FieldType from '@/constant/FieldType';\n//权重\nexport const fact2visRules = [\n    //association \n    {\n        \"fact\": FactType.ASSOCIATION,\n        \"chart\": ChartType.SCATTER_PLOT,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL, FieldType.GEOGRAPHICAL]\n    },\n    //outlier\n    // {\n    //     \"fact\": FactType.OUTLIER,\n    //     \"chart\": ChartType.VERTICAL_BAR_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL, FieldType.CATEGORICAL],\n    //     // \"rang\": [0, 9]\n    // },\n    {\n        \"fact\": FactType.OUTLIER,\n        \"chart\": ChartType.AREA_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL]\n    },\n    {\n        \"fact\": FactType.OUTLIER,\n        \"chart\": ChartType.LINE_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL]\n    },\n    // {\n    //     \"fact\": FactType.OUTLIER,\n    //     \"chart\": ChartType.COLOR_FILLING_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    //     // \"rang\": [0, 9]\n    // },\n    // {\n    //     \"fact\": FactType.OUTLIER,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    //     // \"rang\": [0, 9]\n    // },\n    // {\n    //     \"fact\": FactType.OUTLIER,\n    //     \"chart\": ChartType.BUBBLE_CHART,\n    // \"rang\": [6, 9]\n    // },\n    //extreme\n    {\n        \"fact\": FactType.EXTREME,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.CATEGORICAL, FieldType.GEOGRAPHICAL],\n        // \"rang\": [0, 9]\n    },\n    // {\n    //     \"fact\": FactType.EXTREME,\n    //     \"chart\": ChartType.TEXT_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL],\n    // },\n    {\n        \"fact\": FactType.EXTREME,\n        \"chart\": ChartType.LINE_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL],\n    },\n    {\n        \"fact\": FactType.EXTREME,\n        \"chart\": ChartType.AREA_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL],\n    },\n    // {\n    //     \"fact\": FactType.EXTREME,\n    //     \"chart\": ChartType.COLOR_FILLING_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.EXTREME,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    //proportion\n    {\n        \"fact\": FactType.PROPORTION,\n        \"chart\": ChartType.PROGRESS_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.GEOGRAPHICAL],\n    },\n    // {\n    //     \"fact\": FactType.PROPORTION,\n    //     \"chart\": ChartType.RING_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL],\n    // },\n    {\n        \"fact\": FactType.PROPORTION,\n        \"chart\": ChartType.PIE_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.GEOGRAPHICAL],\n    },\n    // {\n    //     \"fact\": FactType.PROPORTION,\n    //     \"chart\": ChartType.COLOR_FILLING_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.PROPORTION,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.PROPORTION,\n    //     \"chart\": ChartType.VERTICAL_BAR_CHART,\n    //\"rang\": [0, 9]\n    // },\n    // {\n    //     \"fact\": FactType.PROPORTION,\n    //     \"chart\": ChartType.TEXT_CHART,\n    // },\n\n    //rank\n    {\n        \"fact\": FactType.RANK,\n        \"chart\": ChartType.HORIZONTAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.GEOGRAPHICAL],\n    },\n    // {\n    //     \"fact\": FactType.RANK,\n    //     \"chart\": ChartType.COLOR_FILLING_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.RANK,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.RANK,\n    //     \"chart\": ChartType.LINE_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL, FieldType.TEMPORAL],\n    // },\n    //distribution\n    // {\n    //     \"fact\": FactType.DISTRIBUTION,\n    //     \"chart\": ChartType.COLOR_FILLING_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.DISTRIBUTION,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    {\n        \"fact\": FactType.DISTRIBUTION,\n        \"chart\": ChartType.AREA_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL],\n    },\n    // {\n    //     \"fact\": FactType.DISTRIBUTION,\n    //     \"chart\": ChartType.TREE_MAP,\n    //     \"breakdownType\": [FieldType.CATEGORICAL],\n    //     \"rang\": [6, 10000]\n    // },\n    {\n        \"fact\": FactType.DISTRIBUTION,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.GEOGRAPHICAL],\n       // \"rang\": [0, 9]\n    },\n    // {\n    //     \"fact\": FactType.DISTRIBUTION,\n    //     \"chart\": ChartType.HORIZONTAL_BAR_CHART,\n    // },\n    // {\n    //     \"fact\": FactType.DISTRIBUTION,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    // },\n    // {\n    //     \"fact\": FactType.DISTRIBUTION,\n    //     \"chart\": ChartType.PIE_CHART,\n    // },\n    // //difference\n    // {\n    //     \"fact\": FactType.DIFFERENCE,\n    //     \"chart\": ChartType.COLOR_FILLING_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.DIFFERENCE,\n    //     \"chart\": ChartType.VERTICAL_BAR_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL],\n    // },\n    // {\n    //     \"fact\": FactType.DIFFERENCE,\n    //     \"chart\": ChartType.TEXT_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL],\n    // },\n    // {\n    //     \"fact\": FactType.DIFFERENCE,\n    //     \"chart\": ChartType.PIE_CHART,\n    // },\n    {\n        \"fact\": FactType.DIFFERENCE,\n        \"chart\": ChartType.HORIZONTAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.GEOGRAPHICAL,FieldType.TEMPORAL],\n    },\n    //categorization\n    // {\n    //     \"fact\": FactType.CATEGORIZATION,\n    //     \"chart\": ChartType.COLOR_FILLING_MAP,\n    //     \"breakdownType\": [FieldType.GEOGRAPHICAL],\n    // },\n    // {\n    //     \"fact\": FactType.CATEGORIZATION,\n    //     \"chart\": ChartType.TREE_MAP,\n    //     \"breakdownType\": [FieldType.CATEGORICAL],\n    //     \"rang\": [6, 10000]\n    // },\n    {\n        \"fact\": FactType.CATEGORIZATION,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n        \"breakdownType\": [FieldType.CATEGORICAL, FieldType.GEOGRAPHICAL],\n        //\"rang\": [0, 9]\n    },\n    // {\n    //     \"fact\": FactType.CATEGORIZATION,\n    //     \"chart\": ChartType.BUBBLE_CHART,\n    //     \"breakdownType\": [FieldType.CATEGORICAL],\n    //     \"rang\": [6, 9]\n    // },\n    //trend\n    {\n        \"fact\": FactType.TREND,\n        \"chart\": ChartType.LINE_CHART,\n        \"breakdownType\": [FieldType.TEMPORAL],\n    },\n    // {\n    //     \"fact\": FactType.TREND,\n    //     \"chart\": ChartType.AREA_CHART,\n    //     \"breakdownType\": [FieldType.TEMPORAL],\n    // },\n    // {\n    //     \"fact\": FactType.TREND,\n    //     \"chart\": ChartType.VERTICAL_BAR_CHART,\n    //     \"rang\": [0, 9]\n    // },\n    // {\n    //     \"fact\": FactType.TREND,\n    //     \"chart\": ChartType.BUBBLE_CHART,\n    //\"rang\": [6, 9]\n    // },\n\n    //value\n    // {\n    //     \"fact\": FactType.VALUE,\n    //     \"chart\": ChartType.TEXT_CHART,\n    //     \"breakdownType\": [],\n    // },\n    // {\n    //     \"fact\": FactType.VALUE,\n    //     \"chart\": ChartType.HORIZONTAL_BAR_CHART,\n    // },\n    {\n        \"fact\": FactType.VALUE,\n        \"chart\": ChartType.VERTICAL_BAR_CHART,\n    },\n    // {\n    //     \"fact\": FactType.VALUE,\n    //     \"chart\": ChartType.BUBBLE_MAP,\n    // },\n    // {\n    //     \"fact\": FactType.VALUE,\n    //     \"chart\": ChartType.COLOR_FILLING_MAP,\n    // }\n]","import {\n    fact2visRules\n} from './fact2visRule';\nimport {\n    fact2visAllRules\n} from './fact2visAllRule';\nimport FieldType from '@/constant/FieldType';\n\n/****\n * 过滤规则： 根据fact.type 和 breakDown.type 筛选支持的图表\n * 其中isEdit===false表示生成阶段，生成阶段优先在推荐规则中过滤，如果找不到，会在全部支持的规则中过滤\n *     isEdit===ture表示编辑阶段，在全部支持的规则中过滤\n */\n\nconst getSupportedChartTypes = (fact, schema, isEdit = false) => {  \n    \n    let breakDown = schema.filter(s => s[\"field\"] === fact.groupby[0])[0];\n    let supportedChartTypes;\n    let rules = isEdit ? fact2visAllRules : fact2visRules;//fact2visRules是推荐规则 \n    supportedChartTypes = rules.filter(x => x.fact === fact.type);\n    if (breakDown) {\n        supportedChartTypes = supportedChartTypes.filter(x => x.breakdownType.indexOf(breakDown.type) !== -1);\n        if (breakDown.type === FieldType.CATEGORICAL && breakDown.values) {\n            supportedChartTypes = supportedChartTypes.filter(x => {\n                if (!x.rang) {\n                    return true\n                } else {\n                    return breakDown.values.length >= x.rang[0] && breakDown.values.length <= x.rang[1]\n                }\n            });\n        }\n        /*******important**** 找不到推荐的图表，就用可以支持的图表显示*****/\n        if (supportedChartTypes.length === 0 && !isEdit) {\n            supportedChartTypes = getSupportedChartTypes(fact, schema, true)\n        }\n        /*******important the end *********/\n    }\n    //console.log(\"supportedChartTypes\", supportedChartTypes)\n    return supportedChartTypes;\n};\nexport default getSupportedChartTypes;","import React, { Component } from 'react';\nimport { AutoVis } from \"calliope-chart\";\n\nexport default class Chart extends Component {\n\n    componentDidMount() {\n        const { id } = this.props.spec.chart;\n        let spec = this.props.spec;\n        let container = id ? `#vischart_${id}` : \"#demo-chart\";\n        this.autovis = new AutoVis();\n        this.autovis = new AutoVis();\n        this.autovis.container(container);\n        this.autovis.load(spec);\n        this.autovis.generate();\n    }\n\n    componentDidUpdate(preProps) {\n        const { id } = this.props.spec.chart;\n        let spec = this.props.spec;\n        let container = id ? `#vischart_${id}` : \"#demo-chart\";\n        this.autovis = new AutoVis();\n        this.autovis = new AutoVis();\n        this.autovis.container(container);\n        this.autovis.load(spec);\n        this.autovis.generate();\n    }\n\n    render() {\n        let height = 640, width = 640;\n        if (this.props.spec.chart) {\n            let { size, type } = this.props.spec.chart;\n            if (type === 'vegalite') {\n                let vega_w = this.props.spec.chart.width,\n                    vega_h = this.props.spec.chart.height;\n                height = vega_h * 0.5\n                width = vega_w * 0.5\n            } else {\n                switch (size) {\n                    case 'wide':\n                        height = 220;\n                        width = 560;\n                        break;\n                    case 'middle':\n                        height = 200;\n                        width = 360;\n                        break;\n                    case 'small':\n                        height = 150;\n                        width = 235;\n                        break;\n\n                    default:\n                        break;\n                }\n            }\n\n        }\n        //console.log(\"render\", width, height);\n        const { id } = this.props.spec.chart ? this.props.spec.chart : { id: \"demo-chart\" };\n        return (\n            // <div id='frame'\n            //     style={{\n            //         // marginLeft: 60,\n            //         // marginTop: 60,\n            //         height: height,\n            //         width: width,\n            //         borderStyle: 'solid',\n            //         borderWidth: 1,\n            //         borderColor: 'red'\n            //     }}\n            // >\n            //     <div id={id ? `vischart_${id}` : 'demo-chart'} style={{ height: height, width: width }} />\n            // </div>\n            <div id={id ? `vischart_${id}` : 'demo-chart'} style={{ height: \"640\", width: \"640\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\", visibility: \"hidden\" }} />\n        )\n    }\n}\n","import React from 'react';\nimport ChartType from '@/constant/ChartType';\nimport getSupportedChartTypes from './getSupportedChartTypes';\nimport Chart from './Chart';\nimport { isValid, customizeFact } from './helper';\nimport _ from 'lodash';\n\nexport const facts2charts = (facts, shema, chartDiversity = 0) => {\n    for (let i = 0; i < facts.length; i++) {\n        let supportedChartTypes = getSupportedChartTypes(shema, facts[i]);\n        let choiceCount = parseInt((supportedChartTypes.length + 1) * chartDiversity);\n        let choicedChartTypes = supportedChartTypes.slice(0, choiceCount + 1);\n        facts[i].chart = choicedChartTypes[Math.floor(Math.random() * choicedChartTypes.length)].chart;\n    }\n    return facts\n}\nexport const getChoice = (length) => {\n    let choice = Math.round(Math.random() * (length - 1));\n    return choice;\n}\n\n\nexport const getFactChartType = (shema, fact, choice = 0) => {\n    let supportedChartTypes = getSupportedChartTypes(fact, shema);\n    if (supportedChartTypes.length === 0) return null;\n    return supportedChartTypes[getChoice(supportedChartTypes.length)].chart;\n}\n\nconst getvischartype = (chart) => {\n    let chartType = chart;\n    switch (chart) {\n        case ChartType.AREA_CHART:\n            chartType = \"areachart\";\n            break;\n        case ChartType.BUBBLE_CHART:\n            chartType = \"bubblechart\";\n            break;\n        case ChartType.COLOR_FILLING_MAP:\n            chartType = \"filledmap\";\n            break;\n        case ChartType.BUBBLE_MAP:\n            chartType = \"bubblemap\";\n            break;\n        case ChartType.HALF_RING_CHART:\n            chartType = \"donutchart\";\n            break;\n        case ChartType.HORIZONTAL_BAR_CHART:\n            chartType = \"horizentalbarchart\";\n            break;\n\n        case ChartType.VERTICAL_BAR_CHART:\n        case ChartType.STACKED_BAR_CHART:\n        case ChartType.VERTICAL_DIFFERENCE_BAR_CHART:\n        case ChartType.ISOTYPE_BAR_CHART:\n        case ChartType.VERTICAL_DIFFERENCE_ARROW_CHART:\n            chartType = \"verticalbarchart\"\n            break;\n        case ChartType.LINE_CHART:\n        case ChartType.STACKED_LINE_CHART:\n            chartType = \"linechart\";\n            break;\n        case ChartType.PROPORTION_ISOTYPE_CHART:\n        case ChartType.PIE_CHART:\n            chartType = \"piechart\";\n            break;\n        case ChartType.PROGRESS_BAR_CHART:\n            chartType = \"progresschart\";\n            break;\n        case ChartType.RING_CHART:\n            chartType = \"donutchart\";\n            break;\n        case ChartType.SCATTER_PLOT:\n            chartType = \"scatterplot\";\n            break;\n        case ChartType.TEXT_CHART:\n            chartType = \"textchart\";\n            break;\n        case ChartType.TREE_MAP:\n            chartType = \"treemap\";\n            break;\n        default:\n            break;\n    }\n    return chartType;\n}\n\nexport const fact2chart = function (specData, containerId, fact, data, size, vegalite) {\n    if (!fact.chart || fact.chart === \"\") {\n        fact.chart = getFactChartType(specData.schema, fact);//针对生成页面的chart\n    }\n\n    let chart = fact.chart;\n\n    if (chart === ChartType.ISOTYPE_BAR_CHART) {\n        fact.chart = ChartType.VERTICAL_BAR_CHART;\n    }\n    fact = customizeFact(fact);//important\n\n    if (!fact.chart || !isValid(fact)) {\n        console.log(\"no valid\", fact)\n        return null;\n    }\n\n    let specChart = {\n        id: containerId,\n        size: size,\n        type: getvischartype(chart),\n        style: \"business\",\n        duration: 0,\n        showSuggestion: false,//显示图表Unsupported,\n        // ...vegalite //add vegalite spec\n    }\n\n    specData = {\n        ...specData,\n        values: data,\n    }\n    let specNew = {\n        data: specData,\n        fact: fact,\n        chart: specChart,\n    }\n    //console.log(\"specNew\",fact.chart,specNew);\n\n    return <Chart spec={_.cloneDeep(specNew)} />\n}\n","'use strict';\nconst irregularPlurals = require('irregular-plurals');\n\nmodule.exports = (word, plural, count) => {\n\tif (typeof plural === 'number') {\n\t\tcount = plural;\n\t}\n\n\tif (irregularPlurals.has(word.toLowerCase())) {\n\t\tplural = irregularPlurals.get(word.toLowerCase());\n\n\t\tconst firstLetter = word.charAt(0);\n\t\tconst isFirstLetterUpperCase = firstLetter === firstLetter.toUpperCase();\n\t\tif (isFirstLetterUpperCase) {\n\t\t\tplural = firstLetter.toUpperCase() + plural.slice(1);\n\t\t}\n\n\t\tconst isWholeWordUpperCase = word === word.toUpperCase();\n\t\tif (isWholeWordUpperCase) {\n\t\t\tplural = plural.toUpperCase();\n\t\t}\n\t} else if (typeof plural !== 'string') {\n\t\tplural = (word.replace(/(?:s|x|z|ch|sh)$/i, '$&e').replace(/([^aeiou])y$/i, '$1ie') + 's')\n\t\t\t.replace(/i?e?s$/i, match => {\n\t\t\t\tconst isTailLowerCase = word.slice(-1) === word.slice(-1).toLowerCase();\n\t\t\t\treturn isTailLowerCase ? match.toLowerCase() : match.toUpperCase();\n\t\t\t});\n\t}\n\n\treturn Math.abs(count) === 1 ? word : plural;\n};\n","'use strict';\nconst irregularPlurals = require('./irregular-plurals.json');\n\n// Ensure nobody can modify each others Map\nObject.defineProperty(module, 'exports', {\n\tget() {\n\t\treturn new Map(Object.entries(irregularPlurals));\n\t}\n});\n","import React, { Component } from 'react'\nimport { fact2chart } from '@/tool/fact2vis/fact2vis'\n\n\nexport default class CalliopeChart extends Component {\n    shouldRender = false\n\n    componentWillMount() {\n        //console.log(\"CalliopeChart componentWillMount\");\n        this.shouldRender = true\n    }\n\n    shouldComponentUpdate() {\n        if (this.shouldRender) {\n            this.shouldRender = false//only render once \n            return true\n        }\n        return false\n    }\n\n\n    getSize = () => {\n        return \"large\"\n    }\n\n    render() {\n        //console.log(\"CalliopeChart render\");\n        const { schema, fact, data } = this.props\n        return (\n            <>\n                {\n                    fact2chart({ schema }, fact.id, fact, data, this.getSize())\n                }\n            </>)\n    }\n}","const templates = [\n    {\n        'id': 0,\n        'template': 'The Pearson correlation between the {{measure1}} and the {{measure2}} is {{parameter}} when {{subspace}}.',\n    },\n    {\n        'id': 1,\n        'template': 'When {{subspace}}, the Pearson correlation coefficient between the {{measure1}} and the {{measure2}} is {{parameter}}.',\n    },\n    {\n        'id': 2,\n        'template': 'When {{subspace}}, the {{measure1}} is correlated with the {{measure2}} and the Person correlation is {{parameter}}.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'When {{subspace}}, there are {{parameter}} {{groupby}}s: {{no.1}}, {{no.2}}, {{no.3}}, and {{focus}} needs to pay attention.',\n    },\n    {\n        'id': 1,\n        'template': 'When {{subspace}}, the data are grouped into {{parameter}} {{groupby}}s, including {{no.1}}, {{no.2}}, {{no.3}}, among which {{focus}} needs to pay attention.',\n    },\n    {\n        'id': 2,\n        'template': 'The data contain {{parameter}} {{groupby}}s when {{subspace}}, which are {{no.1}}, {{no.2}}, {{no.3}}. {{focus}} needs to pay attention.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'The difference between {{focus1}} and {{focus2}} regarding to their {{agg}} {{measure}} is {{parameter}} when {{subspace}}.',\n    },\n    {\n        'id': 1,\n        'template': '{{focus1}} and {{focus2}}\\'s difference on the {{agg}} {{measure}} is {{parameter}} when {{subspace}}.',\n    },\n    {\n        'id': 2,\n        'template': 'A comparison between {{focus1}} and {{focus2}} on their {{agg}} {{measure}} shows the difference is {{parameter}} when {{subspace}}.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'The distribution of the {{agg}} {{measure}} over different {{groupby}}s shows an overview of the data when {{subspace}} and {{focus}} needs to pay attention.',\n    },\n    {\n        'id': 1,\n        'template': 'The distribution of the {{agg}} {{measure}} over different {{groupby}}s shows an overview of the data when {{subspace}} and {{focus}} needs to pay attention.',\n    },\n    {\n        'id': 2,\n        'template': 'The distribution of the {{agg}} {{measure}} over different {{groupby}}s shows an overview of the data when {{subspace}} and {{focus}} needs to pay attention.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'Given {{subspace}}, the {{focus}} value of the {{agg}} {{measure}} is {{parameter[1]}} when the {{groupby}} is {{parameter[0]}}.',\n    },\n    {\n        'id': 1,\n        'template': 'The {{focus}} {{agg}} {{measure}} value over {{groupby}}s is {{parameter[1]}} when the {{groupby}} is {{parameter[0]}} given {{subspace}}.',\n    },\n    {\n        'id': 2,\n        'template': 'Among all {{groupby}}s, {{parameter[0]}} has the {{focus}} {{agg}} {{measure}} value, which is {{parameter[1]}}, when {{subspace}}.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'The {{agg}} {{measure}} of {{focus}} is an outlier when compared with that of other {{groupby}}s when {{subspace}}.',\n    },\n    {\n        'id': 1,\n        'template': '{{focus}}\\'s {{agg}} {{measure}} is anomalously different from other {{groupby}}s\\' {{measure}} when {{subspace}}.',\n    },\n    {\n        'id': 2,\n        'template': 'Among various {{groupby}}s, the {{agg}} {{measure}} of {{focus}} is an anomaly when {{subspace}}.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'The {{focus}} accounts for {{parameter}} of the {{agg}} {{measure}} when {{subspace}}.',\n    },\n    {\n        'id': 1,\n        'template': 'The {{focus}} makes up {{parameter}} of the {{agg}} {{measure}} when {{subspace}}.',\n    },\n    {\n        'id': 2,\n        'template': 'The {{focus}}\\'s {{agg}} {{measure}} takes {{parameter}} of the {{agg}} {{measure}} when {{subspace}}.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'In the {{agg}} {{measure}} ranking of different {{groupby}}s,  the top three {{groupby}}s are {{no.1}}, {{no.2}}, {{no.3}}, when {{subspace}}.',\n    },\n    {\n        'id': 1,\n        'template': 'The ranking list of the {{groupby}}s ordered by their {{agg}} {{measure}} when {{subspace}}, in which the top three {{groupby}}s are {{no.1}}, {{no.2}}, {{no.3}}.',\n    },\n    {\n        'id': 2,\n        'template': 'When sorting the {{groupby}}s in order based on their {{agg}} {{measure}}, the top three {{groupby}}s are {{no.1}}, {{no.2}}, {{no.3}} when {{subspace}}.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'The trend of the {{agg}} {{measure}} over {{groupby}}s is {{parameter}} when {{subspace}} and the value of {{focus}} needs to pay attention.',\n    },\n    {\n        'id': 1,\n        'template': 'The {{agg}} {{measure}} over {{groupby}}s shows a/an {{parameter}} trend when {{subspace}} and the value of {{focus}} needs to pay attention.',\n    },\n    {\n        'id': 2,\n        'template': 'The {{agg}} {{measure}} over {{groupby}}s is {{parameter}} when {{subspace}} and the value of {{focus}} needs to pay attention.',\n    },\n]\n\nexport default templates;","const templates = [\n    {\n        'id': 0,\n        'template': 'The {{agg}} {{measure}} is {{parameter}} when {{subspace}}.',\n    },\n    {\n        'id': 1,\n        'template': 'When {{subspace}}, the value of the {{agg}} {{measure}} is {{parameter}}.',\n    },\n    {\n        'id': 2,\n        'template': 'The {{agg}} {{measure}} value is {{parameter}} when {{subspace}}.',\n    },\n]\n\nexport default templates;","import FactType from '../../constant/FactType';\nimport association from './association';\nimport categorization from './categorization';\nimport difference from './difference';\nimport distribution from './distribution';\nimport extreme from './extreme';\nimport outlier from './outlier';\nimport proportion from './proportion';\nimport rank from './rank';\nimport trend from './trend';\nimport value from './value';\n\nconst templateCount = 3;\n\nconst pickFactTemplate = function(type, id=-1) {\n    // pick randomly when id == -1\n    let templates = []\n    switch (type) {\n        case FactType.ASSOCIATION:\n            templates = association;\n            break;\n\n        case FactType.CATEGORIZATION:\n            templates = categorization;\n            break;\n\n        case FactType.DIFFERENCE:\n            templates = difference;\n            break;\n\n        case FactType.DISTRIBUTION:\n            templates = distribution;\n            break;\n\n        case FactType.EXTREME:\n            templates = extreme;\n            break;\n\n        case FactType.OUTLIER:\n            templates = outlier;\n            break;\n\n        case FactType.PROPORTION:\n            templates = proportion;\n            break;\n\n        case FactType.RANK:\n            templates = rank;\n            break;\n\n        case FactType.TREND:\n            templates = trend;\n            break;\n\n        case FactType.VALUE:\n            templates = value;\n            break;\n    \n        default:\n            break;\n    }\n    if (id === -1) {\n        id = Math.floor(Math.random() * 10)%templateCount\n    }\n    let sentence = '';\n    try {\n        sentence = templates[id].template;\n    }\n    catch(error) {\n        console.error(error);\n        console.log('wrong id:'+id)\n    }\n    return sentence;\n}\n\nexport default pickFactTemplate;","export default {\n    SUM: 'sum',\n    MAX: 'max',\n    MIN: 'min',\n    AVG: 'avg',\n    COUNT: 'count',\n    // NONE: 'none'\n}","import pickFactTemplate from './fact-templates';\nimport pickRelationTemplate from './relation-templates';\nimport FactType from '@/constant/FactType'\nimport { isValid } from '@/tool/fact2vis/helper'\nimport AggregationType from '@/constant/AggregationType'\nimport _ from 'lodash'\n\nconst plur = require('plur');\nconst convertAggregation = function (aggType) {\n    switch (aggType) {\n        case AggregationType.SUM:\n            return 'total'\n\n        case AggregationType.MAX:\n            return 'maximum'\n\n        case AggregationType.MIN:\n            return 'minimum'\n\n        case AggregationType.AVG:\n            return 'average'\n\n        case AggregationType.COUNT:\n            return 'count'\n\n        case AggregationType.NONE:\n            return ''\n\n        default:\n            return ''\n    }\n}\n\nconst convertMeasure = function (measure) {\n    if (measure.aggregate === \"count\") return \"\"\n    else return measure.field.toLowerCase();\n}\n\nconst convertGroupby = function (groupby, param = 'single') {\n    let gb = groupby[0]\n\n    if (param === 'single')\n        return gb.toLowerCase()\n    else if (param === 'plural') {\n        if (gb.indexOf(' of ') !== -1) {\n            let gbWords = gb.split(\" \")\n            let gbWordIndex = gbWords.indexOf(\"of\") - 1\n            if (gbWordIndex > -1) {\n                let plurWord = plur(gbWords[gbWordIndex], 2)\n                return gb.replace(gbWords[gbWordIndex], plurWord)\n            }\n        } else\n            return plur(gb, 2).toLowerCase()\n    }\n}\n\n// for value/difference/categorization\nexport const formatNum = function (num) {\n    num = (num || 0).toString();\n    let number = 0,\n        floatNum = '',\n        intNum = '';\n    if (num.indexOf('.') > 0) {\n        num = num.toFixed(2)\n        number = num.indexOf('.');\n        floatNum = num.substr(number);\n        intNum = num.substring(0, number);\n    } else {\n        intNum = num;\n    }\n    let result = [],\n        counter = 0;\n    intNum = intNum.split('');\n\n    for (let i = intNum.length - 1; i >= 0; i--) {\n        counter++;\n        result.unshift(intNum[i]);\n        if (!(counter % 3) && i !== 0) { result.unshift(','); }\n    }\n    return result.join('') + floatNum || '';\n}\n\nconst genFactSubspace = function (fact, template) {\n    let subspace = '';\n    if (fact.subspace.length) {\n        fact.subspace.map((key, i) => { return subspace += `${i === 0 ? ' ' : ' and '}the ${key.field} is ${key.value}` })\n        template = template.replace(\"{{subspace}}\", subspace);\n    } else {\n        template = template.replace(\", when {{subspace}}\", '');\n        template = template.replace(\" when {{subspace}}\", '');\n        template = template.replace(\" in case of {{subspace}}\", '');\n        template = template.replace(\" given {{subspace}}\", '');\n        template = template.replace(\"When {{subspace}}, \", '');\n        template = template.replace(\"Given {{subspace}}, \", '');\n        template = template.replace(\"In case of {{subspace}}, \", '');\n    }\n    return template\n}\n\nexport const genFactSentence = function (_fact) {\n    if (!isValid(_fact))\n        return ''\n    let fact = _.cloneDeep(_fact)\n    let template = pickFactTemplate(fact.type);\n    let aggregate = AggregationType.NONE;\n    if (fact.measure.length > 0) {\n        aggregate = fact.measure[0].aggregate;\n    }\n    switch (fact.type) {\n        case FactType.ASSOCIATION:\n            template = template.replace(\"{{measure1}}\", convertMeasure(fact.measure[0]));\n            template = template.replace(\"{{measure2}}\", convertMeasure(fact.measure[1]));\n            template = template.replace(\"{{agg1}}\", convertAggregation(fact.measure[0].aggregate));\n            template = template.replace(\"{{agg2}}\", convertAggregation(fact.measure[1].aggregate));\n            template = genFactSubspace(fact, template)\n            if (fact.parameter !== '') {\n                template = template.replace(\"{{parameter}}\", formatNum(Number.parseFloat(fact.parameter).toFixed(3)));\n            }\n            break;\n\n        case FactType.CATEGORIZATION:\n            template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby, 'plural'));\n            template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby, 'plural'));\n            template = genFactSubspace(fact, template)\n            if (fact.parameter.length) {\n                template = template.replace(\"{{parameter}}\", formatNum(fact.parameter.length));\n                let parameterList = ''\n                fact.parameter.forEach((d, i) => {\n                    parameterList += `${i === 0 ? '' : ','} ${d}`\n                });\n                template = template.replace(\"{{no.1}}, {{no.2}}, {{no.3}}\", parameterList);\n                // template = template.replace(\"{{no.1}}\", fact.parameter[0]);\n                // template = template.replace(\"{{no.2}}\", fact.parameter[1]);\n                // if (fact.parameter.length === 3) {\n                //     template = template.replace(\"{{no.3}}\", fact.parameter[2]);\n                // } else if (fact.parameter.length > 3) {\n                //     template = template.replace(\"{{no.3}}\", fact.parameter[2] + ', etc');\n                // } else if (fact.parameter.length === 2) {\n                //     template = template.replace(\", {{no.3}}\", '');\n                // }\n            }\n            if (fact.focus.length) {\n                if (template.indexOf(\". {{focus}}\") > -1) {\n                    let focusValue = fact.focus[0].value.slice(0, 1).toUpperCase() + fact.focus[0].value.slice(1)\n                    template = template.replace(\"{{focus}}\", focusValue);\n                } else {\n                    template = template.replace(\"{{focus}}\", fact.focus[0].value);\n                }\n            } else {\n                template = template.replace(\", and {{focus}} needs to pay attention\", \"\");\n                template = template.replace(\", among which {{focus}} needs to pay attention\", \"\");\n                template = template.replace(\". {{focus}} needs to pay attention\", \"\");\n            }\n            break;\n\n        case FactType.DIFFERENCE:\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n            template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n            if (fact.focus.length >= 2) {\n                template = template.replace(\"{{focus1}}\", fact.focus[0].value);\n                template = template.replace(\"{{focus2}}\", fact.focus[1].value);\n            }\n            template = genFactSubspace(fact, template)\n            if (fact.parameter !== '') template = template.replace(\"{{parameter}}\", formatNum(fact.parameter));\n            break;\n\n        case FactType.DISTRIBUTION:\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n            template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n            template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby, 'plural'));\n            template = template.replace(\"{{groupby}}\", convertGroupby(fact.groupby));\n            template = genFactSubspace(fact, template)\n            if (fact.focus.length) {\n                template = template.replace(\"{{focus}}\", fact.focus[0].value);\n            } else {\n                template = template.replace(\" and {{focus}} needs to pay attention\", \"\");\n            }\n            break;\n\n        case FactType.EXTREME:\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n            template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n            template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby, 'plural'));\n            template = template.replace(\"{{groupby}}\", convertGroupby(fact.groupby));\n            template = template.replace(\"{{groupby}}\", convertGroupby(fact.groupby));\n            template = genFactSubspace(fact, template)\n            if (fact.focus.length) {\n                if (fact.focus[0].extremeFocus !== undefined && fact.focus[0].extremeValue !== undefined) {\n                    if (fact.focus[0].extremeFocus === 'min') { template = template.replace(\"{{focus}}\", 'minimum'); }\n                    else { template = template.replace(\"{{focus}}\", 'maximum'); }\n                    template = template.replace(\"{{parameter[0]}}\", fact.focus[0].value);\n                    template = template.replace(\"{{parameter[1]}}\", formatNum(Math.round(fact.parameter[1] * 100) / 100));\n\n                } else if (fact.parameter.length) {\n                    if (fact.parameter[0] === 'min') { template = template.replace(\"{{focus}}\", 'minimum'); }\n                    else { template = template.replace(\"{{focus}}\", 'maximum'); }\n                    template = template.replace(\"{{parameter[0]}}\", fact.focus[0].value);\n                    template = template.replace(\"{{parameter[1]}}\", formatNum(fact.parameter[1]));\n                }\n            }\n            break;\n\n        case FactType.OUTLIER:\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n            template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby, 'plural'));\n            template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n            template = genFactSubspace(fact, template)\n            if (fact.focus.length) template = template.replace(\"{{focus}}\", fact.focus[0].value);\n            break;\n\n        case FactType.PROPORTION:\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n            template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n            template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n            template = genFactSubspace(fact, template)\n            if (fact.focus.length) template = template.replace(\"{{focus}}\", fact.focus[0].value);\n            if (fact.parameter) template = template.replace(\"{{parameter}}\", fact.parameter);\n            break;\n\n        case FactType.RANK:\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n            template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n            template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby, 'plural'));\n            template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby, 'plural'));\n            template = genFactSubspace(fact, template)\n            if (fact.parameter.length >= 3) {\n                template = template.replace(\"{{parameter}}\", formatNum(fact.parameter.length));\n                template = template.replace(\"{{no.1}}\", fact.parameter[0]);\n                template = template.replace(\"{{no.2}}\", fact.parameter[1]);\n                if (fact.parameter.length === 3) {\n                    template = template.replace(\"{{no.3}}\", fact.parameter[2]);\n                } else if (fact.parameter.length > 3) {\n                    template = template.replace(\"{{no.3}}\", fact.parameter[2]);\n                } else if (fact.parameter.length === 2) {\n                    template = template.replace(\", {{no.3}}\", '');\n                }\n            } else {\n                template = ''\n            }\n            break;\n\n        case FactType.TREND:\n        \n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n            template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n            template = template.replace(\"{{groupby}}s\", convertGroupby(fact.groupby, 'plural'));\n            template = genFactSubspace(fact, template)\n            if (fact.parameter) {\n                template = template.replace(\"{{parameter}}\", fact.parameter);\n                if (fact.parameter === 'increasing') {\n                    template = template.replace(\"a/an\", 'an');\n                } else {\n                    template = template.replace(\"a/an\", 'a');\n                }\n            }\n            if (fact.focus.length) {\n                template = template.replace(\"{{focus}}\", fact.focus[0].value);\n            } else {\n                template = template.replace(\" and the value of {{focus}} needs to pay attention\", \"\");\n            }\n            break;\n\n        case FactType.VALUE:\n            template = template.replace(\"{{measure}}\", convertMeasure(fact.measure[0]));\n            template = template.replace(\"{{agg}}\", convertAggregation(aggregate));\n            template = genFactSubspace(fact, template)\n            if (fact.focus.length) template = template.replace(\"{{focus}}\", fact.focus[0].value);\n            if (fact.parameter !== '') template = template.replace(\"{{parameter}}\", formatNum(fact.parameter));\n            break;\n\n        default:\n            break;\n    }\n    template = template.slice(0, 1).toUpperCase() + template.slice(1)\n    return template;\n}\n\n\nexport const genStoryText = function (facts, relations) {\n    let template;\n    let storyText = '';\n    let pairLength = parseInt(facts.length / 2)\n    //console.log(\"relations\", facts, relations)\n    for (let i = 0; i < pairLength; i++) {\n        if (facts[i]) {\n            template = pickRelationTemplate(relations[i * 2 + 1])\n            // template = template.replace(\"{{Sentence A}}\", facts[i * 2].script());\n            // template = template.replace(\"{{Sentence B}}\", facts[i * 2 + 1].script());\n            template = template.replace(\"{{Sentence A}}\", facts[i * 2].generatedScript);\n            template = template.replace(\"{{Sentence B}}\", facts[i * 2 + 1].generatedScript);\n            storyText += template + ' '\n        }\n    }\n    if (facts.length % 2) {\n        //storyText += facts[facts.length - 1].script()\n        storyText += facts[facts.length - 1].generatedScript\n    }\n    //console.log(\"storyText\", storyText)\n    return storyText\n}\n\nexport const genSubtitle = function (fact) {\n    let title;\n    if (!isValid(fact))\n        return ''\n\n    title = 'The ' + fact.type\n    switch (fact.type) {\n        case FactType.ASSOCIATION:\n            title += ' of ' + fact.measure[0].field + ' and ' + fact.measure[1].field\n            break;\n        case FactType.CATEGORIZATION:\n            // title += ' of ' + fact.groupby[0]\n            title = fact.groupby[0]\n            break;\n\n        case FactType.DIFFERENCE:\n            title += ' between ' + fact.focus[0].value + ' and ' + fact.focus[1].value\n            break;\n        case FactType.DISTRIBUTION:\n            title += ' of ' + fact.measure[0].field\n            break;\n        case FactType.EXTREME:\n            title += ' of ' + fact.measure[0].field\n            break;\n        case FactType.OUTLIER:\n            title += ' of ' + fact.measure[0].field\n            break;\n        case FactType.PROPORTION:\n            title += ' of ' + fact.focus[0].value\n            break;\n        case FactType.RANK:\n            title += ' of ' + fact.measure[0].field\n            break;\n        case FactType.TREND:\n            title += ' of ' + fact.measure[0].field\n            break;\n        case FactType.VALUE:\n            title = 'The ' + convertAggregation(fact.measure[0].aggregate) + ' ' + fact.measure[0].field\n            break;\n        default:\n            break;\n    }\n    if (fact.subspace.length) {\n        let subspace = '';\n        fact.subspace.map((key, i) => { return subspace += ` in ${key.value}` })\n        title += subspace;\n    }\n\n    return title;\n}\n\nexport const genTitle = function (fileName) {\n    let title;\n    switch (fileName) {\n        case 'CarSales.csv':\n            title = 'Car Sales'\n            break;\n\n        case 'nCoV2020.csv':\n            title = 'COVID-19'\n            break;\n\n        case 'deadstartup.csv':\n            title = 'Startup Failures'\n            break;\n\n        default:\n            if (fileName.indexOf('.') > 0) {\n                let number = fileName.indexOf('.');\n                // let csv = fileName.substr(number);\n                title = fileName.substring(0, number);\n            } else {\n                title = fileName\n            }\n            break;\n    }\n    return title\n}","import FactType from '@/constant/FactType'\nimport { isValid } from './fact2vis/helper'\nimport { formatNum } from '../sentencer/index'\n\nexport const genTitle = function (fileName) {\n    let title;\n    switch (fileName) {\n        case 'CarSales.csv':\n            title = 'Car Sales'\n            break;\n\n        case 'nCoV2020.csv':\n            title = 'COVID-19'\n            break;\n\n        case 'deadstartup.csv':\n            title = 'Startup Failures'\n            break;\n\n        default:\n            if (fileName.indexOf('.') > 0) {\n                let number = fileName.indexOf('.');\n                // let csv = fileName.substr(number);\n                title = fileName.substring(0, number);\n            } else {\n                title = fileName\n            }\n            break;\n    }\n    return title\n}\nconst isEndWithS = (letter) => {\n    if (letter === 's') return true\n    return false\n}\n\nconst hightlightItem = function (script, parameter) {\n    if (script.indexOf(parameter) === -1) return script\n    let srtEndIndex = script.indexOf(parameter) + parameter.length;\n\n    if (isEndWithS(script.substring(srtEndIndex, srtEndIndex + 1))) {\n        srtEndIndex = srtEndIndex + 1 //include s \n    }\n    let srtStartIndex = script.indexOf(parameter);\n    let newScript = script.substring(0, srtEndIndex) + \"</i></span>\" + script.substring(srtEndIndex);\n    newScript = newScript.substring(0, srtStartIndex) + '<span class=\"hightlight\"><i>'+ newScript.substring(srtStartIndex);\n    return newScript\n}\n\nexport const hightlight = function (fact) {\n    if (!isValid(fact))\n        return ''\n    // console.log(\"fact.parameter\", fact);\n    // if (!fact.parameter)\n    //     return fact.generatedScript\n\n    let script = fact.generatedScript\n    // script = hightlightItem(fact.generatedScript, fact.type)\n    // if (fact.breakdown && fact.breakdown[0]) {\n    //     script = hightlightItem(script, fact.breakdown[0].field)\n    // }\n    // if (fact.measure && fact.measure[0]) {\n    //     script = hightlightItem(script, fact.measure[0].field)\n    // }\n\n    // if (fact.subspace && fact.subspace[0]) {\n    //     script = hightlightItem(script, fact.subspace[0].field)\n    // }\n\n    let parameter\n    let newScript\n\n    switch (fact.type) {\n        // TODO: NO template parameter\n        case FactType.ASSOCIATION:\n            newScript = script\n            break;\n\n        case FactType.RANK:\n            let parameter1 = fact.parameter[0];\n            let parameter2 = fact.parameter[1];\n            let parameter3 = fact.parameter[2];\n            newScript = hightlightItem(script, parameter1)\n            if (parameter2) newScript = hightlightItem(newScript, parameter2)\n            if (parameter2 && parameter3) newScript = hightlightItem(newScript, parameter3)\n            break;\n\n        case FactType.VALUE:\n            newScript = hightlightItem(script, fact.measure[0].field.toLowerCase())\n            newScript = hightlightItem(newScript, formatNum(fact.parameter))\n            break;\n\n        case FactType.DIFFERENCE:\n            newScript = hightlightItem(script, fact.measure[0].field.toLowerCase())\n            newScript = hightlightItem(newScript, formatNum(fact.parameter))\n            break;\n        // case FactType.DIFFERENCE:\n        //     parameter = formatNum(fact.parameter);\n        //     newScript = hightlightItem(script, parameter)\n        //  \n        case FactType.RANK:\n            newScript = hightlightItem(script, 'decreasing')\n            break;\n\n        // TODO: NO template parameter\n        case FactType.OUTLIER:\n            newScript = script\n            break;\n        case FactType.EXTREME:\n        case FactType.OUTLIER:\n            newScript = hightlightItem(script, 'maximum')\n            if (fact.parameter[1]) newScript = hightlightItem(newScript, formatNum(fact.parameter[1]))\n            break;\n\n        case FactType.DISTRIBUTION:\n            newScript = script\n            break;\n\n        case FactType.CATEGORIZATION:\n            parameter = fact.parameter.length.toString();\n            newScript = hightlightItem(script, parameter)\n            break;\n\n        default:\n            parameter = fact.parameter;\n            newScript = hightlightItem(script, parameter)\n            break;\n    }\n    return newScript\n}\n\nexport const genSubtitle = function (fact) {\n    let title;\n    if (!isValid(fact))\n        return ''\n\n    title = 'The ' + fact.type\n    switch (fact.type) {\n        case FactType.ASSOCIATION:\n            title += ' of ' + fact.measure[0].field + ' and ' + fact.measure[1].field\n            break;\n        case FactType.CATEGORIZATION:\n            title += ' of ' + fact.groupby[0]\n            break;\n\n        case FactType.DIFFERENCE:\n            title += ' between ' + fact.focus[0].value + ' and ' + fact.focus[1].value\n            break;\n        case FactType.DISTRIBUTION:\n            title += ' of ' + fact.measure[0].field\n            break;\n        case FactType.EXTREME:\n            title += ' of ' + fact.measure[0].field\n            break;\n        case FactType.OUTLIER:\n            title += ' of ' + fact.measure[0].field\n            break;\n        case FactType.PROPORTION:\n            title += ' of ' + fact.focus[0].value\n            break;\n        case FactType.RANK:\n            title += ' of ' + fact.measure[0].field\n            break;\n        case FactType.TREND:\n            title += ' of ' + fact.measure[0].field\n            break;\n        case FactType.VALUE:\n            title += ' of ' + fact.focus[0].value\n            break;\n        default:\n            break;\n    }\n    if (fact.subspace.length) {\n        let subspace = '';\n        fact.subspace.map((key, i) => { return subspace += ` in ${key.value}` })\n        title += subspace;\n    }\n\n    return title;\n}","import React, { Component } from 'react'\nimport { genFactSentence } from '@/sentencer/index'\nimport CalliopeChart from './CalliopeChart'\nimport { hightlight } from '@/tool/helper'\nimport * as d3 from 'd3'\nimport _ from 'lodash';\nimport './AnsweredFacts.less'\n\n\nlet testLayout = [1, 2, 3, 4, 5]\nconst defaultNum = testLayout[4]\n\nlet visNodes = new Map()\nlet captionNodes = new Map()\nconst maxNum = 5;\n\nexport default class AnsweredFacts extends Component {\n\n    renderLayout = null\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            renderNum: defaultNum,\n            count: maxNum,\n            clientWidth: 0,\n            clientHeight: 0,\n            facts: this.props.facts,\n            containerSize: this.props.containerSize\n        }\n    }\n\n    componentDidMount() {\n        this.computeSizeAndRenderCharts()\n    }\n    componentWillReceiveProps(nextProps) {\n        let newContainerW = nextProps.containerSize.width,\n            newContainerH = nextProps.containerSize.height\n\n        let { width, height } = this.state.containerSize\n        //console.log(\"componentWillReceiveProps\", nextProps.containerSize, this.state.containerSize);\n        //update container size\n        if (newContainerW !== width || newContainerH !== height) {\n            this.setState({\n                containerSize: {\n                    width: newContainerW,\n                    height: newContainerH\n                }\n            })\n        }\n        //update facts \n        if (nextProps.isUpdateLayout) {\n            this.setState({\n                facts: nextProps.facts\n            }, () => {\n                this.computeSizeAndRenderCharts()\n            })\n        }\n    }\n\n    componentDidUpdate() {\n        //屏幕尺寸改变 需要更新\n        let { width, height } = this.state.containerSize\n\n        let cachedContainerSize = this.state.facts[0].preContainerSize\n        if (cachedContainerSize) {\n            if (cachedContainerSize.width !== width || cachedContainerSize.height !== height) {\n                let facts = _.cloneDeep(this.state.facts)\n                facts[0].preContainerSize = this.state.containerSize//update containerSize size \n                this.setState({\n                    facts\n                }, () => {\n                    this.computeSizeAndRenderCharts()\n                })\n            }\n        }\n\n        //启动编辑后触发的更新\n        if (this.props.isEdit) {\n            this.renderCharts()\n        }\n    }\n\n    /*\n     *\n     fact.width 记录的是计算的chart的宽度；fact.height记录的是计算的chart的高度\n     批量一次更新后，先生成calliope-chart的dom,\n     然后做缩放\n     */\n    computeSizeAndRenderCharts = () => {\n        let facts = _.cloneDeep(this.state.facts)\n        let newFacts = facts.map((fact, index) => {\n            if (!captionNodes.get(fact.id)) return fact\n            let captionNode = captionNodes.get(fact.id).current\n            let visWidth = 0, visHeight = 0\n            let captionH = 0;\n\n            if (captionNode) {\n                captionH = captionNode.clientHeight\n            }\n            if (this.renderLayout && this.renderLayout[index]) {\n                let { x0, x1, y0, y1 } = this.renderLayout[index]\n                visWidth = x1 - x0\n                visHeight = y1 - y0 - captionH\n            }\n\n            if (visWidth === 0 || visHeight === 0) return fact\n            fact.width = visWidth\n            fact.height = visHeight\n            fact.captionH = captionH\n            //preContainerSize 只记在第一个数组里就可以了\n            if (index === 0) {\n                fact.preContainerSize = this.props.containerSize\n            }\n            return fact\n        })\n\n        this.setState({\n            facts: newFacts\n        }, () => {\n            this.renderCharts()\n        })\n    }\n    //由于calliope-chart异步返回,因此做了1000ms的延迟才可以获取visChart\n    renderCharts = () => {\n        setTimeout(() => {\n            this.batchUpdateSvg()\n        }, 1000)\n    }\n\n    batchUpdateSvg = () => {\n        let facts = _.cloneDeep(this.state.facts)\n        // console.log(\"newFacts\", facts);\n        facts.map(fact => {\n            if (!visNodes.get(fact.id)) return fact\n            let visNode = visNodes.get(fact.id).current\n            if (visNode) {\n                //console.log(\"visNodes\", visNode, visNodes.get(fact.id));\n                this.updateSvg(visNode, fact.width, fact.height)\n            }\n            return fact\n        })\n    }\n\n\n    /*更新:\n         可见状态\n         设置缩放\n     */\n    updateSvg = (visNode, visWidth, visHeight) => {\n        if (visNode) {\n            let h_Margin = 15\n            let visH = visHeight - h_Margin\n            // let scaleX = visWidth / 640,\n            //     scaleY = visHeight / 640;\n            let scale = Math.min(visWidth, visH) / 640\n            let marginRotio = 0.9\n            let visChart = visNode.children && visNode.children[0]\n            //console.log(\"updateSvg visNode\", visNode, visWidth, visHeight,scale);\n            if (visChart) {\n                visChart.setAttribute(\"style\", `transform:scale(${scale * marginRotio});visibility:\"visible\"`)\n                visChart.onmouseenter = () => {\n                    visChart.setAttribute(\"style\", `transform:scale(${scale * marginRotio});border:${this.props.isEdit ? '1px dashed grey' : ' '} `)\n                }\n                visChart.onmouseleave = () => {\n                    visChart.setAttribute(\"style\", `transform:scale(${scale * marginRotio})`)\n                }\n            }\n        }\n    }\n\n\n    _renderedFacts = (facts) => {\n        const { renderNum, count } = this.state\n        return facts.slice(0, renderNum >= count ? count : renderNum)\n    }\n\n\n\n    weightAdapter = (data, columnNum) => {\n        let innerNum = data.children.length\n        let weightTable = []\n        switch (columnNum) {\n            case 1:\n                weightTable = [1]\n                if (innerNum === 2) {\n                    weightTable = [3, 2]\n                } else if (innerNum === 3) {\n                    weightTable = [3, 1.2, 0.8]\n                }\n                break;\n            case 2:\n                weightTable = [1]\n                if (innerNum === 2) {\n                    weightTable = [4, 3]\n                } else if (innerNum === 3) {\n                    weightTable = [6, 3, 2]\n                }\n                break;\n            case 3:\n                weightTable = [1]\n                if (innerNum === 2) {\n                    weightTable = [3, 2]\n                } else if (innerNum === 3) {\n                    weightTable = [3, 1.2, 0.8]\n                }\n                break;\n            case 4:\n                weightTable = [1]\n                if (innerNum === 2) {\n                    weightTable = [3, 2]\n                } else if (innerNum === 3) {\n                    weightTable = [4, 3, 2]\n                }\n                break;\n            default:\n                break;\n        }\n        return {\n            \"children\": data.children.map((fact, index) => {\n                return {\n                    ...fact,\n                    significance: weightTable[index]\n                }\n            })\n        }\n    }\n\n    change = (event) => {\n        this.setState({\n            renderNum: event.target.value\n        })\n    }\n\n    getTreemap = (width, height, data) => {\n        let treemap = d3.treemap()\n            .tile(d3.treemapResquarify.ratio(1))\n            .size([width, height])\n            .padding(3)\n            .round(true)\n            (d3.hierarchy(data)\n                .sum(d => d.significance)\n            )\n        return treemap\n    }\n\n    sort = (data) => {\n        return data.sort((a, b) => b.significance - a.significance)\n    }\n\n    setRef = (id) => {\n        visNodes.set(id, React.createRef())\n        return visNodes.get(id)\n    }\n    setCaptionRef = (id) => {\n        captionNodes.set(id, React.createRef())\n        return captionNodes.get(id)\n    }\n    endEdit = (visId, index) => {\n        let captionNode = captionNodes.get(visId).current\n        let { cachedQA, QAID } = this.props\n        let newCachedQA = _.cloneDeep(cachedQA)\n        newCachedQA[QAID].facts[index].script = captionNode.innerHTML\n        this.props.saveCachedDecomposedQA(newCachedQA)\n    }\n\n    deleteCard = (index) => {\n        let { cachedQA, QAID } = this.props\n        let newCachedQA = _.cloneDeep(cachedQA)\n        let parentId = QAID\n        newCachedQA[parentId] && newCachedQA[parentId].facts.splice(index, 1)\n        if (newCachedQA[parentId] && newCachedQA[parentId].facts.length === 0) {\n            newCachedQA.splice(parentId, 1)\n        }\n        this.props.saveCachedDecomposedQA(newCachedQA)\n    }\n\n    render() {\n\n        let { columnNum, isEdit, QAID, schema, data } = this.props\n        let { containerSize } = this.state\n        let { facts } = this.state\n        let renderData = {\n            children: this._renderedFacts(this.sort(facts))\n        }\n        let { width, height } = containerSize//屏幕尺寸改变后改变的参数\n        this.renderLayout = this.getTreemap(width, height, this.weightAdapter(renderData, columnNum)).leaves()\n        //console.log(\"facts render\", this.props.QAID, facts, this.props.facts, this.renderLayout);\n\n        return (\n            <div className='inner-auto-layout' >\n                {\n                    this.renderLayout && this.renderLayout.map((layout, index) => {\n                        const fact = layout.data\n                        const { x0, x1, y0, y1 } = layout\n\n                        let script = fact.script ? fact.script : genFactSentence(fact) || \" \"\n                        fact.generatedScript = script\n                        // console.log(\"render////\", QAID, index, fact, layout);\n                        return <div style={{ position: 'absolute', left: x0, top: y0, width: x1 - x0, height: y1 - y0 }}>\n                            <div className='chart-card'>\n                                {\n                                    isEdit && <div className='delete' onClick={() => this.deleteCard(index)}></div>\n                                }\n                                <div className='wrapper'>\n                                    <div className='vis-box' style={{ height: `calc(100% - ${fact.captionH}px)` }}>\n                                        <div className='bound-box' id={fact.id} ref={this.setRef(fact.id)}\n                                            //style={{ width: fact.width, height: fact.height, backgroundColor: \"red\" }}\n                                        >\n                                            <CalliopeChart schema={schema} fact={fact} data={data} />\n                                        </div>\n                                    </div>\n                                    <div className='caption' contentEditable={isEdit} suppressContentEditableWarning ref={this.setCaptionRef(fact.id, index)} onBlur={() => this.endEdit(fact.id, index)}\n                                        //title={script}\n                                        dangerouslySetInnerHTML={{ __html: hightlight(fact) }}\n                                    ></div>\n                                </div>\n                            </div>\n                        </div >\n                    })\n                }\n            </div >\n        )\n    }\n}","export default {\n    \"story1\": [\n        {\n            \"question\": \"which category has the highest sales?\",\n            \"facts\": [\n                {\n                    \"type\": \"extreme\",\n                    \"measure\": [\n                        {\n                            \"field\": \"sales\",\n                            \"type\": \"numerical\",\n                            \"aggregate\": \"sum\"\n                        }\n                    ],\n                    \"breakdown\": [\n                        {\n                            \"field\": \"category\",\n                            \"type\": \"categorical\"\n                        }\n                    ],\n                    \"subspace\": [],\n                    \"focus\": [\n                        {\n                            \"field\": \"category\",\n                            \"value\": \"SUV\"\n                        }\n                    ],\n                    \"parameter\": [\n                        \"\",\n                        \"6853129\"\n                    ],\n                    \"script\": 'The maximum value of the total sales is 6,853,129 when the category is SUV.'\n                }\n            ]\n        },\n        {\n            \"question\": \"what is the sales over year?\",\n            \"facts\": [\n                {\n                    \"type\": \"trend\",\n                    \"measure\": [\n                        {\n                            \"field\": \"sales\",\n                            \"type\": \"numerical\",\n                            \"aggregate\": \"sum\"\n                        }\n                    ],\n                    \"breakdown\": [\n                        {\n                            \"field\": \"year\",\n                            \"type\": \"temporal\"\n                        }\n                    ],\n                    \"subspace\": [],\n                    \"focus\": [],\n                    \"parameter\": \"decreasing\",\n                    \"script\": \"The total sales over years is decreasing.\"\n                }\n            ]\n        },\n        {\n            \"question\": \"what is the total value of sales?\",\n            \"facts\": [\n                {\n                    \"type\": \"value\",\n                    \"measure\": [\n                        {\n                            \"field\": \"sales\",\n                            \"type\": \"numerical\",\n                            \"aggregate\": \"sum\"\n                        }\n                    ],\n                    \"breakdown\": [],\n                    \"subspace\": [],\n                    \"focus\": [],\n                    \"parameter\": 21921768,\n                    \"script\": \"The total sales value is 21,921,768.\"\n                }\n            ]\n        }\n    ],\n    \"story2\": [\n        {\n            \"question\": \"what is the trend of sales?\",\n            \"facts\": [\n                {\n                    \"type\": \"trend\",\n                    \"measure\": [\n                        {\n                            \"field\": \"sales\",\n                            \"type\": \"numerical\",\n                            \"aggregate\": \"sum\"\n                        }\n                    ],\n                    \"breakdown\": [\n                        {\n                            \"field\": \"year\",\n                            \"type\": \"temporal\"\n                        }\n                    ],\n                    \"subspace\": [],\n                    \"focus\": [],\n                    \"parameter\": \"decreasing\",\n                    \"script\": \"The trend of total sales over years is decreasing.\"\n                }\n            ]\n        },\n        {\n            \"question\": \"which brand has the highest/lowest sales?\",\n            \"facts\": [\n                {\n                    \"type\": \"extreme\",\n                    \"measure\": [\n                        {\n                            \"field\": \"sales\",\n                            \"type\": \"numerical\",\n                            \"aggregate\": \"sum\"\n                        }\n                    ],\n                    \"breakdown\": [\n                        {\n                            \"field\": \"brand\",\n                            \"type\": \"categorical\"\n                        }\n                    ],\n                    \"subspace\": [],\n                    \"focus\": [\n                        {\n                            \"field\": \"brand\",\n                            \"value\": \"Ford\"\n                        }\n                    ],\n                    \"parameter\": [\n                        \"\",\n                        \"5489641\"\n                    ],\n                    \"script\": \"The maximum value of the total sales is 5,489,641 when the brand is Ford.\"\n                }\n            ]\n        },\n        {\n            \"question\": \"which brand has an increasing trend of sales?\",\n            \"facts\": [\n                {\n                    \"type\": \"trend\",\n                    \"measure\": [\n                        {\n                            \"field\": \"sales\",\n                            \"type\": \"numerical\",\n                            \"aggregate\": \"sum\"\n                        }\n                    ],\n                    \"breakdown\": [\n                        {\n                            \"field\": \"year\",\n                            \"type\": \"temporal\"\n                        }\n                    ],\n                    \"subspace\": [\n                        {\n                            \"field\": \"brand\",\n                            \"type\": \"categorical\",\n                            \"value\": \"Volkswagen\"\n                        }\n                    ],\n                    \"focus\": [],\n                    \"parameter\": \"increasing\",\n                    \"script\": \"The total sales over years shows an increasing trend when the brand is Volkswagen.\"\n                },\n                {\n                    \"type\": \"trend\",\n                    \"measure\": [\n                        {\n                            \"field\": \"sales\",\n                            \"type\": \"numerical\",\n                            \"aggregate\": \"sum\"\n                        }\n                    ],\n                    \"breakdown\": [\n                        {\n                            \"field\": \"year\",\n                            \"type\": \"temporal\"\n                        }\n                    ],\n                    \"subspace\": [\n                        {\n                            \"field\": \"brand\",\n                            \"type\": \"categorical\",\n                            \"value\": \"Ford\"\n                        }\n                    ],\n                    \"focus\": [],\n                    \"parameter\": \"increasing\",\n                    \"script\": \"The trend of total sales over years is increasing when the brand is Ford.\"\n                },\n                {\n                    \"type\": \"trend\",\n                    \"measure\": [\n                        {\n                            \"field\": \"sales\",\n                            \"type\": \"numerical\",\n                            \"aggregate\": \"sum\"\n                        }\n                    ],\n                    \"breakdown\": [\n                        {\n                            \"field\": \"year\",\n                            \"type\": \"temporal\"\n                        }\n                    ],\n                    \"subspace\": [\n                        {\n                            \"field\": \"brand\",\n                            \"type\": \"categorical\",\n                            \"value\": \"Hyundai\"\n                        }\n                    ],\n                    \"focus\": [],\n                    \"parameter\": \"increasing\",\n                    \"script\": \"The trend of total sales over years is increasing when the brand is Hyundai.\"\n                }\n            ]\n        }\n    ]\n}\n","import React, { PureComponent } from 'react'\nimport './ErrorView.less'\n\nexport default class ErrorView extends PureComponent {\n\n    render() {\n        const { initDone, intl } = this.props\n        return (\n            <div className='ErrorView'>\n                <div />\n                <p>{initDone && intl.get('empty')}</p>\n            </div>\n        )\n    }\n}","import React, { Component } from 'react'\nimport AnsweredFacts from '../Layout/ChartCard/AnsweredFacts'\nimport ErrorView from '@/components/ErrorView/ErrorView'\nimport uuidv4 from 'uuid/v4';\nimport _ from 'lodash'\nimport './layout.less'\n\n// const defaultNum = 1\n// const defaultSubNum = 5\n\nlet subTitleNodes = new Map()\n\nexport default class LayoutView extends Component {\n    titleRef = React.createRef();\n    debounceTimer = null\n    containerNodes = {\n        width: 0,\n        height: 0\n    }\n    // state = {\n    //     num: this.props.decomposedQA.length,\n    //     subNum: defaultSubNum\n    // }\n    // change = (event) => {\n    //     this.setState({\n    //         num: event.target.value\n    //     })\n    // }\n    // subchange = (event) => {\n    //     this.setState({\n    //         subNum: event.target.value\n    //     })\n    // }\n\n    componentDidMount() {\n        this.onResize()\n    }\n    componentDidUpdate() {\n        if (this.preContainerNodes && this.containerNodes) {\n            if (this.preContainerNodes.width !== this.containerNodes.width || this.preContainerNodes.height !== this.containerNodes.height) {\n                this.forceUpdate()\n            }\n        }\n    }\n    onResize = () => {\n        window.addEventListener('resize', () => {\n            if (this.debounceTimer) clearTimeout(debounceTimer)\n            setTimeout(() => {\n                this.forceUpdate()\n            }, 1000)\n        })\n    }\n    setFactId = (facts, index) => {\n        let _facts = _.cloneDeep(facts).map(fact => {\n            return {\n                ...fact,\n                id: `${index}QA${uuidv4()}`\n            }\n        })\n        return _facts\n    }\n\n    fullscreen = () => {\n        let element = document.documentElement;\n        if (element.requestFullscreen) {\n            element.requestFullscreen();\n        } else if (element.mozRequestFullScreen) {   // 兼容火狐\n            element.mozRequestFullScreen();\n        } else if (element.webkitRequestFullscreen) {    // 兼容谷歌\n            element.webkitRequestFullscreen();\n        } else if (element.msRequestFullscreen) {   // 兼容IE\n            element.msRequestFullscreen();\n        }\n    }\n    //re-order the array so the \"cards\" read left-right\n    reorder = (arr, columns) => {\n        const cols = columns;\n        const out = [];\n        let col = 0;\n        while (col < cols) {\n            for (let i = 0; i < arr.length; i += cols) {\n                let _val = arr[i + col];\n                if (_val !== undefined)\n                    out.push(_val);\n            }\n            col++;\n        }\n        return out\n    }\n    endEdit = (index) => {\n        let _nodes = subTitleNodes.get(index).current\n        if (_nodes) {\n            let { cachedQA } = this.props\n         if( cachedQA[index] )\n          {\n            cachedQA[index].question = _nodes.innerHTML\n          }\n            this.props.saveCachedDecomposedQA(cachedQA)\n        }\n    }\n    setSubTitleRef = (index) => {\n        subTitleNodes.set(index, React.createRef())\n        return subTitleNodes.get(index)\n    }\n    setContainerRef = (e) => {\n        if (e) {\n            let subTitleH = 55\n            this.containerNodes = { width: e.clientWidth, height: e.clientHeight - subTitleH }\n        }\n    }\n\n    endTitleEdit = () => {\n        let _nodes = this.titleRef.current\n        if (_nodes) {\n            let newtTitle = _nodes.innerHTML\n            if (newtTitle !== this.props.editedTitle) {\n                this.props.editTitle(newtTitle)\n            }\n        }\n    }\n    export = () => {\n        window.print()\n    }\n    getTitle = () => {\n        const { askedQuestion, editedTitle } = this.props\n        let titleValue = editedTitle ? editedTitle : askedQuestion\n        return titleValue.slice(0, 1).toUpperCase() + titleValue.slice(1)\n    }\n\n    isCanGetSize = () => {\n        this.preContainerNodes = {\n            width: 0,\n            height: 0\n        }\n        if (this.containerNodes) {\n            if (this.containerNodes.width !== 0 && this.containerNodes.height !== 0) {\n                this.preContainerNodes = _.cloneDeep(this.containerNodes)\n                return true\n            }\n\n        }\n        return false\n    }\n    render() {\n        const { initDone, intl, isEdit, decomposedQA, loading, isUpdateLayout } = this.props\n        if (!decomposedQA) return null\n        // const { num, subNum } = this.state\n        // decomposedQA = decomposedQA.slice(0, num).map(QA => {\n        //     return {\n        //         ...QA,\n        //         facts: QA.facts.slice(0, subNum)\n        //     }\n        // })\n\n        const TitleView = () => {\n            return <div className='title'>\n                <h1 contentEditable={isEdit}\n                    title={this.getTitle()}\n                    suppressContentEditableWarning\n                    onBlur={() => this.endTitleEdit()}\n                    ref={this.titleRef}>{`${this.getTitle() || (initDone && intl.get(\"inputHint\"))}`}</h1>\n                <div className='fullscreen_icon' onClick={this.fullscreen}></div>\n                <div className='export_icon' onClick={this.export}></div>\n            </div>\n        }\n\n        const SubTitleView = ({ index, subQustion, isEdit }) => {     \n            let newStr = subQustion.slice(0, 1).toUpperCase() + subQustion.slice(1)\n            return <div className='sub-title-box'>\n                <div className='right-box'>\n                    <div className={newStr === this.getTitle() ? 'right-top hightlight' : 'right-top default'}></div>\n                </div>\n                <div className='sub-title' style={{ borderColor: newStr === this.getTitle() ? '#F19C0F' : '#A1AEB9' }}>\n                    <div className={newStr === this.getTitle() ? 'index hightlight' : 'index default'}>{index + 1}</div>\n                    <h1 contentEditable={isEdit}\n                        suppressContentEditableWarning\n                        title={`${newStr}`}\n                        onBlur={() => this.endEdit(index)} ref={this.setSubTitleRef(index)}>{`${newStr}`}</h1>\n                </div>\n            </div >\n        }\n\n        let columns = decomposedQA.length === 4 ? 2 : decomposedQA.length\n        return (\n            <div className='large-size-screen'>\n                <TitleView {...this.props} />\n                {/* <div className='test'>\n                    View\n                    <select onChange={this.change} defaultValue={defaultNum}>\n                        <option value='1'>1</option>\n                        <option value='2'>2</option>\n                        <option value='3'>3</option>\n                        <option value='4'>4</option>\n                    </select>\n                </div>\n                <div className='sub_test'>\n                    subView\n                    <select onChange={this.subchange} defaultValue={defaultSubNum}>\n                        <option value='1'>1</option>\n                        <option value='2'>2</option>\n                        <option value='3'>3</option>\n                        <option value='4'>4</option>\n                        <option value='5'>5</option>\n                    </select>\n                </div> */}\n                <div className='auto-layout' style={{ columnCount: columns }}>\n                    <div className='dec1'></div>\n                    <div className='dec2'></div>\n                    {\n                        decomposedQA.length > 0 ? this.reorder(decomposedQA, columns).map((QA, index) => {\n                            return (\n                                <div className='subView' key={QA.id} style={{ height: decomposedQA.length === 4 ? \"calc(50% - 15px)\" : \"100%\", width: \"100%\" }} ref={(e) => this.setContainerRef(e)}>\n                                    <div className='d1'></div>\n                                    <div className='d2'></div>\n                                    {\n                                        decomposedQA.length > 1 && <SubTitleView  index={QA.id} subQustion={QA.question} isEdit={isEdit} />\n                                    }\n                                    {\n                                        this.isCanGetSize() ? <AnsweredFacts QAID={index} containerSize={this.containerNodes} facts={this.setFactId(QA.facts, index)} columnNum={decomposedQA.length} isUpdateLayout={isUpdateLayout} {...this.props} />\n                                            : null\n                                    }\n                                </div>\n                            )\n                        })\n                            :\n                            !loading && <ErrorView initDone={initDone, intl} intl={intl} />\n                    }\n                </div>\n            </div >\n        )\n    }\n}","import React, { Component } from 'react'\nimport { Spin } from 'antd';\nimport LayoutView from './Layout/layout'\nimport { getFactChartType } from '@/tool/fact2vis/fact2vis';\n// import BlankView from './blank'\nimport demoResponse from '../assets/json/demoResponse'\nimport * as api from '@/axios/api'\nimport './dashboard.less'\n\n\nexport default class Dashboard extends Component {\n\n    state = {\n        question: this.props.question,\n        decomposedQA: [],\n        loading: false\n    }\n\n    componentDidMount() {\n        // this.setState({\n        //     decomposedQA: this.addParams(demoResponse.story),\n        // })\n        const { cachedQA, question } = this.props\n        if (cachedQA) {\n            this.setState({\n                decomposedQA: cachedQA\n            })\n        } else {\n            this.getData(question)\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.question !== this.state.question) {\n            this.setState({\n                question: nextProps.question\n            })\n            this.getData(nextProps.question)\n        } else {\n            const { cachedQA } = nextProps\n            if (!cachedQA) return null\n            this.setState({\n                decomposedQA: cachedQA\n            })\n        }\n    }\n\n    getData = async (question) => {\n        const { fileName } = this.props\n        let data = {\n            file_name: fileName,\n            question,\n            model: ''\n        }\n        this.setState({\n            loading: true\n        })\n\n        //fake data\n        let _that = this\n        if (this.replaceData(question).length !== 0) {\n            let fakedata = this.addParams(this.replaceData(question))\n            setTimeout(() => {\n                _that.setState({\n                    loading: false,\n                    decomposedQA: fakedata\n                })\n                this.props.updateQuestion(question)\n                this.props.saveCachedDecomposedQA(fakedata)\n            }, 1000)\n            return\n        }\n        \n        this.props.updateQuestion(question)\n        let response = await api.generate(data)\n        if (!response.data || response.data === 'talk-generator error') {\n            this.setState({\n                loading: false,\n                decomposedQA: []\n            })\n            return\n        }\n\n        let decomposedQA = this.addParams(response.data.story)\n\n        this.setState({\n            loading: false,\n            decomposedQA\n        })\n        this.props.saveCachedDecomposedQA(decomposedQA)\n    }\n\n    replaceData = (question) => {\n        console.log(\"question\", question);\n        if (question === 'how is the sales?' || question === 'How is the sales?') {\n            return demoResponse.story1\n        } else if (question === 'does any brand sell a lot and has an increasing trend?' || question === 'Does any brand sell a lot and has an increasing trend?') {\n            return demoResponse.story2\n        }\n        return []\n    }\n\n\n    constructGroupBy = (breakdown) => {\n        return breakdown.map(d => d.field)\n    }\n    getFakeScript = (subQuestion, index) => {\n        let script = ''\n        //carsales\n        if (subQuestion === 'in which category has the highest sales and which the lowest ') {\n            script = 'in which category has the highest sales and which the lowest '\n        } else if (subQuestion === 'sales has an overall value of sales over year ') {\n            script = 'sales has an overall value of sales over year '\n        } else if (subQuestion === 'sales have an overall value of sales ') {\n            script = 'sales have an overall value of sales '\n        }\n\n        let caption;\n        if (subQuestion === 'Does any brand sell a lot but has a decreasing trend') {\n            caption = [\"caption1\", \"caption2\", \"caption3\"]\n            script = caption[index]\n        } else if (subQuestion === 'which brand has the highest sales and which brand has the lowest sales ') {\n            caption = [\"caption1\", \"caption2\", \"caption3\"]\n            script = caption[index]\n        } else if (subQuestion === 'which brand has an increasing trend of sales over brand ') {\n            caption = [\"caption1\", \"caption2\", \"caption3\"]\n            script = caption[index]\n        }\n        return script\n    }\n    getFakeFocus = (subQuestion, index, focus) => {\n        if (subQuestion === 'which brand has the highest sales and which brand has the lowest sales ') {\n            focus[0][\"value\"] = 'Ford'\n        }\n        if (subQuestion === 'which brand has the highest sales and which has the lowest ') {\n            focus[0][\"value\"] = 'Ford'\n        }\n\n        if (subQuestion === 'in which category has the highest sales and which the lowest ') {\n            focus[0][\"value\"] = 'SUV'\n        }\n        return focus\n    }\n\n\n    addParams = (story) => {\n        return story.map((d, id) => {\n            return {\n                question: d.question,\n                id,\n                facts: d.facts.map(fact => {\n                    if (!fact.chart || fact.chart === \"\") {\n                        fact.groupby = this.constructGroupBy(fact.breakdown)\n                        fact.chart = getFactChartType(this.props.schema, fact);\n                    }\n                    return {\n                        ...fact,\n                        groupby: fact.breakdown[0] ? [fact.breakdown[0].field] : [],\n                        //script: this.getFakeScript(d.question, id),\n                        //focus: this.getFakeFocus(d.question, id, fact.focus)\n                    }\n                })\n            }\n        })\n    }\n    render() {\n        const { decomposedQA, question, loading } = this.state\n        const { initDone, intl } = this.props\n\n        return (\n            <div className='Dashboard spin-center'>\n                {\n                    loading && <Spin tip={initDone && intl.get(\"Coverting\")} ></Spin>\n                }\n                <LayoutView\n                    loading={loading}\n                    askedQuestion={question}\n                    decomposedQA={decomposedQA}\n                    {...this.props} />\n            </div>\n        )\n    }\n}\n"],"sourceRoot":""}