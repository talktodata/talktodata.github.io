(this["webpackJsonpcalliope-talk"]=this["webpackJsonpcalliope-talk"]||[]).push([[13,7,19,25,28,30,31,35,59,60,61],{119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},149:function(e,t,a){"use strict";var r=a(195),n=Object.prototype.toString;function s(e){return"[object Array]"===n.call(e)}function o(e){return"undefined"===typeof e}function i(e){return null!==e&&"object"===typeof e}function u(e){if("[object Object]"!==n.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===n.call(e)}function p(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),s(e))for(var a=0,r=e.length;a<r;a++)t.call(null,e[a],a,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===n.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:i,isPlainObject:u,isUndefined:o,isDate:function(e){return"[object Date]"===n.call(e)},isFile:function(e){return"[object File]"===n.call(e)},isBlob:function(e){return"[object Blob]"===n.call(e)},isFunction:c,isStream:function(e){return i(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:p,merge:function e(){var t={};function a(a,r){u(t[r])&&u(a)?t[r]=e(t[r],a):u(a)?t[r]=e({},a):s(a)?t[r]=a.slice():t[r]=a}for(var r=0,n=arguments.length;r<n;r++)p(arguments[r],a);return t},extend:function(e,t,a){return p(t,(function(t,n){e[n]=a&&"function"===typeof t?r(t,a):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},158:function(e,t,a){var r=a(209),n="object"==typeof self&&self&&self.Object===Object&&self,s=r||n||Function("return this")();e.exports=s},159:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return s}));var r=a(0),n=r.isValidElement;function s(e,t){return function(e,t,a){return n(e)?r.cloneElement(e,"function"===typeof a?a(e.props||{}):a):t}(e,e,t)}},172:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},176:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t}},177:function(e,t,a){var r=a(158).Symbol;e.exports=r},178:function(e,t,a){var r=a(177),n=a(226),s=a(227),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?n(e):s(e)}},179:function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},181:function(e,t,a){"use strict";t.a={VALUE:"value",TREND:"trend",CATEGORIZATION:"categorization",DIFFERENCE:"difference",PROPORTION:"proportion",DISTRIBUTION:"distribution",RANK:"rank",ASSOCIATION:"association",EXTREME:"extreme",OUTLIER:"outlier"}},184:function(e,t,a){"use strict";var r="https://".concat("talk-api.idvxlab.com:8006"),n="https://".concat("talk-api.idvxlab.com:8006"),s={url:{uploadPrefix:r,uploadData:"".concat(r,"/upload"),share:"".concat(r,"/share"),fetch:"".concat(r,"/data/share"),factScoring:"".concat(n,"/fact"),generate:"".concat(n,"/generate"),candidateQuestions:"https://".concat("talk-api.idvxlab.com:8006","/column2questions")}};t.a=s},186:function(e,t,a){"use strict";t.a={JUXTAPOSITION:"juxtaposition",AREA_CHART:"Area Chart",VERTICAL_BAR_CHART:"Vertical Bar Chart",VERTICAL_DIFFERENCE_BAR_CHART:"Vertical Difference Bar Chart",VERTICAL_DIFFERENCE_ARROW_CHART:"Vertical Difference Arrow Chart",HORIZONTAL_BAR_CHART:"Horizontal Bar Chart",PROGRESS_BAR_CHART:"Progress Bar Chart",STACKED_BAR_CHART:"Stacked Bar Chart",ISOTYPE_BAR_CHART:"Isotype Bar Chart",PROPORTION_ISOTYPE_CHART:"Proportion Isotype Chart",COLOR_FILLING_MAP:"Color Filling Map",BUBBLE_CHART:"Bubble Chart",TEXT_CHART:"Text Chart",LINE_CHART:"Line Chart",STACKED_LINE_CHART:"Stacked Line Chart",RING_CHART:"Ring Chart",HALF_RING_CHART:"Half Ring Chart",PIE_CHART:"Pie Chart",SCATTER_PLOT:"Scatter Plot",TREE_MAP:"Treemap",BUBBLE_MAP:"Bubblemap"}},194:function(e,t,a){"use strict";a(155),a(219)},195:function(e,t,a){"use strict";e.exports=function(e,t){return function(){for(var a=new Array(arguments.length),r=0;r<a.length;r++)a[r]=arguments[r];return e.apply(t,a)}}},196:function(e,t,a){"use strict";var r=a(149);function n(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,a){if(!t)return e;var s;if(a)s=a(t);else if(r.isURLSearchParams(t))s=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(n(t)+"="+n(e))})))})),s=o.join("&")}if(s){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},197:function(e,t,a){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},198:function(e,t,a){"use strict";(function(t){var r=a(149),n=a(245),s={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i={adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof t&&"[object process]"===Object.prototype.toString.call(t))&&(e=a(199)),e}(),transformRequest:[function(e,t){return n(t,"Accept"),n(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){i.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){i.headers[e]=r.merge(s)})),e.exports=i}).call(this,a(271))},199:function(e,t,a){"use strict";var r=a(149),n=a(246),s=a(248),o=a(196),i=a(249),u=a(252),c=a(253),p=a(200);e.exports=function(e){return new Promise((function(t,a){var l=e.data,f=e.headers;r.isFormData(l)&&delete f["Content-Type"],(r.isBlob(l)||r.isFile(l))&&l.type&&delete f["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",y=unescape(encodeURIComponent(e.auth.password))||"";f.Authorization="Basic "+btoa(d+":"+y)}var m=i(e.baseURL,e.url);if(h.open(e.method.toUpperCase(),o(m,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in h?u(h.getAllResponseHeaders()):null,s={data:e.responseType&&"text"!==e.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:r,config:e,request:h};n(t,a,s),h=null}},h.onabort=function(){h&&(a(p("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){a(p("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),a(p(t,e,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var g=(e.withCredentials||c(m))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;g&&(f[e.xsrfHeaderName]=g)}if("setRequestHeader"in h&&r.forEach(f,(function(e,t){"undefined"===typeof l&&"content-type"===t.toLowerCase()?delete f[t]:h.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),e.responseType)try{h.responseType=e.responseType}catch(b){if("json"!==e.responseType)throw b}"function"===typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),a(e),h=null)})),l||(l=null),h.send(l)}))}},200:function(e,t,a){"use strict";var r=a(247);e.exports=function(e,t,a,n,s){var o=new Error(e);return r(o,t,a,n,s)}},201:function(e,t,a){"use strict";var r=a(149);e.exports=function(e,t){t=t||{};var a={},n=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],i=["validateStatus"];function u(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function c(n){r.isUndefined(t[n])?r.isUndefined(e[n])||(a[n]=u(void 0,e[n])):a[n]=u(e[n],t[n])}r.forEach(n,(function(e){r.isUndefined(t[e])||(a[e]=u(void 0,t[e]))})),r.forEach(s,c),r.forEach(o,(function(n){r.isUndefined(t[n])?r.isUndefined(e[n])||(a[n]=u(void 0,e[n])):a[n]=u(void 0,t[n])})),r.forEach(i,(function(r){r in t?a[r]=u(e[r],t[r]):r in e&&(a[r]=u(void 0,e[r]))}));var p=n.concat(s).concat(o).concat(i),l=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===p.indexOf(e)}));return r.forEach(l,c),a}},202:function(e,t,a){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},203:function(e,t,a){"use strict";var r=a(1),n=a(138),s=a(143),o=a(144),i=a(145),u=a(147),c=a(0),p=a(137),l=a.n(p),f=a(156),h=a(220),d=a.n(h),y=a(301),m=a(176),g=a(159),b=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]])}return a},T=(Object(m.a)("small","default","large"),null);var v=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var o;Object(s.a)(this,a),(o=t.call(this,e)).debouncifyUpdateSpinning=function(e){var t=(e||o.props).delay;t&&(o.cancelExistingSpin(),o.updateSpinning=d()(o.originalUpdateSpinning,t))},o.updateSpinning=function(){var e=o.props.spinning;o.state.spinning!==e&&o.setState({spinning:e})},o.renderSpin=function(e){var t,a=e.getPrefixCls,s=e.direction,i=o.props,u=i.prefixCls,p=i.className,h=i.size,d=i.tip,y=i.wrapperClassName,m=i.style,v=b(i,["prefixCls","className","size","tip","wrapperClassName","style"]),C=o.state.spinning,A=a("spin",u),F=l()(A,(t={},Object(n.a)(t,"".concat(A,"-sm"),"small"===h),Object(n.a)(t,"".concat(A,"-lg"),"large"===h),Object(n.a)(t,"".concat(A,"-spinning"),C),Object(n.a)(t,"".concat(A,"-show-text"),!!d),Object(n.a)(t,"".concat(A,"-rtl"),"rtl"===s),t),p),E=Object(f.a)(v,["spinning","delay","indicator"]),R=c.createElement("div",Object(r.a)({},E,{style:m,className:F}),function(e,t){var a=t.indicator,r="".concat(e,"-dot");return null===a?null:Object(g.b)(a)?Object(g.a)(a,{className:l()(a.props.className,r)}):Object(g.b)(T)?Object(g.a)(T,{className:l()(T.props.className,r)}):c.createElement("span",{className:l()(r,"".concat(e,"-dot-spin"))},c.createElement("i",{className:"".concat(e,"-dot-item")}),c.createElement("i",{className:"".concat(e,"-dot-item")}),c.createElement("i",{className:"".concat(e,"-dot-item")}),c.createElement("i",{className:"".concat(e,"-dot-item")}))}(A,o.props),d?c.createElement("div",{className:"".concat(A,"-text")},d):null);if(o.isNestedPattern()){var O=l()("".concat(A,"-container"),Object(n.a)({},"".concat(A,"-blur"),C));return c.createElement("div",Object(r.a)({},E,{className:l()("".concat(A,"-nested-loading"),y)}),C&&c.createElement("div",{key:"loading"},R),c.createElement("div",{className:O,key:"container"},o.props.children))}return R};var i=e.spinning,u=function(e,t){return!!e&&!!t&&!isNaN(Number(t))}(i,e.delay);return o.state={spinning:i&&!u},o.originalUpdateSpinning=o.updateSpinning,o.debouncifyUpdateSpinning(e),o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.updateSpinning()}},{key:"componentDidUpdate",value:function(){this.debouncifyUpdateSpinning(),this.updateSpinning()}},{key:"componentWillUnmount",value:function(){this.cancelExistingSpin()}},{key:"cancelExistingSpin",value:function(){var e=this.updateSpinning;e&&e.cancel&&e.cancel()}},{key:"isNestedPattern",value:function(){return!(!this.props||"undefined"===typeof this.props.children)}},{key:"render",value:function(){return c.createElement(y.a,null,this.renderSpin)}}],[{key:"setDefaultIndicator",value:function(e){T=e}}]),a}(c.Component);v.defaultProps={spinning:!0,size:"default",wrapperClassName:""},t.a=v},204:function(e,t,a){"use strict";a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return f})),a.d(t,"b",(function(){return h}));var r=a(161),n=a.n(r),s=a(192),o=a(184),i=a(238),u=a.n(i);function c(e){return p.apply(this,arguments)}function p(){return(p=Object(s.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){u()({method:"post",url:"".concat(o.a.url.uploadData),config:{headers:{"Content-Type":"multipart/form-data"}},data:t}).then((function(t){t.status>=400?a():200===t.status||201===t.status||204===t.status?e(t.data):a()})).catch((function(e){a()}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return u()({method:"post",url:"".concat(o.a.url.generate),config:{headers:{"Content-Type":"application/json; charset=utf-8"}},data:e})}function f(e){return u()({method:"post",url:"".concat(o.a.url.candidateQuestions),config:{headers:{"Content-Type":"application/json; charset=utf-8"}},data:e})}function h(e){return u()({method:"post",url:"/generatePDF",param:{},data:e})}},205:function(e,t,a){"use strict";t.a={NUMERICAL:"numerical",CATEGORICAL:"categorical",TEMPORAL:"temporal",GEOGRAPHICAL:"geographical"}},209:function(e,t,a){(function(t){var a="object"==typeof t&&t&&t.Object===Object&&t;e.exports=a}).call(this,a(13))},219:function(e,t,a){},220:function(e,t,a){var r=a(172),n=a(221),s=a(222),o=Math.max,i=Math.min;e.exports=function(e,t,a){var u,c,p,l,f,h,d=0,y=!1,m=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var a=u,r=c;return u=c=void 0,d=t,l=e.apply(r,a)}function T(e){return d=e,f=setTimeout(C,t),y?b(e):l}function v(e){var a=e-h;return void 0===h||a>=t||a<0||m&&e-d>=p}function C(){var e=n();if(v(e))return A(e);f=setTimeout(C,function(e){var a=t-(e-h);return m?i(a,p-(e-d)):a}(e))}function A(e){return f=void 0,g&&u?b(e):(u=c=void 0,l)}function F(){var e=n(),a=v(e);if(u=arguments,c=this,h=e,a){if(void 0===f)return T(h);if(m)return clearTimeout(f),f=setTimeout(C,t),b(h)}return void 0===f&&(f=setTimeout(C,t)),l}return t=s(t)||0,r(a)&&(y=!!a.leading,p=(m="maxWait"in a)?o(s(a.maxWait)||0,t):p,g="trailing"in a?!!a.trailing:g),F.cancel=function(){void 0!==f&&clearTimeout(f),d=0,u=h=c=f=void 0},F.flush=function(){return void 0===f?l:A(n())},F}},221:function(e,t,a){var r=a(158);e.exports=function(){return r.Date.now()}},222:function(e,t,a){var r=a(223),n=a(172),s=a(225),o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var a=i.test(e);return a||u.test(e)?c(e.slice(2),a?2:8):o.test(e)?NaN:+e}},223:function(e,t,a){var r=a(224),n=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(n,""):e}},224:function(e,t){var a=/\s/;e.exports=function(e){for(var t=e.length;t--&&a.test(e.charAt(t)););return t}},225:function(e,t,a){var r=a(178),n=a(179);e.exports=function(e){return"symbol"==typeof e||n(e)&&"[object Symbol]"==r(e)}},226:function(e,t,a){var r=a(177),n=Object.prototype,s=n.hasOwnProperty,o=n.toString,i=r?r.toStringTag:void 0;e.exports=function(e){var t=s.call(e,i),a=e[i];try{e[i]=void 0;var r=!0}catch(u){}var n=o.call(e);return r&&(t?e[i]=a:delete e[i]),n}},227:function(e,t){var a=Object.prototype.toString;e.exports=function(e){return a.call(e)}},235:function(e,t,a){"use strict";function r(e,t){return e===t}function n(e,t,a){if(null===t||null===a||t.length!==a.length)return!1;for(var r=t.length,n=0;n<r;n++)if(!e(t[n],a[n]))return!1;return!0}function s(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var a=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+a+"]")}return t}a.d(t,"d",(function(){return T})),a.d(t,"l",(function(){return v})),a.d(t,"b",(function(){return C})),a.d(t,"j",(function(){return A})),a.d(t,"g",(function(){return F})),a.d(t,"f",(function(){return E})),a.d(t,"h",(function(){return R})),a.d(t,"a",(function(){return O})),a.d(t,"i",(function(){return x})),a.d(t,"e",(function(){return w})),a.d(t,"c",(function(){return S})),a.d(t,"k",(function(){return k}));var o=function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=0,i=r.pop(),u=s(r),c=e.apply(void 0,[function(){return o++,i.apply(null,arguments)}].concat(a)),p=e((function(){for(var e=[],t=u.length,a=0;a<t;a++)e.push(u[a].apply(null,arguments));return c.apply(null,e)}));return p.resultFunc=i,p.dependencies=u,p.recomputations=function(){return o},p.resetRecomputations=function(){return o=0},p}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,a=null,s=null;return function(){return n(t,a,arguments)||(s=e.apply(null,arguments)),a=arguments,s}}));var i=a(141),u=a(185),c=a.n(u),p=function(e,t){var a,r,n=e.type===t.type?1:0,s=e.measure.map((function(e){return e.field})),o=t.measure.map((function(e){return e.field}));if(0===s.length&&0===o.length)a=1;else{var i=s.filter((function(e){return o.includes(e)})),u=s.length>o.length?s:o;a=i.length/u.length}var c,p=e.subspace.map((function(e){return e.field})),l=t.subspace.map((function(e){return e.field}));if(0===p.length&&0===l.length)r=1;else{var f=p.filter((function(e){return l.includes(e)})),h=p.length>l.length?p:l;r=f.length/h.length}var d,y=e.groupby,m=t.groupby;if(0===y.length&&0===m.length)c=1;else{var g=y.filter((function(e){return m.includes(e)})),b=y.length>m.length?y:m;c=g.length/b.length}var T=e.focus.map((function(e){return e.value})),v=t.focus.map((function(e){return e.value}));if(0===T.length&&0===v.length)d=0;else{var C=T.filter((function(e){return v.includes(e)})),A=T.length>v.length?T:v;d=C.length/A.length}return.2*n+.2*a+.2*r+.2*c+.2*d},l=function(e,t){return 1-p(e,t)},f=function(e,t,a){this.distance=e,this.linkage=t,this.threshold=void 0===a?1/0:a};f.prototype={cluster:function(e,t,a){this.clusters=[],this.dists=[],this.mins=[],this.index=[];for(var r=0;r<e.length;r++){var n={value:e[r],key:r,index:r,size:1};this.clusters[r]=n,this.index[r]=n,this.dists[r]=[],this.mins[r]=0}for(var s=0;s<this.clusters.length;s++)for(var o=0;o<=s;o++){var i=s===o?1/0:this.distance(this.clusters[s].value,this.clusters[o].value);this.dists[s][o]=i,this.dists[o][s]=i,i<this.dists[s][this.mins[s]]&&(this.mins[s]=o)}for(var u=this.mergeClosest(),c=0;u;)a&&c++%t===0&&a(this.clusters),u=this.mergeClosest();return this.clusters.forEach((function(e){delete e.key,delete e.index})),this.clusters},mergeClosest:function(){for(var e=0,t=1/0,a=0;a<this.clusters.length;a++){var r=this.clusters[a].key,n=this.dists[r][this.mins[r]];n<t&&(e=r,t=n)}if(t>=this.threshold)return!1;var s=this.index[e],o=this.index[this.mins[e]],i={left:s,right:o,key:s.key,size:s.size+o.size};this.clusters[s.index]=i,this.clusters.splice(o.index,1),this.index[s.key]=i;for(var u=0;u<this.clusters.length;u++){var c=this.clusters[u],p=void 0;s.key===c.key?p=1/0:"single"===this.linkage?(p=this.dists[s.key][c.key],this.dists[s.key][c.key]>this.dists[o.key][c.key]&&(p=this.dists[o.key][c.key])):"complete"===this.linkage?(p=this.dists[s.key][c.key],this.dists[s.key][c.key]<this.dists[o.key][c.key]&&(p=this.dists[o.key][c.key])):p="average"===this.linkage?(this.dists[s.key][c.key]*s.size+this.dists[o.key][c.key]*o.size)/(s.size+o.size):this.distance(c.value,s.value),this.dists[s.key][c.key]=this.dists[c.key][s.key]=p}for(var l=0;l<this.clusters.length;l++){var f=this.clusters[l].key;if(this.mins[f]===s.key||this.mins[f]===o.key){for(var h=f,d=0;d<this.clusters.length;d++){var y=this.clusters[d].key;this.dists[f][y]<this.dists[f][h]&&(h=y)}this.mins[f]=h}this.clusters[l].index=l}return delete s.key,delete o.key,delete s.index,delete o.index,!0}};var h=a(150),d=[{"Fact Type 1":"distribution","Fact Type 2":"distribution",Chart:"Stacked Bar Chart",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"distribution","Fact Type 2":"difference",Chart:"Vertical Bar Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:"difference"},{"Fact Type 1":"distribution","Fact Type 2":"rank",Chart:"Horizontal Bar Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:"rank"},{"Fact Type 1":"distribution","Fact Type 2":"categorization",Chart:"Isotype Bar Chart",Measure:"distribution",Subspace:"equal",Groupby:"equal",Focus:""},{"Fact Type 1":"distribution","Fact Type 2":"value",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"distribution","Fact Type 2":"extreme",Chart:"Vertical Bar Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:"extreme"},{"Fact Type 1":"distribution","Fact Type 2":"proportion",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"distribution","Fact Type 2":"outlier",Chart:"Vertical Bar Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:"outlier"},{"Fact Type 1":"distribution","Fact Type 2":"association",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"distribution","Fact Type 2":"trend",Chart:"Vertical Bar Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:""},{"Fact Type 1":"difference","Fact Type 2":"distribution",Chart:"Vertical Bar Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:"difference"},{"Fact Type 1":"difference","Fact Type 2":"difference",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"difference","Fact Type 2":"rank",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"difference","Fact Type 2":"categorization",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"difference","Fact Type 2":"value",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"difference","Fact Type 2":"extreme",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"difference","Fact Type 2":"proportion",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"difference","Fact Type 2":"outlier",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"difference","Fact Type 2":"association",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"difference","Fact Type 2":"trend",Chart:"Vertical Bar Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:"difference"},{"Fact Type 1":"rank","Fact Type 2":"distribution",Chart:"Horizontal Bar Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:"rank"},{"Fact Type 1":"rank","Fact Type 2":"difference",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"rank","Fact Type 2":"rank",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"rank","Fact Type 2":"categorization",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"rank","Fact Type 2":"value",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"rank","Fact Type 2":"extreme",Chart:"Horizontal Bar Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:"rank"},{"Fact Type 1":"rank","Fact Type 2":"proportion",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"rank","Fact Type 2":"outlier",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"rank","Fact Type 2":"association",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"rank","Fact Type 2":"trend",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"categorization","Fact Type 2":"distribution",Chart:"Isotype Bar Chart",Measure:"distribution",Subspace:"equal",Groupby:"equal",Focus:""},{"Fact Type 1":"categorization","Fact Type 2":"difference",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"categorization","Fact Type 2":"rank",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"categorization","Fact Type 2":"categorization",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"categorization","Fact Type 2":"value",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"categorization","Fact Type 2":"extreme",Chart:"Isotype Bar Chart",Measure:"extreme",Subspace:"equal",Groupby:"equal",Focus:"extreme"},{"Fact Type 1":"categorization","Fact Type 2":"proportion",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"categorization","Fact Type 2":"outlier",Chart:"Isotype Bar Chart",Measure:"outlier",Subspace:"equal",Groupby:"equal",Focus:"outlier"},{"Fact Type 1":"categorization","Fact Type 2":"association",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"categorization","Fact Type 2":"trend",Chart:"Isotype Bar Chart",Measure:"trend",Subspace:"equal",Groupby:"equal",Focus:""},{"Fact Type 1":"value","Fact Type 2":"distribution",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"value","Fact Type 2":"difference",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"value","Fact Type 2":"rank",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"value","Fact Type 2":"categorization",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"value","Fact Type 2":"value",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"value","Fact Type 2":"extreme",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"value","Fact Type 2":"proportion",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"value","Fact Type 2":"outlier",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"value","Fact Type 2":"association",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"value","Fact Type 2":"trend",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"extreme","Fact Type 2":"distribution",Chart:"Vertical Bar Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:"extreme"},{"Fact Type 1":"extreme","Fact Type 2":"difference",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"extreme","Fact Type 2":"rank",Chart:"Horizontal Bar Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:"rank"},{"Fact Type 1":"extreme","Fact Type 2":"categorization",Chart:"Isotype Bar Chart",Measure:"extreme",Subspace:"equal",Groupby:"equal",Focus:"extreme"},{"Fact Type 1":"extreme","Fact Type 2":"value",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"extreme","Fact Type 2":"extreme",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"extreme","Fact Type 2":"proportion",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"extreme","Fact Type 2":"outlier",Chart:"Vertical Bar Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:"extreme+outlier"},{"Fact Type 1":"extreme","Fact Type 2":"association",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"extreme","Fact Type 2":"trend",Chart:"Line Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:"extreme"},{"Fact Type 1":"proportion","Fact Type 2":"distribution",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"proportion","Fact Type 2":"difference",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"proportion","Fact Type 2":"rank",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"proportion","Fact Type 2":"categorization",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"proportion","Fact Type 2":"value",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"proportion","Fact Type 2":"extreme",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"proportion","Fact Type 2":"proportion",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"proportion","Fact Type 2":"outlier",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"proportion","Fact Type 2":"association",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"proportion","Fact Type 2":"trend",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"outlier","Fact Type 2":"distribution",Chart:"Vertical Bar Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:"outlier"},{"Fact Type 1":"outlier","Fact Type 2":"difference",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"outlier","Fact Type 2":"rank",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"outlier","Fact Type 2":"categorization",Chart:"Isotype Bar Chart",Measure:"outlier",Subspace:"equal",Groupby:"equal",Focus:"outlier"},{"Fact Type 1":"outlier","Fact Type 2":"value",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"outlier","Fact Type 2":"extreme",Chart:"Vertical Bar Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:"extreme+outlier"},{"Fact Type 1":"outlier","Fact Type 2":"proportion",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"outlier","Fact Type 2":"outlier",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"outlier","Fact Type 2":"association",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"outlier","Fact Type 2":"trend",Chart:"Line Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:"outlier"},{"Fact Type 1":"association","Fact Type 2":"distribution",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"association","Fact Type 2":"difference",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"association","Fact Type 2":"rank",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"association","Fact Type 2":"categorization",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"association","Fact Type 2":"value",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"association","Fact Type 2":"extreme",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"association","Fact Type 2":"proportion",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"association","Fact Type 2":"outlier",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"association","Fact Type 2":"association",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"association","Fact Type 2":"trend",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"trend","Fact Type 2":"distribution",Chart:"Vertical Bar Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:""},{"Fact Type 1":"trend","Fact Type 2":"difference",Chart:"Vertical Bar Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:"difference"},{"Fact Type 1":"trend","Fact Type 2":"rank",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"trend","Fact Type 2":"categorization",Chart:"Isotype Bar Chart",Measure:"trend",Subspace:"equal",Groupby:"equal",Focus:""},{"Fact Type 1":"trend","Fact Type 2":"value",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"trend","Fact Type 2":"extreme",Chart:"Line Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:"extreme"},{"Fact Type 1":"trend","Fact Type 2":"proportion",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"trend","Fact Type 2":"outlier",Chart:"Line Chart",Measure:"equal",Subspace:"equal",Groupby:"equal",Focus:"outlier"},{"Fact Type 1":"trend","Fact Type 2":"association",Chart:"juxtaposition",Measure:"",Subspace:"",Groupby:"",Focus:""},{"Fact Type 1":"trend","Fact Type 2":"trend",Chart:"Stacked Line Chart",Measure:"",Subspace:"",Groupby:"",Focus:""}],y=a(186),m=function(e,t){for(var a=e.slice(),r=0;r<a.length;r++)a[r].index=r,a[r].aggregated=!1,a[r].aggregatedFact=null;var n=function e(t){var a=[];if(!t)return a;if(t.size>2){var r=e(t.left),n=e(t.right);a.push.apply(a,Object(h.a)(r)),a.push.apply(a,Object(h.a)(n))}else 2===t.size?a.push([t.left.value,t.right.value]):a.push([t.value]);return a}(function(e,t,a,r,n){var s=new f(l,t=t||"average",a).cluster(e,r,n);return void 0===a?s[0]:s}(a)).filter((function(e){return e.length>1}));n.sort((function(e,t){return p(t[0],t[1])-p(e[0],e[1])}));var s,o=parseInt((n.length+1)*t),u=n.slice(0,o),c=Object(i.a)(u);try{for(c.s();!(s=c.n()).done;){var d=s.value,y=d[0].index<d[1].index?d[0].index:d[1].index,m=d[0].index>d[1].index?d[0].index:d[1].index;a[y]=g(a[y],a[m]),a[m].aggregated=!0,a[m].aggregatedFact=null}}catch(b){c.e(b)}finally{c.f()}return a},g=function(e,t){var a=d.filter((function(a){return a["Fact Type 1"]===e.type&&a["Fact Type 2"]===t.type}))[0],r=c.a.cloneDeep(e);if(r.aggregated=!0,r.aggregatedFact=c.a.cloneDeep(t),r.compoundType=[e.type,t.type],r.compoundChart=y.a.JUXTAPOSITION,r.score+=r.aggregatedFact.score,a.chart===y.a.JUXTAPOSITION)return r;if(a.chart===y.a.STACKED_BAR_CHART)return r.compoundChart=y.a.STACKED_BAR_CHART,r;if(a.chart===y.a.STACKED_LINE_CHART)return r.compoundChart=y.a.STACKED_LINE_CHART,r;if("equal"===a.Measure&&!b(new Set(e.measure.map((function(e){return e.field}))),new Set(t.measure.map((function(e){return e.field})))))return r;if("equal"===a.Subspace&&!b(new Set(e.subspace.map((function(e){return e.field+"++"+e.value}))),new Set(t.subspace.map((function(e){return e.field+"++"+e.value})))))return r;if("equal"===a.Groupby&&!b(new Set(e.groupby),new Set(t.groupby)))return r;if("equal"===a.Focus&&!b(new Set(e.focus.map((function(e){return e.field+"++"+e.value}))),new Set(t.focus.map((function(e){return e.field+"++"+e.value})))))return r;return r.compoundChart=a.Chart,"equal"!==a.Measure&&""!==a.Measure&&(e.type===a.Measure?r.measure=e.measure:r.measure=t.measure),"equal"!==a.Subspace&&""!==a.Subspace&&(e.type===a.Subspace?r.subspace=e.subspace:r.subspace=t.subspace),"equal"!==a.Groupby&&""!==a.Groupby&&(e.type===a.Groupby?r.groupby=e.groupby:r.groupby=t.groupby),"equal"!==a.Focus&&""!==a.Focus&&(e.type===a.Focus?r.focus=e.focus:r.focus=t.focus),r};function b(e,t){if(e.size!==t.size)return!1;var a,r=Object(i.a)(e);try{for(r.s();!(a=r.n()).done;){var n=a.value;if(!t.has(n))return!1}}catch(s){r.e(s)}finally{r.f()}return!0}var T=function(e){return e.story.fileName},v=function(e){return e.story.title},C=function(e){return e.story.data},A=function(e){return e.story.schema},F=function(e){return e.story.relations},E=function(e){return e.story.maxStoryLength},R=function(e){return e.story.resultCoverage},O=function(e){return e.story.aggregationLevel},x=function(e){return e.story.rewardWeight},w=function(e){return e.story.generateProgress},S=o((function(e){return e.story.facts}),O,(function(e,t){return m(e,t)})),k=o(E,(function(e){return e.story.information}),(function(e){return e.story.chartDiversity}),(function(e){return e.story.timeLimit}),(function(e,t,a,r){return{maxStoryLength:e,information:t,chartDiversity:a,timeLimit:r}}))},236:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return p}));var r=a(181),n=a(274),s=function(e,t,a){var r=n.a.filter((function(t){return t.fact===e}));if(t&&(r=r.filter((function(e){return e.chart===t}))),0===r.length)return[];var s=new Set;r.forEach((function(e){e.breakdownType.forEach((function(e){s.add(e)}))}));var o=Array.from(s);return a.filter((function(e){return-1!==o.indexOf(e.type)}))},o=a(141),i=function(e,t){var a,r=e,n=Object(o.a)(t);try{var s=function(){var e=a.value;r=r.filter((function(t){return t[e.field]===e.value}))};for(n.s();!(a=n.n()).done;)s()}catch(i){n.e(i)}finally{n.f()}return r},u=a(154),c=function(e){var t=!1;switch(e.type){case r.a.ASSOCIATION:2===e.measure.length&&(t=!0);break;case r.a.CATEGORIZATION:e.groupby.length&&(t=!0);break;case r.a.DIFFERENCE:e.measure.length&&e.groupby.length&&e.focus.length>=2&&(t=!0);break;case r.a.DISTRIBUTION:e.measure.length&&e.groupby.length&&(t=!0);break;case r.a.EXTREME:case r.a.OUTLIER:case r.a.PROPORTION:e.measure.length&&e.groupby.length&&e.focus.length&&(t=!0);break;case r.a.RANK:case r.a.TREND:e.measure.length&&e.groupby.length&&(t=!0);break;case r.a.VALUE:e.measure.length&&(t=!0)}return t},p=function(e,t,a){var n=Object.assign({},e);switch(e.type){case r.a.ASSOCIATION:if(n.focus=[],t&&a){var o=s(e.type,e.chart,t);0===n.groupby.length&&o.length>0&&(n.groupby=[o[0].field]);var u=t.filter((function(e){return"numerical"===e.type}));0===n.measure.length&&u.length>0&&(n.measure=[{field:u[0].field,aggregate:"count"}]),1===n.measure.length&&n.measure.push({field:"COUNT",aggregate:"count"})}break;case r.a.CATEGORIZATION:if(n.measure=[],n.focus=[],t&&a){var c=s(e.type,e.chart,t);0===n.groupby.length&&c.length>0&&(n.groupby=[c[0].field])}break;case r.a.DIFFERENCE:if(t&&a){var p=s(e.type,e.chart,t),l=h(a,e.groupby);0===n.groupby.length&&p.length>0&&(n.groupby=[p[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}]),n.focus.length||(n.focus=[{field:n.groupby[0],value:l[0]},{field:n.groupby[0],value:l[1]}])}break;case r.a.DISTRIBUTION:if(n.focus=[],t&&a){var d=s(e.type,e.chart,t);0===n.groupby.length&&d.length>0&&(n.groupby=[d[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}])}break;case r.a.EXTREME:if(t&&a){var y=s(e.type,e.chart,t);if(0===n.groupby.length&&y.length>0&&(n.groupby=[y[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}]),n.measure.length&&n.groupby.length){var m={y:{}};m.y.field=n.measure[0].field,m.y.aggregation=n.measure[0].aggregate,m.x={},m.x.field=n.groupby[0];var g=i(a,n.subspace),b=f(g,m),T=n.measure[0].field,v=b.reduce((function(e,t){return e[T]>t[T]?e:t}));n.focus.length||(n.focus=[{field:n.groupby[0],value:v[n.groupby[0]],extremeFocus:"max",extremeValue:v[n.measure[0].field]}])}}break;case r.a.OUTLIER:if(t&&a){var C=s(e.type,e.chart,t);if(0===n.groupby.length&&C.length>0&&(n.groupby=[C[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}]),n.measure.length&&n.groupby.length){var A={y:{}};A.y.field=n.measure[0].field,A.y.aggregation=n.measure[0].aggregate,A.x={},A.x.field=n.groupby[0];var F=i(a,n.subspace),E=f(F,A),R=E.sort((function(e,t){return t[A.y.field]-e[A.y.field]})).map((function(e){return e[A.x.field]})),O=E.sort((function(e,t){return t[A.y.field]-e[A.y.field]})).map((function(e){return e[A.y.field]})),x=O.length,w=parseInt(.25*(x-1)),S=parseInt(.75*(x-1)),k=.25*(x-1)-w,I=.75*(x-1)-S,N=O[w]+(O[w+1]-O[w])*k,j=O[S]+(O[S+1]-O[S])*I,L=j-1.5*(N-j),G=N+1.5*(N-j),M=[];O.forEach((function(e,t){(e>G||e<L)&&M.push(t)})),!n.focus.length&&M.length&&(n.focus=[{field:e.groupby[0],value:R[M[0]]}])}}break;case r.a.PROPORTION:if(t&&a){var _=s(e.type,e.chart,t);if(0===n.groupby.length&&_.length>0&&(n.groupby=[_[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}]),n.measure.length&&n.groupby.length){var q={y:{}};q.y.field=n.measure[0].field,q.y.aggregation=n.measure[0].aggregate,q.x={},q.x.field=n.groupby[0];var P=i(a,n.subspace),H=f(P,q),B=n.measure[0].field,U=H.reduce((function(e,t){return e[B]>t[B]?e:t}));n.focus.length||(n.focus=[{field:n.groupby[0],value:U[n.groupby[0]]}])}}break;case r.a.RANK:if(n.focus=[],t&&a){var D=s(n.type,n.chart,t);0===n.groupby.length&&D.length>0&&(n.groupby=[D[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}])}break;case r.a.TREND:if(n.focus=[],t&&a){var z=t.filter((function(e){return"temporal"===e.type})),V=z.map((function(e){return e.field}));0===z.length?n.groupby=[]:0!==n.groupby.length&&-1!==V.indexOf(n.groupby[0])||(n.groupby=[z[0].field]),0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}])}break;case r.a.VALUE:n.groupby=[],n.focus=[],t&&a&&0===n.measure.length&&(n.measure=[{field:"COUNT",aggregate:"count"}])}return n},l=function(e,t){return u.nest().key((function(e){return e[t.x.field]})).entries(e).map((function(e,a){var r=u.scan(e.values,(function(e,a){if(e[t.y.field]&&a[t.y.field])return a[t.y.field]-e[t.y.field]}));return r>=0?e.values[r]:e.values[0]}))},f=function(e,t){var a;switch(t.y.aggregation){case"sum":a=function(e,t){var a=u.nest().key((function(e){return e[t.x.field]})).entries(e),r=new Array(a.length).fill(0);return a.map((function(e,a){e.values.forEach((function(e){r[a]+=e[t.y.field]}));var n=Object.assign({},e.values[0]);return n[t.y.field]=r[a],n}))}(e,t);break;case"avg":a=function(e,t){var a=u.nest().key((function(e){return e[t.x.field]})).entries(e),r=new Array(a.length).fill(0);return a.map((function(e,a){e.values.forEach((function(e){r[a]+=e[t.y.field]}));var n=Object.assign({},e.values[0]);return n[t.y.field]=r[a]/e.values.length,n}))}(e,t);break;case"max":a=l(e,t);break;case"min":a=function(e,t){return u.nest().key((function(e){return e[t.x.field]})).entries(e).map((function(e){var a=u.scan(e.values,(function(e,a){if(e[t.y.field]&&a[t.y.field])return e[t.y.field]-a[t.y.field]}));return a>=0?e.values[a]:e.values[0]}))}(e,t);break;case"count":a=function(e,t){var a=u.nest().key((function(e){return e[t.x.field]})).entries(e),r=new Array(a.length).fill(0);return a.map((function(e,t){e.values.forEach((function(){r[t]+=1}));var a=Object.assign({},e.values[0]);return a.COUNT=r[t],a}))}(e,t);break;default:a=l(e,t)}return a},h=function(e,t){return t?Array.from(new Set(e.map((function(e){return e[t]})))):[]}},238:function(e,t,a){e.exports=a(240)},240:function(e,t,a){"use strict";var r=a(149),n=a(195),s=a(241),o=a(201);function i(e){var t=new s(e),a=n(s.prototype.request,t);return r.extend(a,s.prototype,t),r.extend(a,t),a}var u=i(a(198));u.Axios=s,u.create=function(e){return i(o(u.defaults,e))},u.Cancel=a(202),u.CancelToken=a(254),u.isCancel=a(197),u.all=function(e){return Promise.all(e)},u.spread=a(255),e.exports=u,e.exports.default=u},241:function(e,t,a){"use strict";var r=a(149),n=a(196),s=a(242),o=a(243),i=a(201);function u(e){this.defaults=e,this.interceptors={request:new s,response:new s}}u.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=i(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[o,void 0],a=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)a=a.then(t.shift(),t.shift());return a},u.prototype.getUri=function(e){return e=i(this.defaults,e),n(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,a){return this.request(i(a||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,a,r){return this.request(i(r||{},{method:e,url:t,data:a}))}})),e.exports=u},242:function(e,t,a){"use strict";var r=a(149);function n(){this.handlers=[]}n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=n},243:function(e,t,a){"use strict";var r=a(149),n=a(244),s=a(197),o=a(198);function i(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return i(e),e.headers=e.headers||{},e.data=n(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return i(e),t.data=n(t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(i(e),t&&t.response&&(t.response.data=n(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},244:function(e,t,a){"use strict";var r=a(149);e.exports=function(e,t,a){return r.forEach(a,(function(a){e=a(e,t)})),e}},245:function(e,t,a){"use strict";var r=a(149);e.exports=function(e,t){r.forEach(e,(function(a,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=a,delete e[r])}))}},246:function(e,t,a){"use strict";var r=a(200);e.exports=function(e,t,a){var n=a.config.validateStatus;a.status&&n&&!n(a.status)?t(r("Request failed with status code "+a.status,a.config,null,a.request,a)):e(a)}},247:function(e,t,a){"use strict";e.exports=function(e,t,a,r,n){return e.config=t,a&&(e.code=a),e.request=r,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},248:function(e,t,a){"use strict";var r=a(149);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,a,n,s,o){var i=[];i.push(e+"="+encodeURIComponent(t)),r.isNumber(a)&&i.push("expires="+new Date(a).toGMTString()),r.isString(n)&&i.push("path="+n),r.isString(s)&&i.push("domain="+s),!0===o&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},249:function(e,t,a){"use strict";var r=a(250),n=a(251);e.exports=function(e,t){return e&&!r(t)?n(e,t):t}},25:function(e,t,a){"use strict";a.r(t);var r=a(19),n=a(235),s=a(500),o=a(382),i=a(416),u=a(41),c=a(305),p=a(59);t.default=Object(r.b)((function(e){return{schema:Object(n.j)(e),relations:Object(n.g)(e),data:Object(n.b)(e),title:Object(n.l)(e),resultCoverage:Object(n.h)(e),fileName:Object(n.d)(e),storyParameter:Object(n.k)(e),maxStoryLength:Object(n.f)(e),rewardWeight:Object(n.i)(e),aggregationLevel:Object(n.a)(e),generateProgress:Object(n.e)(e),cachedQA:Object(s.a)(e),isUpdateLayout:Object(s.c)(e),editedTitle:Object(s.b)(e)}}),(function(e){return{uploadData:function(t,a,r){return e(o.a(t,a,r))},generateStory:function(t,a,r){return e(i.a(t,a,r))},updateProgress:function(t,a){return e(i.b(t,a))},updateQuestion:function(t){return e(c.b(t))},saveCachedDecomposedQA:function(t){return e(c.a(t))},updateCovertType:function(t){return e(u.d(t))},updateOperation:function(t){return e(u.f(t))},editTitle:function(t){return e(u.b(t))}}}))(p.default)},250:function(e,t,a){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},251:function(e,t,a){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},252:function(e,t,a){"use strict";var r=a(149),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,a,s,o={};return e?(r.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=r.trim(e.substr(0,s)).toLowerCase(),a=r.trim(e.substr(s+1)),t){if(o[t]&&n.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([a]):o[t]?o[t]+", "+a:a}})),o):o}},253:function(e,t,a){"use strict";var r=a(149);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a");function n(e){var r=e;return t&&(a.setAttribute("href",r),r=a.href),a.setAttribute("href",r),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:"/"===a.pathname.charAt(0)?a.pathname:"/"+a.pathname}}return e=n(window.location.href),function(t){var a=r.isString(t)?n(t):t;return a.protocol===e.protocol&&a.host===e.host}}():function(){return!0}},254:function(e,t,a){"use strict";var r=a(202);function n(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var a=this;e((function(e){a.reason||(a.reason=new r(e),t(a.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n((function(t){e=t})),cancel:e}},e.exports=n},255:function(e,t,a){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},274:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a(181),n=a(186),s=a(205),o=[{fact:r.a.ASSOCIATION,chart:n.a.SCATTER_PLOT,breakdownType:[s.a.CATEGORICAL,s.a.TEMPORAL,s.a.GEOGRAPHICAL]},{fact:r.a.OUTLIER,chart:n.a.VERTICAL_BAR_CHART,breakdownType:[s.a.CATEGORICAL,s.a.TEMPORAL,s.a.GEOGRAPHICAL]},{fact:r.a.OUTLIER,chart:n.a.AREA_CHART,breakdownType:[s.a.TEMPORAL]},{fact:r.a.OUTLIER,chart:n.a.LINE_CHART,breakdownType:[s.a.TEMPORAL]},{fact:r.a.EXTREME,chart:n.a.VERTICAL_BAR_CHART,breakdownType:[s.a.CATEGORICAL,s.a.TEMPORAL,s.a.GEOGRAPHICAL]},{fact:r.a.EXTREME,chart:n.a.LINE_CHART,breakdownType:[s.a.TEMPORAL]},{fact:r.a.EXTREME,chart:n.a.AREA_CHART,breakdownType:[s.a.TEMPORAL]},{fact:r.a.PROPORTION,chart:n.a.PROGRESS_BAR_CHART,breakdownType:[s.a.CATEGORICAL,s.a.GEOGRAPHICAL,s.a.TEMPORAL]},{fact:r.a.PROPORTION,chart:n.a.PIE_CHART,breakdownType:[s.a.CATEGORICAL,s.a.GEOGRAPHICAL,s.a.TEMPORAL]},{fact:r.a.RANK,chart:n.a.HORIZONTAL_BAR_CHART,breakdownType:[s.a.CATEGORICAL,s.a.GEOGRAPHICAL,s.a.TEMPORAL]},{fact:r.a.DISTRIBUTION,chart:n.a.AREA_CHART,breakdownType:[s.a.TEMPORAL]},{fact:r.a.DISTRIBUTION,chart:n.a.VERTICAL_BAR_CHART,breakdownType:[s.a.CATEGORICAL,s.a.GEOGRAPHICAL]},{fact:r.a.DIFFERENCE,chart:n.a.HORIZONTAL_BAR_CHART,breakdownType:[s.a.CATEGORICAL,s.a.GEOGRAPHICAL,s.a.TEMPORAL]},{fact:r.a.CATEGORIZATION,chart:n.a.VERTICAL_BAR_CHART,breakdownType:[s.a.CATEGORICAL,s.a.GEOGRAPHICAL]},{fact:r.a.TREND,chart:n.a.LINE_CHART,breakdownType:[s.a.TEMPORAL]},{fact:r.a.VALUE,chart:n.a.VERTICAL_BAR_CHART}]},287:function(e,t,a){"use strict";a.d(t,"b",(function(){return A})),a.d(t,"a",(function(){return E}));var r=a(21),n=a(0),s=a.n(n),o=a(186),i=a(181),u=a(205),c=[{fact:i.a.ASSOCIATION,chart:o.a.SCATTER_PLOT,breakdownType:[u.a.CATEGORICAL,u.a.TEMPORAL,u.a.GEOGRAPHICAL]},{fact:i.a.OUTLIER,chart:o.a.AREA_CHART,breakdownType:[u.a.TEMPORAL]},{fact:i.a.OUTLIER,chart:o.a.LINE_CHART,breakdownType:[u.a.TEMPORAL]},{fact:i.a.EXTREME,chart:o.a.VERTICAL_BAR_CHART,breakdownType:[u.a.CATEGORICAL,u.a.CATEGORICAL,u.a.GEOGRAPHICAL]},{fact:i.a.EXTREME,chart:o.a.LINE_CHART,breakdownType:[u.a.TEMPORAL]},{fact:i.a.EXTREME,chart:o.a.AREA_CHART,breakdownType:[u.a.TEMPORAL]},{fact:i.a.PROPORTION,chart:o.a.PROGRESS_BAR_CHART,breakdownType:[u.a.CATEGORICAL,u.a.GEOGRAPHICAL]},{fact:i.a.PROPORTION,chart:o.a.PIE_CHART,breakdownType:[u.a.CATEGORICAL,u.a.GEOGRAPHICAL]},{fact:i.a.RANK,chart:o.a.HORIZONTAL_BAR_CHART,breakdownType:[u.a.CATEGORICAL,u.a.GEOGRAPHICAL]},{fact:i.a.DISTRIBUTION,chart:o.a.AREA_CHART,breakdownType:[u.a.TEMPORAL]},{fact:i.a.DISTRIBUTION,chart:o.a.VERTICAL_BAR_CHART,breakdownType:[u.a.CATEGORICAL,u.a.GEOGRAPHICAL]},{fact:i.a.DIFFERENCE,chart:o.a.HORIZONTAL_BAR_CHART,breakdownType:[u.a.CATEGORICAL,u.a.GEOGRAPHICAL,u.a.TEMPORAL]},{fact:i.a.CATEGORIZATION,chart:o.a.VERTICAL_BAR_CHART,breakdownType:[u.a.CATEGORICAL,u.a.GEOGRAPHICAL]},{fact:i.a.TREND,chart:o.a.LINE_CHART,breakdownType:[u.a.TEMPORAL]},{fact:i.a.VALUE,chart:o.a.VERTICAL_BAR_CHART}],p=a(274),l=function e(t,a){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=a.filter((function(e){return e.field===t.groupby[0]}))[0],o=n?p.a:c;return r=o.filter((function(e){return e.fact===t.type})),s&&(r=r.filter((function(e){return-1!==e.breakdownType.indexOf(s.type)})),s.type===u.a.CATEGORICAL&&s.values&&(r=r.filter((function(e){return!e.rang||s.values.length>=e.rang[0]&&s.values.length<=e.rang[1]}))),0!==r.length||n||(r=e(t,a,!0))),r},f=a(15),h=a(16),d=a(17),y=a(18),m=a(396),g=function(e){Object(d.a)(a,e);var t=Object(y.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.spec.chart.id,t=this.props.spec,a=e?"#vischart_".concat(e):"#demo-chart";this.autovis=new m.AutoVis,this.autovis=new m.AutoVis,this.autovis.container(a),this.autovis.load(t),this.autovis.generate()}},{key:"componentDidUpdate",value:function(e){var t=this.props.spec.chart.id,a=this.props.spec,r=t?"#vischart_".concat(t):"#demo-chart";this.autovis=new m.AutoVis,this.autovis=new m.AutoVis,this.autovis.container(r),this.autovis.load(a),this.autovis.generate()}},{key:"render",value:function(){if(this.props.spec.chart){var e=this.props.spec.chart,t=e.size;if("vegalite"===e.type){var a=this.props.spec.chart.width;.5*this.props.spec.chart.height,.5*a}else switch(t){case"wide":220,560;break;case"middle":200,360;break;case"small":150,235}}var r=(this.props.spec.chart?this.props.spec.chart:{id:"demo-chart"}).id;return s.a.createElement("div",{id:r?"vischart_".concat(r):"demo-chart",style:{height:"640",width:"640",display:"flex",alignItems:"center",justifyContent:"center",visibility:"hidden"}})}}]),a}(n.Component),b=a(236),T=a(185),v=a.n(T),C=function(e){return Math.round(Math.random()*(e-1))},A=function(e,t){var a=l(t,e);return 0===a.length?null:a[C(a.length)].chart},F=function(e){var t=e;switch(e){case o.a.AREA_CHART:t="areachart";break;case o.a.BUBBLE_CHART:t="bubblechart";break;case o.a.COLOR_FILLING_MAP:t="filledmap";break;case o.a.BUBBLE_MAP:t="bubblemap";break;case o.a.HALF_RING_CHART:t="donutchart";break;case o.a.HORIZONTAL_BAR_CHART:t="horizentalbarchart";break;case o.a.VERTICAL_BAR_CHART:case o.a.STACKED_BAR_CHART:case o.a.VERTICAL_DIFFERENCE_BAR_CHART:case o.a.ISOTYPE_BAR_CHART:case o.a.VERTICAL_DIFFERENCE_ARROW_CHART:t="verticalbarchart";break;case o.a.LINE_CHART:case o.a.STACKED_LINE_CHART:t="linechart";break;case o.a.PROPORTION_ISOTYPE_CHART:case o.a.PIE_CHART:t="piechart";break;case o.a.PROGRESS_BAR_CHART:t="progresschart";break;case o.a.RING_CHART:t="donutchart";break;case o.a.SCATTER_PLOT:t="scatterplot";break;case o.a.TEXT_CHART:t="textchart";break;case o.a.TREE_MAP:t="treemap"}return t},E=function(e,t,a,n,i,u){a.chart&&""!==a.chart||(a.chart=A(e.schema,a));var c=a.chart;if(c===o.a.ISOTYPE_BAR_CHART&&(a.chart=o.a.VERTICAL_BAR_CHART),!(a=Object(b.a)(a)).chart||!Object(b.b)(a))return console.log("no valid",a),null;var p={id:t,size:i,type:F(c),style:"business",duration:0,showSuggestion:!1},l={data:e=Object(r.a)(Object(r.a)({},e),{},{values:n}),fact:a,chart:p};return s.a.createElement(g,{spec:v.a.cloneDeep(l)})}},305:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return s}));var r=a(2),n=function(e){return{type:r.a.UPDATE_QUESTION,question:e}},s=function(e){return{type:r.a.SAVE_CACHED_QA,cachedQA:e}}},320:function(e,t,a){"use strict";var r=a(321);e.exports=function(e,t,a){if("number"===typeof t&&(a=t),r.has(e.toLowerCase())){t=r.get(e.toLowerCase());var n=e.charAt(0);n===n.toUpperCase()&&(t=n.toUpperCase()+t.slice(1)),e===e.toUpperCase()&&(t=t.toUpperCase())}else"string"!==typeof t&&(t=(e.replace(/(?:s|x|z|ch|sh)$/i,"$&e").replace(/([^aeiou])y$/i,"$1ie")+"s").replace(/i?e?s$/i,(function(t){return e.slice(-1)===e.slice(-1).toLowerCase()?t.toLowerCase():t.toUpperCase()})));return 1===Math.abs(a)?e:t}},321:function(e,t,a){"use strict";(function(e){var t=a(322);Object.defineProperty(e,"exports",{get:function(){return new Map(Object.entries(t))}})}).call(this,a(53)(e))},322:function(e){e.exports=JSON.parse('{"addendum":"addenda","aircraft":"aircraft","alga":"algae","alumna":"alumnae","alumnus":"alumni","amoeba":"amoebae","analysis":"analyses","antenna":"antennae","antithesis":"antitheses","apex":"apices","appendix":"appendices","automaton":"automata","axis":"axes","bacillus":"bacilli","bacterium":"bacteria","barracks":"barracks","basis":"bases","beau":"beaux","bison":"bison","buffalo":"buffalo","bureau":"bureaus","cactus":"cacti","calf":"calves","carp":"carp","census":"censuses","chassis":"chassis","cherub":"cherubim","child":"children","ch\xe2teau":"ch\xe2teaus","cod":"cod","codex":"codices","concerto":"concerti","corpus":"corpora","crisis":"crises","criterion":"criteria","curriculum":"curricula","datum":"data","deer":"deer","diagnosis":"diagnoses","die":"dice","dwarf":"dwarfs","echo":"echoes","elf":"elves","elk":"elk","ellipsis":"ellipses","embargo":"embargoes","emphasis":"emphases","erratum":"errata","faux pas":"faux pas","fez":"fezes","firmware":"firmware","fish":"fish","focus":"foci","foot":"feet","formula":"formulae","fungus":"fungi","gallows":"gallows","genus":"genera","goose":"geese","graffito":"graffiti","grouse":"grouse","half":"halves","hero":"heroes","hoof":"hooves","hovercraft":"hovercraft","hypothesis":"hypotheses","index":"indices","kakapo":"kakapo","knife":"knives","larva":"larvae","leaf":"leaves","libretto":"libretti","life":"lives","loaf":"loaves","locus":"loci","louse":"lice","man":"men","matrix":"matrices","means":"means","medium":"media","media":"media","memorandum":"memoranda","millennium":"millennia","minutia":"minutiae","moose":"moose","mouse":"mice","nebula":"nebulae","nemesis":"nemeses","neurosis":"neuroses","news":"news","nucleus":"nuclei","oasis":"oases","offspring":"offspring","opus":"opera","ovum":"ova","ox":"oxen","paralysis":"paralyses","parenthesis":"parentheses","person":"people","phenomenon":"phenomena","phylum":"phyla","pike":"pike","polyhedron":"polyhedra","potato":"potatoes","prognosis":"prognoses","quiz":"quizzes","radius":"radii","referendum":"referenda","salmon":"salmon","scarf":"scarves","self":"selves","series":"series","sheep":"sheep","shelf":"shelves","shrimp":"shrimp","spacecraft":"spacecraft","species":"species","spectrum":"spectra","squid":"squid","stimulus":"stimuli","stratum":"strata","swine":"swine","syllabus":"syllabi","symposium":"symposia","synopsis":"synopses","synthesis":"syntheses","tableau":"tableaus","that":"those","thesis":"theses","thief":"thieves","this":"these","tomato":"tomatoes","tooth":"teeth","trout":"trout","tuna":"tuna","vertebra":"vertebrae","vertex":"vertices","veto":"vetoes","vita":"vitae","vortex":"vortices","watercraft":"watercraft","wharf":"wharves","wife":"wives","wolf":"wolves","woman":"women"}')},382:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a(2),n=function(e,t,a){return{type:r.a.UPLOAD_DATA,fileName:e,schema:t,data:a}}},392:function(e,t,a){},416:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return s}));var r=a(2),n=function(e,t,a){return{type:r.a.GENERATE_STORY,facts:e,relations:t,coverage:a}},s=function(e,t){return{type:r.a.UPDATE_PROGRESS,totalLength:e,currentLength:t}}},500:function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return o}));var r=function(e){return e.question.question},n=function(e){return e.question.cachedQA},s=function(e){return e.question.isUpdateLayout},o=function(e){return e.question.editedTitle}},54:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p}));var r=a(15),n=a(16),s=a(17),o=a(18),i=a(0),u=a.n(i),c=a(287),p=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).shouldRender=!1,e.getSize=function(){return"large"},e}return Object(n.a)(a,[{key:"componentWillMount",value:function(){this.shouldRender=!0}},{key:"shouldComponentUpdate",value:function(){return!!this.shouldRender&&(this.shouldRender=!1,!0)}},{key:"render",value:function(){var e=this.props,t=e.schema,a=e.fact,r=e.data;return u.a.createElement(u.a.Fragment,null,Object(c.a)({schema:t},a.id,a,r,this.getSize()))}}]),a}(i.Component)},55:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return q}));var r=a(21),n=a(15),s=a(16),o=a(17),i=a(18),u=a(0),c=a.n(u),p=a(181),l=[{id:0,template:"The Pearson correlation between the {{measure1}} and the {{measure2}} is {{parameter}} when {{subspace}}."},{id:1,template:"When {{subspace}}, the Pearson correlation coefficient between the {{measure1}} and the {{measure2}} is {{parameter}}."},{id:2,template:"When {{subspace}}, the {{measure1}} is correlated with the {{measure2}} and the Person correlation is {{parameter}}."}],f=[{id:0,template:"When {{subspace}}, there are {{parameter}} {{groupby}}s: {{no.1}}, {{no.2}}, {{no.3}}, and {{focus}} needs to pay attention."},{id:1,template:"When {{subspace}}, the data are grouped into {{parameter}} {{groupby}}s, including {{no.1}}, {{no.2}}, {{no.3}}, among which {{focus}} needs to pay attention."},{id:2,template:"The data contain {{parameter}} {{groupby}}s when {{subspace}}, which are {{no.1}}, {{no.2}}, {{no.3}}. {{focus}} needs to pay attention."}],h=[{id:0,template:"The difference between {{focus1}} and {{focus2}} regarding to their {{agg}} {{measure}} is {{parameter}} when {{subspace}}."},{id:1,template:"{{focus1}} and {{focus2}}'s difference on the {{agg}} {{measure}} is {{parameter}} when {{subspace}}."},{id:2,template:"A comparison between {{focus1}} and {{focus2}} on their {{agg}} {{measure}} shows the difference is {{parameter}} when {{subspace}}."}],d=[{id:0,template:"The distribution of the {{agg}} {{measure}} over different {{groupby}}s shows an overview of the data when {{subspace}} and {{focus}} needs to pay attention."},{id:1,template:"The distribution of the {{agg}} {{measure}} over different {{groupby}}s shows an overview of the data when {{subspace}} and {{focus}} needs to pay attention."},{id:2,template:"The distribution of the {{agg}} {{measure}} over different {{groupby}}s shows an overview of the data when {{subspace}} and {{focus}} needs to pay attention."}],y=[{id:0,template:"Given {{subspace}}, the {{focus}} value of the {{agg}} {{measure}} is {{parameter[1]}} when the {{groupby}} is {{parameter[0]}}."},{id:1,template:"The {{focus}} {{agg}} {{measure}} value over {{groupby}}s is {{parameter[1]}} when the {{groupby}} is {{parameter[0]}} given {{subspace}}."},{id:2,template:"Among all {{groupby}}s, {{parameter[0]}} has the {{focus}} {{agg}} {{measure}} value, which is {{parameter[1]}}, when {{subspace}}."}],m=[{id:0,template:"The {{agg}} {{measure}} of {{focus}} is an outlier when compared with that of other {{groupby}}s when {{subspace}}."},{id:1,template:"{{focus}}'s {{agg}} {{measure}} is anomalously different from other {{groupby}}s' {{measure}} when {{subspace}}."},{id:2,template:"Among various {{groupby}}s, the {{agg}} {{measure}} of {{focus}} is an anomaly when {{subspace}}."}],g=[{id:0,template:"The {{focus}} accounts for {{parameter}} of the {{agg}} {{measure}} when {{subspace}}."},{id:1,template:"The {{focus}} makes up {{parameter}} of the {{agg}} {{measure}} when {{subspace}}."},{id:2,template:"The {{focus}}'s {{agg}} {{measure}} takes {{parameter}} of the {{agg}} {{measure}} when {{subspace}}."}],b=[{id:0,template:"In the {{agg}} {{measure}} ranking of different {{groupby}}s,  the top three {{groupby}}s are {{no.1}}, {{no.2}}, {{no.3}}, when {{subspace}}."},{id:1,template:"The ranking list of the {{groupby}}s ordered by their {{agg}} {{measure}} when {{subspace}}, in which the top three {{groupby}}s are {{no.1}}, {{no.2}}, {{no.3}}."},{id:2,template:"When sorting the {{groupby}}s in order based on their {{agg}} {{measure}}, the top three {{groupby}}s are {{no.1}}, {{no.2}}, {{no.3}} when {{subspace}}."}],T=[{id:0,template:"The trend of the {{agg}} {{measure}} over {{groupby}}s is {{parameter}} when {{subspace}} and the value of {{focus}} needs to pay attention."},{id:1,template:"The {{agg}} {{measure}} over {{groupby}}s shows a/an {{parameter}} trend when {{subspace}} and the value of {{focus}} needs to pay attention."},{id:2,template:"The {{agg}} {{measure}} over {{groupby}}s is {{parameter}} when {{subspace}} and the value of {{focus}} needs to pay attention."}],v=[{id:0,template:"The {{agg}} {{measure}} is {{parameter}} when {{subspace}}."},{id:1,template:"When {{subspace}}, the value of the {{agg}} {{measure}} is {{parameter}}."},{id:2,template:"The {{agg}} {{measure}} value is {{parameter}} when {{subspace}}."}],C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=[];switch(e){case p.a.ASSOCIATION:a=l;break;case p.a.CATEGORIZATION:a=f;break;case p.a.DIFFERENCE:a=h;break;case p.a.DISTRIBUTION:a=d;break;case p.a.EXTREME:a=y;break;case p.a.OUTLIER:a=m;break;case p.a.PROPORTION:a=g;break;case p.a.RANK:a=b;break;case p.a.TREND:a=T;break;case p.a.VALUE:a=v}-1===t&&(t=Math.floor(10*Math.random())%3);var r="";try{r=a[t].template}catch(n){console.error(n),console.log("wrong id:"+t)}return r},A=a(236),F={SUM:"sum",MAX:"max",MIN:"min",AVG:"avg",COUNT:"count"},E=a(185),R=a.n(E),O=a(320),x=function(e){switch(e){case F.SUM:return"total";case F.MAX:return"maximum";case F.MIN:return"minimum";case F.AVG:return"average";case F.COUNT:return"count";case F.NONE:default:return""}},w=function(e){return"count"===e.aggregate?"":e.field.toLowerCase()},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single",a=e[0];if("single"===t)return a.toLowerCase();if("plural"===t){if(-1===a.indexOf(" of "))return O(a,2).toLowerCase();var r=a.split(" "),n=r.indexOf("of")-1;if(n>-1){var s=O(r[n],2);return a.replace(r[n],s)}}},k=function(e){var t=0,a="",r="";(e=(e||0).toString()).indexOf(".")>0?(t=(e=e.toFixed(2)).indexOf("."),a=e.substr(t),r=e.substring(0,t)):r=e;for(var n=[],s=0,o=(r=r.split("")).length-1;o>=0;o--)s++,n.unshift(r[o]),s%3||0===o||n.unshift(",");return n.join("")+a||""},I=function(e,t){var a="";return e.subspace.length?(e.subspace.map((function(e,t){return a+="".concat(0===t?" ":" and ","the ").concat(e.field," is ").concat(e.value)})),t=t.replace("{{subspace}}",a)):t=(t=(t=(t=(t=(t=(t=t.replace(", when {{subspace}}","")).replace(" when {{subspace}}","")).replace(" in case of {{subspace}}","")).replace(" given {{subspace}}","")).replace("When {{subspace}}, ","")).replace("Given {{subspace}}, ","")).replace("In case of {{subspace}}, ",""),t},N=a(54),j=function(e,t){if(-1===e.indexOf(t))return e;var a=e.indexOf(t)+t.length;"s"===e.substring(a,a+1)&&(a+=1);var r=e.indexOf(t),n=e.substring(0,a)+"</i></span>"+e.substring(a);return n=n.substring(0,r)+'<span class="hightlight"><i>'+n.substring(r)},L=function(e){if(!Object(A.b)(e))return"";var t,a,r=e.generatedScript;switch(e.type){case p.a.ASSOCIATION:a=r;break;case p.a.RANK:var n=e.parameter[0],s=e.parameter[1],o=e.parameter[2];a=j(r,n),s&&(a=j(a,s)),s&&o&&(a=j(a,o));break;case p.a.VALUE:case p.a.DIFFERENCE:a=j(r,e.measure[0].field.toLowerCase()),a=j(a,k(e.parameter));break;case p.a.RANK:a=j(r,"decreasing");break;case p.a.OUTLIER:a=r;break;case p.a.EXTREME:case p.a.OUTLIER:a=j(r,"maximum"),e.parameter[1]&&(a=j(a,k(e.parameter[1])));break;case p.a.DISTRIBUTION:a=r;break;case p.a.CATEGORIZATION:t=e.parameter.length.toString(),a=j(r,t);break;default:t=e.parameter,a=j(r,t)}return a},G=a(154),M=(a(119),new Map),_=new Map,q=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).renderLayout=null,s.computeSizeAndRenderCharts=function(){var e=R.a.cloneDeep(s.state.facts).map((function(e,t){if(!_.get(e.id))return e;var a=_.get(e.id).current,r=0,n=0,o=0;if(a&&(o=a.clientHeight),s.renderLayout&&s.renderLayout[t]){var i=s.renderLayout[t],u=i.x0,c=i.x1,p=i.y0;r=c-u,n=i.y1-p-o}return 0===r||0===n||(e.width=r,e.height=n,e.captionH=o,0===t&&(e.preContainerSize=s.props.containerSize)),e}));s.setState({facts:e},(function(){s.renderCharts()}))},s.renderCharts=function(){setTimeout((function(){s.batchUpdateSvg()}),1e3)},s.batchUpdateSvg=function(){R.a.cloneDeep(s.state.facts).map((function(e){if(!M.get(e.id))return e;var t=M.get(e.id).current;return t&&s.updateSvg(t,e.width,e.height),e}))},s.updateSvg=function(e,t,a){if(e){var r=a-15,n=Math.min(t,r)/640,o=e.children&&e.children[0];o&&(o.setAttribute("style","transform:scale(".concat(.9*n,');visibility:"visible"')),o.onmouseenter=function(){o.setAttribute("style","transform:scale(".concat(.9*n,");border:").concat(s.props.isEdit?"1px dashed grey":" "," "))},o.onmouseleave=function(){o.setAttribute("style","transform:scale(".concat(.9*n,")"))})}},s._renderedFacts=function(e){var t=s.state,a=t.renderNum,r=t.count;return e.slice(0,a>=r?r:a)},s.weightAdapter=function(e,t){var a=e.children.length,n=[];switch(t){case 1:n=[1],2===a?n=[3,2]:3===a&&(n=[3,1.2,.8]);break;case 2:n=[1],2===a?n=[4,3]:3===a&&(n=[6,3,2]);break;case 3:n=[1],2===a?n=[3,2]:3===a&&(n=[3,1.2,.8]);break;case 4:n=[1],2===a?n=[3,2]:3===a&&(n=[4,3,2])}return{children:e.children.map((function(e,t){return Object(r.a)(Object(r.a)({},e),{},{significance:n[t]})}))}},s.change=function(e){s.setState({renderNum:e.target.value})},s.getTreemap=function(e,t,a){return G.treemap().tile(G.treemapResquarify.ratio(1)).size([e,t]).padding(3).round(!0)(G.hierarchy(a).sum((function(e){return e.significance})))},s.sort=function(e){return e.sort((function(e,t){return t.significance-e.significance}))},s.setRef=function(e){return M.set(e,c.a.createRef()),M.get(e)},s.setCaptionRef=function(e){return _.set(e,c.a.createRef()),_.get(e)},s.endEdit=function(e,t){var a=_.get(e).current,r=s.props,n=r.cachedQA,o=r.QAID,i=R.a.cloneDeep(n);i[o].facts[t].script=a.innerHTML,s.props.saveCachedDecomposedQA(i)},s.deleteCard=function(e){var t=s.props,a=t.cachedQA,r=t.QAID,n=R.a.cloneDeep(a),o=r;n[o]&&n[o].facts.splice(e,1),n[o]&&0===n[o].facts.length&&n.splice(o,1),s.props.saveCachedDecomposedQA(n)},s.state={renderNum:5,count:5,clientWidth:0,clientHeight:0,facts:s.props.facts,containerSize:s.props.containerSize},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.computeSizeAndRenderCharts()}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.containerSize.width,r=e.containerSize.height,n=this.state.containerSize,s=n.width,o=n.height;a===s&&r===o||this.setState({containerSize:{width:a,height:r}}),e.isUpdateLayout&&this.setState({facts:e.facts},(function(){t.computeSizeAndRenderCharts()}))}},{key:"componentDidUpdate",value:function(){var e=this,t=this.state.containerSize,a=t.width,r=t.height,n=this.state.facts[0].preContainerSize;if(n&&(n.width!==a||n.height!==r)){var s=R.a.cloneDeep(this.state.facts);s[0].preContainerSize=this.state.containerSize,this.setState({facts:s},(function(){e.computeSizeAndRenderCharts()}))}this.props.isEdit&&this.renderCharts()}},{key:"render",value:function(){var e=this,t=this.props,a=t.columnNum,r=t.isEdit,n=(t.QAID,t.schema),s=t.data,o=this.state.containerSize,i=this.state.facts,u={children:this._renderedFacts(this.sort(i))},l=o.width,f=o.height;return this.renderLayout=this.getTreemap(l,f,this.weightAdapter(u,a)).leaves(),c.a.createElement("div",{className:"inner-auto-layout"},this.renderLayout&&this.renderLayout.map((function(t,a){var o=t.data,i=t.x0,u=t.x1,l=t.y0,f=t.y1,h=o.script?o.script:function(e){if(!Object(A.b)(e))return"";var t=R.a.cloneDeep(e),a=C(t.type),r=F.NONE;switch(t.measure.length>0&&(r=t.measure[0].aggregate),t.type){case p.a.ASSOCIATION:a=(a=(a=(a=a.replace("{{measure1}}",w(t.measure[0]))).replace("{{measure2}}",w(t.measure[1]))).replace("{{agg1}}",x(t.measure[0].aggregate))).replace("{{agg2}}",x(t.measure[1].aggregate)),a=I(t,a),""!==t.parameter&&(a=a.replace("{{parameter}}",k(Number.parseFloat(t.parameter).toFixed(3))));break;case p.a.CATEGORIZATION:if(a=(a=a.replace("{{groupby}}s",S(t.groupby,"plural"))).replace("{{groupby}}s",S(t.groupby,"plural")),a=I(t,a),t.parameter.length){a=a.replace("{{parameter}}",k(t.parameter.length));var n="";t.parameter.forEach((function(e,t){n+="".concat(0===t?"":","," ").concat(e)})),a=a.replace("{{no.1}}, {{no.2}}, {{no.3}}",n)}if(t.focus.length)if(a.indexOf(". {{focus}}")>-1){var s=t.focus[0].value.slice(0,1).toUpperCase()+t.focus[0].value.slice(1);a=a.replace("{{focus}}",s)}else a=a.replace("{{focus}}",t.focus[0].value);else a=(a=(a=a.replace(", and {{focus}} needs to pay attention","")).replace(", among which {{focus}} needs to pay attention","")).replace(". {{focus}} needs to pay attention","");break;case p.a.DIFFERENCE:a=(a=a.replace("{{measure}}",w(t.measure[0]))).replace("{{agg}}",x(r)),t.focus.length>=2&&(a=(a=a.replace("{{focus1}}",t.focus[0].value)).replace("{{focus2}}",t.focus[1].value)),a=I(t,a),""!==t.parameter&&(a=a.replace("{{parameter}}",k(t.parameter)));break;case p.a.DISTRIBUTION:a=(a=(a=(a=(a=a.replace("{{measure}}",w(t.measure[0]))).replace("{{measure}}",w(t.measure[0]))).replace("{{agg}}",x(r))).replace("{{groupby}}s",S(t.groupby,"plural"))).replace("{{groupby}}",S(t.groupby)),a=I(t,a),a=t.focus.length?a.replace("{{focus}}",t.focus[0].value):a.replace(" and {{focus}} needs to pay attention","");break;case p.a.EXTREME:a=(a=(a=(a=(a=a.replace("{{measure}}",w(t.measure[0]))).replace("{{agg}}",x(r))).replace("{{groupby}}s",S(t.groupby,"plural"))).replace("{{groupby}}",S(t.groupby))).replace("{{groupby}}",S(t.groupby)),a=I(t,a),t.focus.length&&(void 0!==t.focus[0].extremeFocus&&void 0!==t.focus[0].extremeValue?a=(a=(a="min"===t.focus[0].extremeFocus?a.replace("{{focus}}","minimum"):a.replace("{{focus}}","maximum")).replace("{{parameter[0]}}",t.focus[0].value)).replace("{{parameter[1]}}",k(Math.round(100*t.parameter[1])/100)):t.parameter.length&&(a=(a=(a="min"===t.parameter[0]?a.replace("{{focus}}","minimum"):a.replace("{{focus}}","maximum")).replace("{{parameter[0]}}",t.focus[0].value)).replace("{{parameter[1]}}",k(t.parameter[1]))));break;case p.a.OUTLIER:a=(a=(a=(a=a.replace("{{measure}}",w(t.measure[0]))).replace("{{measure}}",w(t.measure[0]))).replace("{{groupby}}s",S(t.groupby,"plural"))).replace("{{agg}}",x(r)),a=I(t,a),t.focus.length&&(a=a.replace("{{focus}}",t.focus[0].value));break;case p.a.PROPORTION:a=(a=(a=(a=a.replace("{{measure}}",w(t.measure[0]))).replace("{{agg}}",x(r))).replace("{{measure}}",w(t.measure[0]))).replace("{{agg}}",x(r)),a=I(t,a),t.focus.length&&(a=a.replace("{{focus}}",t.focus[0].value)),t.parameter&&(a=a.replace("{{parameter}}",t.parameter));break;case p.a.RANK:a=(a=(a=(a=a.replace("{{measure}}",w(t.measure[0]))).replace("{{agg}}",x(r))).replace("{{groupby}}s",S(t.groupby,"plural"))).replace("{{groupby}}s",S(t.groupby,"plural")),a=I(t,a),t.parameter.length>=3?(a=(a=(a=a.replace("{{parameter}}",k(t.parameter.length))).replace("{{no.1}}",t.parameter[0])).replace("{{no.2}}",t.parameter[1]),3===t.parameter.length||t.parameter.length>3?a=a.replace("{{no.3}}",t.parameter[2]):2===t.parameter.length&&(a=a.replace(", {{no.3}}",""))):a="";break;case p.a.TREND:a=(a=(a=a.replace("{{measure}}",w(t.measure[0]))).replace("{{agg}}",x(r))).replace("{{groupby}}s",S(t.groupby,"plural")),a=I(t,a),t.parameter&&(a=a.replace("{{parameter}}",t.parameter),a="increasing"===t.parameter?a.replace("a/an","an"):a.replace("a/an","a")),a=t.focus.length?a.replace("{{focus}}",t.focus[0].value):a.replace(" and the value of {{focus}} needs to pay attention","");break;case p.a.VALUE:a=(a=a.replace("{{measure}}",w(t.measure[0]))).replace("{{agg}}",x(r)),a=I(t,a),t.focus.length&&(a=a.replace("{{focus}}",t.focus[0].value)),""!==t.parameter&&(a=a.replace("{{parameter}}",k(t.parameter)))}return a=a.slice(0,1).toUpperCase()+a.slice(1)}(o)||" ";return o.generatedScript=h,c.a.createElement("div",{style:{position:"absolute",left:i,top:l,width:u-i,height:f-l}},c.a.createElement("div",{className:"chart-card"},r&&c.a.createElement("div",{className:"delete",onClick:function(){return e.deleteCard(a)}}),c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"vis-box",style:{height:"calc(100% - ".concat(o.captionH,"px)")}},c.a.createElement("div",{className:"bound-box",id:o.id,ref:e.setRef(o.id)},c.a.createElement(N.default,{schema:n,fact:o,data:s}))),c.a.createElement("div",{className:"caption",contentEditable:r,suppressContentEditableWarning:!0,ref:e.setCaptionRef(o.id,a),onBlur:function(){return e.endEdit(o.id,a)},dangerouslySetInnerHTML:{__html:L(o)}}))))})))}}]),a}(u.Component)},56:function(e,t,a){"use strict";a.r(t),t.default={story1:[{question:"which category has the highest sales?",facts:[{type:"extreme",measure:[{field:"sales",type:"numerical",aggregate:"sum"}],breakdown:[{field:"category",type:"categorical"}],subspace:[],focus:[{field:"category",value:"SUV"}],parameter:["","6853129"],script:"The maximum value of the total sales is 6,853,129 when the category is SUV."}]},{question:"what is the sales over year?",facts:[{type:"trend",measure:[{field:"sales",type:"numerical",aggregate:"sum"}],breakdown:[{field:"year",type:"temporal"}],subspace:[],focus:[],parameter:"decreasing",script:"The total sales over years is decreasing."}]},{question:"what is the total value of sales?",facts:[{type:"value",measure:[{field:"sales",type:"numerical",aggregate:"sum"}],breakdown:[],subspace:[],focus:[],parameter:21921768,script:"The total sales value is 21,921,768."}]}],story2:[{question:"what is the trend of sales?",facts:[{type:"trend",measure:[{field:"sales",type:"numerical",aggregate:"sum"}],breakdown:[{field:"year",type:"temporal"}],subspace:[],focus:[],parameter:"decreasing",script:"The trend of total sales over years is decreasing."}]},{question:"which brand has the highest/lowest sales?",facts:[{type:"extreme",measure:[{field:"sales",type:"numerical",aggregate:"sum"}],breakdown:[{field:"brand",type:"categorical"}],subspace:[],focus:[{field:"brand",value:"Ford"}],parameter:["","5489641"],script:"The maximum value of the total sales is 5,489,641 when the brand is Ford."}]},{question:"which brand has an increasing trend of sales?",facts:[{type:"trend",measure:[{field:"sales",type:"numerical",aggregate:"sum"}],breakdown:[{field:"year",type:"temporal"}],subspace:[{field:"brand",type:"categorical",value:"Volkswagen"}],focus:[],parameter:"increasing",script:"The total sales over years shows an increasing trend when the brand is Volkswagen."},{type:"trend",measure:[{field:"sales",type:"numerical",aggregate:"sum"}],breakdown:[{field:"year",type:"temporal"}],subspace:[{field:"brand",type:"categorical",value:"Ford"}],focus:[],parameter:"increasing",script:"The trend of total sales over years is increasing when the brand is Ford."},{type:"trend",measure:[{field:"sales",type:"numerical",aggregate:"sum"}],breakdown:[{field:"year",type:"temporal"}],subspace:[{field:"brand",type:"categorical",value:"Hyundai"}],focus:[],parameter:"increasing",script:"The trend of total sales over years is increasing when the brand is Hyundai."}]}]}},57:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var r=a(21),n=a(15),s=a(16),o=a(17),i=a(18),u=a(0),c=a.n(u),p=a(55),l=(a(392),function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.initDone,a=e.intl;return c.a.createElement("div",{className:"ErrorView"},c.a.createElement("div",null),c.a.createElement("p",null,t&&a.get("empty")))}}]),a}(u.PureComponent)),f=a(277),h=a.n(f),d=a(185),y=a.n(d),m=(a(120),new Map),g=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).titleRef=c.a.createRef(),e.debounceTimer=null,e.containerNodes={width:0,height:0},e.onResize=function(){window.addEventListener("resize",(function(){e.debounceTimer&&clearTimeout(debounceTimer),setTimeout((function(){e.forceUpdate()}),1e3)}))},e.setFactId=function(e,t){return y.a.cloneDeep(e).map((function(e){return Object(r.a)(Object(r.a)({},e),{},{id:"".concat(t,"QA").concat(h()())})}))},e.fullscreen=function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},e.reorder=function(e,t){for(var a=t,r=[],n=0;n<a;){for(var s=0;s<e.length;s+=a){var o=e[s+n];void 0!==o&&r.push(o)}n++}return r},e.endEdit=function(t){var a=m.get(t).current;if(a){var r=e.props.cachedQA;r[t]&&(r[t].question=a.innerHTML),e.props.saveCachedDecomposedQA(r)}},e.setSubTitleRef=function(e){return m.set(e,c.a.createRef()),m.get(e)},e.setContainerRef=function(t){if(t){e.containerNodes={width:t.clientWidth,height:t.clientHeight-55}}},e.endTitleEdit=function(){var t=e.titleRef.current;if(t){var a=t.innerHTML;a!==e.props.editedTitle&&e.props.editTitle(a)}},e.export=function(){window.print()},e.getTitle=function(){var t=e.props,a=t.askedQuestion,r=t.editedTitle,n=r||a;return n.slice(0,1).toUpperCase()+n.slice(1)},e.isCanGetSize=function(){return e.preContainerNodes={width:0,height:0},!(!e.containerNodes||0===e.containerNodes.width||0===e.containerNodes.height)&&(e.preContainerNodes=y.a.cloneDeep(e.containerNodes),!0)},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.onResize()}},{key:"componentDidUpdate",value:function(){this.preContainerNodes&&this.containerNodes&&(this.preContainerNodes.width===this.containerNodes.width&&this.preContainerNodes.height===this.containerNodes.height||this.forceUpdate())}},{key:"render",value:function(){var e=this,t=this.props,a=t.initDone,r=t.intl,n=t.isEdit,s=t.decomposedQA,o=t.loading,i=t.isUpdateLayout;if(!s)return null;var u=function(){return c.a.createElement("div",{className:"title"},c.a.createElement("h1",{contentEditable:n,title:e.getTitle(),suppressContentEditableWarning:!0,onBlur:function(){return e.endTitleEdit()},ref:e.titleRef},"".concat(e.getTitle()||a&&r.get("inputHint"))),c.a.createElement("div",{className:"fullscreen_icon",onClick:e.fullscreen}),c.a.createElement("div",{className:"export_icon",onClick:e.export}))},f=function(t){var a=t.index,r=t.subQustion,n=t.isEdit,s=r.slice(0,1).toUpperCase()+r.slice(1);return c.a.createElement("div",{className:"sub-title-box"},c.a.createElement("div",{className:"right-box"},c.a.createElement("div",{className:s===e.getTitle()?"right-top hightlight":"right-top default"})),c.a.createElement("div",{className:"sub-title",style:{borderColor:s===e.getTitle()?"#F19C0F":"#A1AEB9"}},c.a.createElement("div",{className:s===e.getTitle()?"index hightlight":"index default"},a+1),c.a.createElement("h1",{contentEditable:n,suppressContentEditableWarning:!0,title:"".concat(s),onBlur:function(){return e.endEdit(a)},ref:e.setSubTitleRef(a)},"".concat(s))))},h=4===s.length?2:s.length;return c.a.createElement("div",{className:"large-size-screen"},c.a.createElement(u,this.props),c.a.createElement("div",{className:"auto-layout",style:{columnCount:h}},c.a.createElement("div",{className:"dec1"}),c.a.createElement("div",{className:"dec2"}),s.length>0?this.reorder(s,h).map((function(t,a){return c.a.createElement("div",{className:"subView",key:t.id,style:{height:4===s.length?"calc(50% - 15px)":"100%",width:"100%"},ref:function(t){return e.setContainerRef(t)}},c.a.createElement("div",{className:"d1"}),c.a.createElement("div",{className:"d2"}),s.length>1&&c.a.createElement(f,{index:t.id,subQustion:t.question,isEdit:n}),e.isCanGetSize()?c.a.createElement(p.default,Object.assign({QAID:a,containerSize:e.containerNodes,facts:e.setFactId(t.facts,a),columnNum:s.length,isUpdateLayout:i},e.props)):null)})):!o&&c.a.createElement(l,{initDone:r,intl:r})))}}]),a}(u.Component)},59:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return T}));a(194);var r=a(203),n=a(21),s=a(161),o=a.n(s),i=a(192),u=a(15),c=a(16),p=a(40),l=a(17),f=a(18),h=a(0),d=a.n(h),y=a(57),m=a(287),g=a(56),b=a(204),T=(a(121),function(e){Object(l.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={question:e.props.question,decomposedQA:[],loading:!1},e.getData=function(){var t=Object(i.a)(o.a.mark((function t(a){var r,n,s,i,u,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.fileName,n={file_name:r,question:a,model:""},e.setState({loading:!0}),s=Object(p.a)(e),0===e.replaceData(a).length){t.next=8;break}return i=e.addParams(e.replaceData(a)),setTimeout((function(){s.setState({loading:!1,decomposedQA:i}),e.props.updateQuestion(a),e.props.saveCachedDecomposedQA(i)}),1e3),t.abrupt("return");case 8:return e.props.updateQuestion(a),t.next=11,b.a(n);case 11:if((u=t.sent).data&&"talk-generator error"!==u.data){t.next=15;break}return e.setState({loading:!1,decomposedQA:[]}),t.abrupt("return");case 15:c=e.addParams(u.data.story),e.setState({loading:!1,decomposedQA:c}),e.props.saveCachedDecomposedQA(c);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.replaceData=function(e){return console.log("question",e),"how is the sales?"===e||"How is the sales?"===e?g.default.story1:"does any brand sell a lot and has an increasing trend?"===e||"Does any brand sell a lot and has an increasing trend?"===e?g.default.story2:[]},e.constructGroupBy=function(e){return e.map((function(e){return e.field}))},e.getFakeScript=function(e,t){var a="";return"in which category has the highest sales and which the lowest "===e?a="in which category has the highest sales and which the lowest ":"sales has an overall value of sales over year "===e?a="sales has an overall value of sales over year ":"sales have an overall value of sales "===e&&(a="sales have an overall value of sales "),("Does any brand sell a lot but has a decreasing trend"===e||"which brand has the highest sales and which brand has the lowest sales "===e||"which brand has an increasing trend of sales over brand "===e)&&(a=["caption1","caption2","caption3"][t]),a},e.getFakeFocus=function(e,t,a){return"which brand has the highest sales and which brand has the lowest sales "===e&&(a[0].value="Ford"),"which brand has the highest sales and which has the lowest "===e&&(a[0].value="Ford"),"in which category has the highest sales and which the lowest "===e&&(a[0].value="SUV"),a},e.addParams=function(t){return t.map((function(t,a){return{question:t.question,id:a,facts:t.facts.map((function(t){return t.chart&&""!==t.chart||(t.groupby=e.constructGroupBy(t.breakdown),t.chart=Object(m.b)(e.props.schema,t)),Object(n.a)(Object(n.a)({},t),{},{groupby:t.breakdown[0]?[t.breakdown[0].field]:[]})}))}}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.cachedQA,a=e.question;t?this.setState({decomposedQA:t}):this.getData(a)}},{key:"componentWillReceiveProps",value:function(e){if(e.question!==this.state.question)this.setState({question:e.question}),this.getData(e.question);else{var t=e.cachedQA;if(!t)return null;this.setState({decomposedQA:t})}}},{key:"render",value:function(){var e=this.state,t=e.decomposedQA,a=e.question,n=e.loading,s=this.props,o=s.initDone,i=s.intl;return d.a.createElement("div",{className:"Dashboard spin-center"},n&&d.a.createElement(r.a,{tip:o&&i.get("Coverting")}),d.a.createElement(y.default,Object.assign({loading:n,askedQuestion:a,decomposedQA:t},this.props)))}}]),a}(h.Component))}}]);
//# sourceMappingURL=13.da60cab7.chunk.js.map